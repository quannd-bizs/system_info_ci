function BestInPlaceEditor(e){this.element=jQuery(e),this.initOptions(),this.bindForm(),this.initNil(),jQuery(this.activator).bind("click",{editor:this},this.clickHandler)}var Haml;!function(){function trim(e){return e.replace(/^\s+|\s+$/g,"")}function html_escape(e){return(e+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\"/g,"&quot;")}function render_attribs(e){var t,n,i=[];for(t in e)if("_content"!==t&&e.hasOwnProperty(t))switch(e[t]){case"undefined":case"false":case"null":case'""':break;default:try{n=JSON.parse("["+e[t]+"]")[0],n=n===!0?t:"string"==typeof n&&embedder.test(n)?'" +\n'+parse_interpol(html_escape(n))+' +\n"':html_escape(n),i.push(" "+t+'=\\"'+n+'\\"')}catch(r){i.push(" "+t+'=\\"" + '+escaperName+"("+e[t]+') + "\\"')}}return i.join("")}function parse_attribs(e){function t(){if("number"==typeof p.start&&"number"==typeof p.middle&&"number"==typeof p.end){var t=trim(e.substr(p.start,p.middle-p.start)),n=trim(e.substr(p.middle+1,p.end-p.middle-1));l[t]=n}p={start:null,middle:null,end:null}}var n,i,r,a,s,o,l={},c=e.length,u=1,d=!1,h=!1,p={start:1,middle:null,end:null};if(!(c>0)||"{"!==e.charAt(0)&&"("!==e.charAt(0))return{_content:" "===e[0]?e.substr(1,c):e};for(r=e.charAt(0),a="{"===r?"}":")",s="{"===r?":":"=",o="{"===r?",":" ",n=1;u>0;n+=1){if(n>c)throw"Malformed attribute block";i=e.charAt(n),h?h=!1:d?("\\"===i&&(h=!0),i===d&&(d=!1)):('"'!==i&&"'"!==i||(d=i),1===u&&(i===s&&(p.middle=n),i!==o&&i!==a||(p.end=n,t(),i===o&&(p.start=n+1))),i!==r&&"("!==i||(u+=1),(i===a||u>1&&")"===i)&&(u-=1))}return l._content=e.substr(n,e.length),l}function parse_interpol(e){for(var t,n=[],i=0,r=0;;){if(r=e.substr(i).search(embedder),0>r){i<e.length&&n.push(JSON.stringify(e.substr(i)));break}if(n.push(JSON.stringify(e.substr(i,r))),i+=r,t=e.substr(i).match(embedder),r=t[0].length,0>r)break;"#"===t[1]?n.push(escaperName+"("+(t[2]||t[3])+")"):n.push(t[2]||t[3]),i+=r}return _.filter(n,function(e){return e&&e.length>0}).join(" +\n")}function compile(e){var t=!1,n=[],i=[];"string"==typeof e&&(e=trim(e).replace(/\n\r|\r/g,"\n").split("\n")),_.each(e,function(e){var r,a=!1;if(t){if(r=t.check_indent.exec(e))return void t.contents.push(r[1]||"");n.push(t.process()),t=!1}_.each(matchers,function(n){a||(r=n.regexp.exec(e),r&&(t={contents:[],indent_level:r[1],matches:r,check_indent:new RegExp("^(?:\\s*|"+r[1]+"  (.*))$"),process:n.process,render_contents:function(){return compile(this.contents)},getIfConditions:function(){return i},pushIfCondition:function(e){i.push(e)},popIfCondition:function(){return i.pop()}},a=!0))}),a||n.push(function(){function t(){try{return escaperName+"("+JSON.stringify(JSON.parse(e))+")"}catch(t){return escaperName+"("+e+")"}}function n(){try{return parse_interpol(JSON.parse(e))}catch(t){return e}}return"\\"===e[0]?parse_interpol(e.substr(1,e.length)):"&="===e.substr(0,2)?(e=trim(e.substr(2,e.length)),t()):"!="===e.substr(0,2)?(e=trim(e.substr(2,e.length)),n()):"="===e[0]?(e=trim(e.substr(1,e.length)),escapeHtmlByDefault?t():n()):parse_interpol(e)}())}),t&&n.push(t.process());var r=_.filter(n,function(e){return e&&e.length>0}).join(" +\n");return 0==r.length&&(r='""'),r}function optimize(e){function t(){a.length>0&&(r.push(JSON.stringify(a.join(""))+i),a=[])}var n,i,r=[],a=[];return _.each(e.replace(/\n\r|\r/g,"\n").split("\n"),function(e){if(n=e.match(/^(\".*\")(\s*\+\s*)?$/),!n)return t(),void r.push(e);i=n[2]||"",n=n[1];try{a.push(JSON.parse(n))}catch(s){t(),r.push(e)}}),t(),r.join("\n")}function render(e,t){t=t||{},e=e||"";var n=compile(e,t);return t.optimize&&(n=Haml.optimize(n)),execute(n,t.context||Haml,t.locals)}function execute(js,self,locals){return function(){with(locals||{})try{var _$output;return eval("_$output ="+js),_$output}catch(e){return"\n<pre class='error'>"+html_escape(e.stack)+"</pre>\n"}}.call(self)}var matchers,self_close_tags,embedder,forceXML,escaperName,escapeHtmlByDefault;embedder=/([#!])\{([^}]*)\}/,self_close_tags=["meta","img","link","br","hr","input","area","base"],matchers=[{name:"html tags",regexp:/^(\s*)((?:[.#%][a-z_\-][a-z0-9_:\-]*)+)(.*)$/i,process:function(){var e,t,n,i,r,a,s,o={};if(e=this.matches[2],n=e.match(/\.([a-z_\-][a-z0-9_\-]*)/gi),i=e.match(/\#([a-z_\-][a-z0-9_\-]*)/gi),t=e.match(/\%([a-z_\-][a-z0-9_:\-]*)/gi),t=t?t[0].substr(1,t[0].length):"div",r=this.matches[3]){if(r=parse_attribs(r),r._content){var l=r._content.charAt(0),c=r._content.charAt(1),u=0;"<"==l?(u++,o.inside=!0,">"==c&&(u++,o.around=!0)):">"==l&&(u++,o.around=!0,"<"==c&&(u++,o.inside=!0)),r._content=r._content.substr(u),this.contents.unshift(trim(r._content)),delete r._content}}else r={};if(n)if(n=_.map(n,function(e){return e.substr(1,e.length)}).join(" "),r["class"])try{r["class"]=JSON.stringify(n+" "+JSON.parse(r["class"]))}catch(d){r["class"]=JSON.stringify(n+" ")+" + "+r["class"]}else r["class"]=JSON.stringify(n);if(i&&(i=_.map(i,function(e){return e.substr(1,e.length)}).join(" "),r.id?r.id=JSON.stringify(i+" ")+r.id:r.id=JSON.stringify(i)),r=render_attribs(r),a=this.render_contents(),'""'===a&&(a=""),o.inside)if(0==a.length)a='"  "';else try{a='" '+JSON.parse(a)+' "'}catch(d){a='" "+\n'+a+'+\n" "'}return s=(forceXML?a.length>0:-1==_.indexOf(self_close_tags,t))?'"<'+t+r+'>"'+(a.length>0?" + \n"+a:"")+' + \n"</'+t+'>"':'"<'+t+r+' />"',o.around&&(s='" '+s.substr(1,s.length-2)+' "'),s}},{name:"each loop",regexp:/^(\s*)(?::for|:each)\s+(?:([a-z_][a-z_\-]*),\s*)?([a-z_][a-z_\-]*)\s+in\s+(.*)(\s*)$/i,process:function(){var e=this.matches[2]||"__key__",t=this.matches[3],n=this.matches[4],i="__result__";return this.matches[5]&&this.contents.unshift(this.matches[5]),"(function () { var "+i+" = [], "+e+", "+t+"; for ("+e+" in "+n+") { if ("+n+".hasOwnProperty("+e+")) { "+t+" = "+n+"["+e+"]; "+i+".push(\n"+(this.render_contents()||"''")+"\n); } } return "+i+'.join(""); }).call(this)'}},{name:"if",regexp:/^(\s*):if\s+(.*)\s*$/i,process:function(){var e=this.matches[2];return this.pushIfCondition([e]),"(function () { if ("+e+") { return (\n"+(this.render_contents()||"")+'\n);} else { return ""; } }).call(this)'}},{name:"else",regexp:/^(\s*):else\s*$/i,process:function(){var e,t=this.popIfCondition(),n=[];return _.each(t,function(e){n.push("! ("+e+")")}),e="if ("+n.join(" && ")+") { ","(function () { "+e+"return (\n"+(this.render_contents()||"")+'\n);} else { return ""; } }).call(this)'}},{name:"silent-comments",regexp:/^(\s*)-#\s*(.*)\s*$/i,process:function(){return'""'}},{name:"silent-comments",regexp:/^(\s*)\/\s*(.*)\s*$/i,process:function(){return this.contents.unshift(this.matches[2]),'"<!--'+this.contents.join("\\n")+'-->"'}},{name:"rawjs",regexp:/^(\s*)-\s*(.*)\s*$/i,process:function(){return this.contents.unshift(this.matches[2]),'"";'+this.contents.join("\n")+"; _$output = _$output "}},{name:"pre",regexp:/^(\s*):pre(\s+(.*)|$)/i,process:function(){return this.contents.unshift(this.matches[2]),'"<pre>"+\n'+JSON.stringify(this.contents.join("\n"))+'+\n"</pre>"'}},{name:"doctype",regexp:/^()!!!(?:\s*(.*))\s*$/,process:function(){var e="";switch((this.matches[2]||"").toLowerCase()){case"":e='<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">';break;case"strict":case"1.0":e='<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">';break;case"frameset":e='<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Frameset//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-frameset.dtd">';break;case"5":e="<!DOCTYPE html>";break;case"1.1":e='<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">';break;case"basic":e='<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML Basic 1.1//EN" "http://www.w3.org/TR/xhtml-basic/xhtml-basic11.dtd">';break;case"mobile":e='<!DOCTYPE html PUBLIC "-//WAPFORUM//DTD XHTML Mobile 1.2//EN" "http://www.openmobilealliance.org/tech/DTD/xhtml-mobile12.dtd">';break;case"xml":e="<?xml version='1.0' encoding='utf-8' ?>";break;case"xml iso-8859-1":e="<?xml version='1.0' encoding='iso-8859-1' ?>"}return JSON.stringify(e+"\n")}},{name:"markdown",regexp:/^(\s*):markdown\s*$/i,process:function(){return parse_interpol(exports.Markdown.encode(this.contents.join("\n")))}},{name:"script",regexp:/^(\s*):(?:java)?script\s*$/,process:function(){return parse_interpol('\n<script type="text/javascript">\n//<![CDATA[\n'+this.contents.join("\n")+"\n//]]>\n</script>\n")}},{name:"css",regexp:/^(\s*):css\s*$/,process:function(){return JSON.stringify('<style type="text/css">\n'+this.contents.join("\n")+"\n</style>")}}],Haml=function(e,t){"object"!=typeof t&&(forceXML=t,t={});var n;t.customEscape?(n="",escaperName=t.customEscape):(n=html_escape.toString()+"\n",escaperName="html_escape"),escapeHtmlByDefault=t.escapeHtmlByDefault||t.escapeHTML||t.escape_html;var i=optimize(compile(e)),r="with(locals || {}) {\n  try {\n   var _$output="+i+";\n return _$output;  } catch (e) {\n    return \"\\n<pre class='error'>\" + "+escaperName+'(e.stack) + "</pre>\\n";\n  }\n}';try{var a=new Function("locals",n+r);return a}catch(s){throw window.console&&window.console.error&&window.console.error(r),s}},Haml.compile=compile,Haml.optimize=optimize,Haml.render=render,Haml.execute=execute,Haml.html_escape=html_escape}(),"undefined"!=typeof module&&(module.exports=Haml),function(){var e,t=this,n=t.Backbone,i=[],r=i.push,a=i.slice,s=i.splice;e="undefined"!=typeof exports?exports:t.Backbone={},e.VERSION="0.9.9";var o=t._;o||"undefined"==typeof require||(o=require("underscore")),e.$=t.jQuery||t.Zepto||t.ender,e.noConflict=function(){return t.Backbone=n,this},e.emulateHTTP=!1,e.emulateJSON=!1;var l=/\s+/,c=function(e,t,n,i){if(!n)return!0;if("object"==typeof n)for(var r in n)e[t].apply(e,[r,n[r]].concat(i));else{if(!l.test(n))return!0;for(var a=n.split(l),s=0,o=a.length;o>s;s++)e[t].apply(e,[a[s]].concat(i))}},u=function(e,t,n){var i,r=-1,a=t.length;switch(n.length){case 0:for(;++r<a;)(i=t[r]).callback.call(i.ctx);return;case 1:for(;++r<a;)(i=t[r]).callback.call(i.ctx,n[0]);return;case 2:for(;++r<a;)(i=t[r]).callback.call(i.ctx,n[0],n[1]);return;case 3:for(;++r<a;)(i=t[r]).callback.call(i.ctx,n[0],n[1],n[2]);return;default:for(;++r<a;)(i=t[r]).callback.apply(i.ctx,n)}},d=e.Events={on:function(e,t,n){if(!c(this,"on",e,[t,n])||!t)return this;this._events||(this._events={});var i=this._events[e]||(this._events[e]=[]);return i.push({callback:t,context:n,ctx:n||this}),this},once:function(e,t,n){if(!c(this,"once",e,[t,n])||!t)return this;var i=this,r=o.once(function(){i.off(e,r),t.apply(this,arguments)});return r._callback=t,this.on(e,r,n),this},off:function(e,t,n){var i,r,a,s,l,u,d,h;if(!this._events||!c(this,"off",e,[t,n]))return this;if(!e&&!t&&!n)return this._events={},this;for(s=e?[e]:o.keys(this._events),l=0,u=s.length;u>l;l++)if(e=s[l],i=this._events[e]){if(a=[],t||n)for(d=0,h=i.length;h>d;d++)r=i[d],(t&&t!==(r.callback._callback||r.callback)||n&&n!==r.context)&&a.push(r);this._events[e]=a}return this},trigger:function(e){if(!this._events)return this;var t=a.call(arguments,1);if(!c(this,"trigger",e,t))return this;var n=this._events[e],i=this._events.all;return n&&u(this,n,t),i&&u(this,i,arguments),this},listenTo:function(e,t,n){var i=this._listeners||(this._listeners={}),r=e._listenerId||(e._listenerId=o.uniqueId("l"));return i[r]=e,e.on(t,n||this,this),this},stopListening:function(e,t,n){var i=this._listeners;if(i){if(e)e.off(t,n,this),t||n||delete i[e._listenerId];else{for(var r in i)i[r].off(null,null,this);this._listeners={}}return this}}};d.bind=d.on,d.unbind=d.off,o.extend(e,d);var h=e.Model=function(e,t){var n,i=e||{};this.cid=o.uniqueId("c"),this.changed={},this.attributes={},this._changes=[],t&&t.collection&&(this.collection=t.collection),t&&t.parse&&(i=this.parse(i)),(n=o.result(this,"defaults"))&&o.defaults(i,n),this.set(i,{silent:!0}),this._currentAttributes=o.clone(this.attributes),this._previousAttributes=o.clone(this.attributes),this.initialize.apply(this,arguments)};o.extend(h.prototype,d,{changed:null,idAttribute:"id",initialize:function(){},toJSON:function(){return o.clone(this.attributes)},sync:function(){return e.sync.apply(this,arguments)},get:function(e){return this.attributes[e]},escape:function(e){return o.escape(this.get(e))},has:function(e){return null!=this.get(e)},set:function(e,t,n){var i,r;if(null==e)return this;o.isObject(e)?(r=e,n=t):(r={})[e]=t;var a=n&&n.silent,s=n&&n.unset;if(!this._validate(r,n))return!1;this.idAttribute in r&&(this.id=r[this.idAttribute]);var l=this.attributes;for(i in r)t=r[i],s?delete l[i]:l[i]=t,this._changes.push(i,t);return this._hasComputed=!1,a||this.change(n),this},unset:function(e,t){return this.set(e,void 0,o.extend({},t,{unset:!0}))},clear:function(e){var t={};for(var n in this.attributes)t[n]=void 0;return this.set(t,o.extend({},e,{unset:!0}))},fetch:function(e){e=e?o.clone(e):{},void 0===e.parse&&(e.parse=!0);var t=this,n=e.success;return e.success=function(i){return t.set(t.parse(i),e)?void(n&&n(t,i,e)):!1},this.sync("read",this,e)},save:function(e,t,n){var i,r,a;if(null==e||o.isObject(e)?(i=e,n=t):null!=e&&((i={})[e]=t),n=n?o.clone(n):{},n.wait){if(i&&!this._validate(i,n))return!1;r=o.clone(this.attributes)}var s=o.extend({},n,{silent:!0});if(i&&!this.set(i,n.wait?s:n))return!1;if(!i&&!this._validate(null,n))return!1;var l=this,c=n.success;n.success=function(e){a=!0;var t=l.parse(e);return n.wait&&(t=o.extend(i||{},t)),l.set(t,n)?void(c&&c(l,e,n)):!1};var u=this.isNew()?"create":n.patch?"patch":"update";"patch"==u&&(n.attrs=i);var d=this.sync(u,this,n);return!a&&n.wait&&(this.clear(s),this.set(r,s)),d},destroy:function(e){e=e?o.clone(e):{};var t=this,n=e.success,i=function(){t.trigger("destroy",t,t.collection,e)};if(e.success=function(r){(e.wait||t.isNew())&&i(),n&&n(t,r,e)},this.isNew())return e.success(),!1;var r=this.sync("delete",this,e);return e.wait||i(),r},url:function(){var e=o.result(this,"urlRoot")||o.result(this.collection,"url")||E();return this.isNew()?e:e+("/"===e.charAt(e.length-1)?"":"/")+encodeURIComponent(this.id)},parse:function(e){return e},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return null==this.id},change:function(e){var t=this._changing;this._changing=!0;var n=this._computeChanges(!0);this._pending=!!n.length;for(var i=n.length-2;i>=0;i-=2)this.trigger("change:"+n[i],this,n[i+1],e);if(t)return this;for(;this._pending;)this._pending=!1,this.trigger("change",this,e),this._previousAttributes=o.clone(this.attributes);return this._changing=!1,this},hasChanged:function(e){return this._hasComputed||this._computeChanges(),null==e?!o.isEmpty(this.changed):o.has(this.changed,e)},changedAttributes:function(e){if(!e)return this.hasChanged()?o.clone(this.changed):!1;var t,n=!1,i=this._previousAttributes;for(var r in e)o.isEqual(i[r],t=e[r])||((n||(n={}))[r]=t);return n},_computeChanges:function(e){this.changed={};for(var t={},n=[],i=this._currentAttributes,r=this._changes,a=r.length-2;a>=0;a-=2){var s=r[a],o=r[a+1];if(!t[s]&&(t[s]=!0,i[s]!==o)){if(this.changed[s]=o,!e)continue;n.push(s,o),i[s]=o}}return e&&(this._changes=[]),this._hasComputed=!0,n},previous:function(e){return null!=e&&this._previousAttributes?this._previousAttributes[e]:null},previousAttributes:function(){return o.clone(this._previousAttributes)},_validate:function(e,t){if(!this.validate)return!0;e=o.extend({},this.attributes,e);var n=this.validate(e,t);return n?(t&&t.error&&t.error(this,n,t),this.trigger("error",this,n,t),!1):!0}});var p=e.Collection=function(e,t){t||(t={}),t.model&&(this.model=t.model),void 0!==t.comparator&&(this.comparator=t.comparator),this._reset(),this.initialize.apply(this,arguments),e&&this.reset(e,o.extend({silent:!0},t))};o.extend(p.prototype,d,{model:h,initialize:function(){},toJSON:function(e){return this.map(function(t){return t.toJSON(e)})},sync:function(){return e.sync.apply(this,arguments)},add:function(e,t){var n,i,a,l,c,u=t&&t.at,d=null==(t&&t.sort)?!0:t.sort;for(e=o.isArray(e)?e.slice():[e],n=e.length-1;n>=0;n--)(a=this._prepareModel(e[n],t))?(e[n]=a,l=null!=a.id&&this._byId[a.id],l||this._byCid[a.cid]?(t&&t.merge&&l&&(l.set(a.attributes,t),c=d),e.splice(n,1)):(a.on("all",this._onModelEvent,this),this._byCid[a.cid]=a,null!=a.id&&(this._byId[a.id]=a))):(this.trigger("error",this,e[n],t),e.splice(n,1));if(e.length&&(c=d),this.length+=e.length,i=[null!=u?u:this.models.length,0],r.apply(i,e),s.apply(this.models,i),c&&this.comparator&&null==u&&this.sort({silent:!0}),t&&t.silent)return this;for(;a=e.shift();)a.trigger("add",a,this,t);return this},remove:function(e,t){var n,i,r,a;for(t||(t={}),e=o.isArray(e)?e.slice():[e],n=0,i=e.length;i>n;n++)a=this.get(e[n]),a&&(delete this._byId[a.id],delete this._byCid[a.cid],r=this.indexOf(a),this.models.splice(r,1),this.length--,t.silent||(t.index=r,a.trigger("remove",a,this,t)),this._removeReference(a));return this},push:function(e,t){return e=this._prepareModel(e,t),this.add(e,o.extend({at:this.length},t)),e},pop:function(e){var t=this.at(this.length-1);return this.remove(t,e),t},unshift:function(e,t){return e=this._prepareModel(e,t),this.add(e,o.extend({at:0},t)),e},shift:function(e){var t=this.at(0);return this.remove(t,e),t},slice:function(e,t){return this.models.slice(e,t)},get:function(e){return null!=e?this._byId[null!=e.id?e.id:e]||this._byCid[e.cid||e]:void 0},at:function(e){return this.models[e]},where:function(e){return o.isEmpty(e)?[]:this.filter(function(t){for(var n in e)if(e[n]!==t.get(n))return!1;return!0})},sort:function(e){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");return o.isString(this.comparator)||1===this.comparator.length?this.models=this.sortBy(this.comparator,this):this.models.sort(o.bind(this.comparator,this)),e&&e.silent||this.trigger("sort",this,e),this},pluck:function(e){return o.invoke(this.models,"get",e)},update:function(e,t){var n,i,r,a,s=[],l=[],c={},u=this.model.prototype.idAttribute;if(t=o.extend({add:!0,merge:!0,remove:!0},t),t.parse&&(e=this.parse(e)),o.isArray(e)||(e=e?[e]:[]),t.add&&!t.remove)return this.add(e,t);for(i=0,r=e.length;r>i;i++)n=e[i],a=this.get(n.id||n.cid||n[u]),t.remove&&a&&(c[a.cid]=!0),(t.add&&!a||t.merge&&a)&&s.push(n);if(t.remove)for(i=0,r=this.models.length;r>i;i++)n=this.models[i],c[n.cid]||l.push(n);return l.length&&this.remove(l,t),s.length&&this.add(s,t),this},reset:function(e,t){t||(t={}),t.parse&&(e=this.parse(e));for(var n=0,i=this.models.length;i>n;n++)this._removeReference(this.models[n]);return t.previousModels=this.models,this._reset(),e&&this.add(e,o.extend({silent:!0},t)),t.silent||this.trigger("reset",this,t),this},fetch:function(e){e=e?o.clone(e):{},void 0===e.parse&&(e.parse=!0);var t=this,n=e.success;return e.success=function(i){var r=e.update?"update":"reset";t[r](i,e),n&&n(t,i,e)},this.sync("read",this,e)},create:function(e,t){var n=this;if(t=t?o.clone(t):{},e=this._prepareModel(e,t),!e)return!1;t.wait||n.add(e,t);var i=t.success;return t.success=function(e,t,r){r.wait&&n.add(e,r),i&&i(e,t,r)},e.save(null,t),e},parse:function(e){return e},clone:function(){return new this.constructor(this.models)},chain:function(){return o(this.models).chain()},_reset:function(){this.length=0,this.models=[],this._byId={},this._byCid={}},_prepareModel:function(e,t){if(e instanceof h)return e.collection||(e.collection=this),e;t||(t={}),t.collection=this;var n=new this.model(e,t);return n._validate(e,t)?n:!1},_removeReference:function(e){this===e.collection&&delete e.collection,e.off("all",this._onModelEvent,this)},_onModelEvent:function(e,t,n,i){("add"!==e&&"remove"!==e||n===this)&&("destroy"===e&&this.remove(t,i),t&&e==="change:"+t.idAttribute&&(delete this._byId[t.previous(t.idAttribute)],null!=t.id&&(this._byId[t.id]=t)),this.trigger.apply(this,arguments))}});var f=["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","sortedIndex","toArray","size","first","head","take","initial","rest","tail","last","without","indexOf","shuffle","lastIndexOf","isEmpty"];o.each(f,function(e){p.prototype[e]=function(){var t=a.call(arguments);return t.unshift(this.models),o[e].apply(o,t)}});var g=["groupBy","countBy","sortBy"];o.each(g,function(e){p.prototype[e]=function(t,n){var i=o.isFunction(t)?t:function(e){return e.get(t)};return o[e](this.models,i,n)}});var m=e.Router=function(e){e||(e={}),e.routes&&(this.routes=e.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},v=/\((.*?)\)/g,_=/:\w+/g,y=/\*\w+/g,b=/[\-{}\[\]+?.,\\\^$|#\s]/g;o.extend(m.prototype,d,{initialize:function(){},route:function(t,n,i){return o.isRegExp(t)||(t=this._routeToRegExp(t)),i||(i=this[n]),e.history.route(t,o.bind(function(r){var a=this._extractParameters(t,r);i&&i.apply(this,a),this.trigger.apply(this,["route:"+n].concat(a)),e.history.trigger("route",this,n,a)},this)),this},navigate:function(t,n){return e.history.navigate(t,n),this},_bindRoutes:function(){if(this.routes)for(var e,t=o.keys(this.routes);null!=(e=t.pop());)this.route(e,this.routes[e])},_routeToRegExp:function(e){return e=e.replace(b,"\\$&").replace(v,"(?:$1)?").replace(_,"([^/]+)").replace(y,"(.*?)"),new RegExp("^"+e+"$")},_extractParameters:function(e,t){return e.exec(t).slice(1)}});var w=e.History=function(){this.handlers=[],o.bindAll(this,"checkUrl"),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},k=/^[#\/]|\s+$/g,x=/^\/+|\/+$/g,S=/msie [\w.]+/,C=/\/$/;w.started=!1,o.extend(w.prototype,d,{interval:50,getHash:function(e){var t=(e||this).location.href.match(/#(.*)$/);return t?t[1]:""},getFragment:function(e,t){if(null==e)if(this._hasPushState||!this._wantsHashChange||t){e=this.location.pathname;var n=this.root.replace(C,"");e.indexOf(n)||(e=e.substr(n.length))}else e=this.getHash();return e.replace(k,"")},start:function(t){if(w.started)throw new Error("Backbone.history has already been started");w.started=!0,this.options=o.extend({},{root:"/"},this.options,t),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);var n=this.getFragment(),i=document.documentMode,r=S.exec(navigator.userAgent.toLowerCase())&&(!i||7>=i);this.root=("/"+this.root+"/").replace(x,"/"),r&&this._wantsHashChange&&(this.iframe=e.$('<iframe src="javascript:0" tabindex="-1" />').hide().appendTo("body")[0].contentWindow,this.navigate(n)),this._hasPushState?e.$(window).bind("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!r?e.$(window).bind("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=n;var a=this.location,s=a.pathname.replace(/[^\/]$/,"$&/")===this.root;return this._wantsHashChange&&this._wantsPushState&&!this._hasPushState&&!s?(this.fragment=this.getFragment(null,!0),this.location.replace(this.root+this.location.search+"#"+this.fragment),!0):(this._wantsPushState&&this._hasPushState&&s&&a.hash&&(this.fragment=this.getHash().replace(k,""),this.history.replaceState({},document.title,this.root+this.fragment+a.search)),this.options.silent?void 0:this.loadUrl())},stop:function(){e.$(window).unbind("popstate",this.checkUrl).unbind("hashchange",this.checkUrl),clearInterval(this._checkUrlInterval),w.started=!1},route:function(e,t){this.handlers.unshift({route:e,callback:t})},checkUrl:function(){var e=this.getFragment();return e===this.fragment&&this.iframe&&(e=this.getFragment(this.getHash(this.iframe))),e===this.fragment?!1:(this.iframe&&this.navigate(e),void(this.loadUrl()||this.loadUrl(this.getHash())))},loadUrl:function(e){var t=this.fragment=this.getFragment(e),n=o.any(this.handlers,function(e){return e.route.test(t)?(e.callback(t),!0):void 0});return n},navigate:function(e,t){if(!w.started)return!1;if(t&&t!==!0||(t={trigger:t}),e=this.getFragment(e||""),this.fragment!==e){this.fragment=e;var n=this.root+e;if(this._hasPushState)this.history[t.replace?"replaceState":"pushState"]({},document.title,n);else{if(!this._wantsHashChange)return this.location.assign(n);this._updateHash(this.location,e,t.replace),this.iframe&&e!==this.getFragment(this.getHash(this.iframe))&&(t.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,e,t.replace))}t.trigger&&this.loadUrl(e)}},_updateHash:function(e,t,n){if(n){var i=e.href.replace(/(javascript:|#).*$/,"");e.replace(i+"#"+t)}else e.hash="#"+t}}),e.history=new w;var $=e.View=function(e){this.cid=o.uniqueId("view"),this._configure(e||{}),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()},T=/^(\S+)\s*(.*)$/,P=["model","collection","el","id","attributes","className","tagName","events"];o.extend($.prototype,d,{tagName:"div",$:function(e){return this.$el.find(e)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this.stopListening(),this},make:function(t,n,i){var r=document.createElement(t);return n&&e.$(r).attr(n),null!=i&&e.$(r).html(i),r},setElement:function(t,n){return this.$el&&this.undelegateEvents(),this.$el=t instanceof e.$?t:e.$(t),this.el=this.$el[0],n!==!1&&this.delegateEvents(),this},delegateEvents:function(e){if(e||(e=o.result(this,"events"))){this.undelegateEvents();for(var t in e){var n=e[t];if(o.isFunction(n)||(n=this[e[t]]),!n)throw new Error('Method "'+e[t]+'" does not exist');var i=t.match(T),r=i[1],a=i[2];n=o.bind(n,this),r+=".delegateEvents"+this.cid,""===a?this.$el.bind(r,n):this.$el.delegate(a,r,n)}}},undelegateEvents:function(){this.$el.unbind(".delegateEvents"+this.cid)},_configure:function(e){this.options&&(e=o.extend({},o.result(this,"options"),e)),o.extend(this,o.pick(e,P)),this.options=e},_ensureElement:function(){if(this.el)this.setElement(o.result(this,"el"),!1);else{var e=o.extend({},o.result(this,"attributes"));this.id&&(e.id=o.result(this,"id")),this.className&&(e["class"]=o.result(this,"className")),this.setElement(this.make(o.result(this,"tagName"),e),!1)}}});var D={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};e.sync=function(t,n,i){var r=D[t];o.defaults(i||(i={}),{emulateHTTP:e.emulateHTTP,emulateJSON:e.emulateJSON});var a={type:r,dataType:"json"};if(i.url||(a.url=o.result(n,"url")||E()),null!=i.data||!n||"create"!==t&&"update"!==t&&"patch"!==t||(a.contentType="application/json",a.data=JSON.stringify(i.attrs||n.toJSON(i))),i.emulateJSON&&(a.contentType="application/x-www-form-urlencoded",a.data=a.data?{model:a.data}:{}),i.emulateHTTP&&("PUT"===r||"DELETE"===r||"PATCH"===r)){a.type="POST",i.emulateJSON&&(a.data._method=r);var s=i.beforeSend;i.beforeSend=function(e){return e.setRequestHeader("X-HTTP-Method-Override",r),s?s.apply(this,arguments):void 0}}"GET"===a.type||i.emulateJSON||(a.processData=!1);var l=i.success;i.success=function(e,t,r){l&&l(e,t,r),n.trigger("sync",n,e,i)};var c=i.error;i.error=function(e){c&&c(n,e,i),n.trigger("error",n,e,i)};var u=e.ajax(o.extend(a,i));return n.trigger("request",n,u,i),u},e.ajax=function(){return e.$.ajax.apply(e.$,arguments)};var M=function(e,t){var n,i=this;n=e&&o.has(e,"constructor")?e.constructor:function(){i.apply(this,arguments)},o.extend(n,i,t);var r=function(){this.constructor=n};return r.prototype=i.prototype,n.prototype=new r,e&&o.extend(n.prototype,e),n.__super__=i.prototype,n};h.extend=p.extend=m.extend=$.extend=w.extend=M;var E=function(){throw new Error('A "url" property or function must be specified')}}.call(this);var __slice=[].slice,__hasProp={}.hasOwnProperty,__indexOf=[].indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(t in this&&this[t]===e)return t;return-1};(function(e){return e("backbone-query",function(e,t){var n,i,r,a,s,o,l,c,u,d,h,p,f,g,m,v,_,y,b;return b=e("underscore"),n=e("backbone"),r=function(e,t){var n,i,r,a;for(a=[],i=0,r=e.length;r>i;i++)n=e[i],t(n)&&a.push(n);return a},g=function(e,t){var n,i,r,a;for(a=[],i=0,r=e.length;r>i;i++)n=e[i],t(n)||a.push(n);return a},i=function(e,t){var n,i,r;for(i=0,r=e.length;r>i;i++)if(n=e[i],t(n))return!0;return!1},c=function(){var e,t,n,i,r;for(e=1<=arguments.length?__slice.call(arguments,0):[],i={},t=i;e.length;)n=e.shift(),r=1===e.length?e.shift():{},t=t[n]=r;return i},o=function(e){return b.isRegExp(e)?"$regex":b.isDate(e)?"$date":b.isObject(e)&&!b.isArray(e)?"object":b.isArray(e)?"array":b.isString(e)?"string":b.isNumber(e)?"number":b.isBoolean(e)?"boolean":b.isFunction(e)?"function":!1},h=function(e){var t,n,i,r,a,s,l,u,p,f,g,m,v;for(s=b.isArray(e)?e:function(){var n;n=[];for(t in e)__hasProp.call(e,t)&&(p=e[t],n.push(c(t,p)));return n}(),v=[],g=0,m=s.length;m>g;g++){a=s[g];for(t in a)if(__hasProp.call(a,t)){switch(l=a[t],n={key:t},i=o(l),i){case"$regex":case"$date":n.type=i,n.value=l;break;case"object":if("$and"===t||"$or"===t||"$nor"===t||"$not"===t)n.value=h(l),n.type=t,n.key=null;else for(u in l)if(f=l[u],y(u,f))switch(n.type=u,u){case"$elemMatch":case"$relationMatch":n.value=d(f);break;case"$computed":r=c(t,f),n.value=h(r);break;default:n.value=f}break;default:n.type="$equal",n.value=l}"$equal"===n.type&&("object"===i||"array"===i)&&(n.type="$oEqual")}v.push(n)}return v},y=function(e,t){switch(e){case"$in":case"$nin":case"$all":case"$any":return b(t).isArray();case"$size":return b(t).isNumber();case"$regex":return b(t).isRegExp();case"$like":case"$likeI":return b(t).isString();case"$between":return b(t).isArray()&&2===t.length;case"$cb":return b(t).isFunction();default:return!0}},_=function(e,t){switch(e){case"$like":case"$likeI":case"$regex":return b(t).isString();case"$contains":case"$all":case"$any":case"$elemMatch":return b(t).isArray();case"$size":return b(t).isArray()||b(t).isString();case"$in":case"$nin":return null!=t;case"$relationMatch":return null!=t&&t.models;default:return!0}},p=function(e,t,n,r){switch(e){case"$equal":return b(n).isArray()?__indexOf.call(n,t)>=0:n===t;case"$oEqual":return b(n).isEqual(t);case"$contains":return __indexOf.call(n,t)>=0;case"$ne":return n!==t;case"$lt":return t>n;case"$gt":return n>t;case"$lte":return t>=n;case"$gte":return n>=t;case"$between":return t[0]<n&&n<t[1];case"$in":return __indexOf.call(t,n)>=0;case"$nin":return __indexOf.call(t,n)<0;case"$all":return b(t).all(function(e){return __indexOf.call(n,e)>=0});case"$any":return b(n).any(function(e){return __indexOf.call(t,e)>=0});case"$size":return n.length===t;case"$exists":case"$has":return null!=n===t;case"$like":return-1!==n.indexOf(t);case"$likeI":return-1!==n.toLowerCase().indexOf(t.toLowerCase());case"$regex":return t.test(n);case"$cb":return t.call(r,n);case"$elemMatch":return m(n,t,"elemMatch").length>0;case"$relationMatch":return m(n.models,t,"relationMatch").length>0;case"$computed":return l([r],t,!1,i,"computed");case"$and":case"$or":case"$nor":case"$not":return 1===f[e]([r],t).length;default:return!1}},l=function(e,t,n,i,r){return null==r&&(r=!1),i(e,function(e){var i,a,s,o,l;for(o=0,l=t.length;l>o;o++)if(a=t[o],i=function(){switch(r){case"elemMatch":return e[a.key];case"computed":return e[a.key]();default:return e.get(a.key)}}(),s=_(a.type,i),s&&(s=p(a.type,a.value,i,e,a.key)),n===s)return n;return!n})},f={$and:function(e,t,n){return l(e,t,!1,r,n)},$or:function(e,t,n){return l(e,t,!0,r,n)},$nor:function(e,t,n){return l(e,t,!0,g,n)},$not:function(e,t,n){return l(e,t,!1,g,n)}},d=function(e){var t,n,i,r,a,s;if(r=b(e).keys(),t=["$and","$not","$or","$nor"],n=b.intersection(t,r),0===n.length)return[{type:"$and",parsedQuery:h(e)}];if(n.length!==r.length){__indexOf.call(n,"$and")<0&&(e.$and={},n.unshift("$and"));for(i in e)__hasProp.call(e,i)&&(s=e[i],__indexOf.call(t,i)<0&&(e.$and[i]=s,delete e[i]))}return function(){var t,i,r;for(r=[],t=0,i=n.length;i>t;t++)a=n[t],r.push({type:a,parsedQuery:h(e[a])});return r}()},m=function(e,t,n){var i;return n||(t=d(t)),i=function(e,t){return f[t.type](e,t.parsedQuery,n)},b.reduce(t,i,e)},a=function(e,t,n){var i,r,a,o;return a=JSON.stringify(t),i=null!=(o=e._queryCache)?o:e._queryCache={},r=i[a],r||(r=s(e,t,n),i[a]=r),r},s=function(e,t,n){var i;return i=m(e.models,t),n.sortBy&&(i=v(i,n)),i},v=function(e,t){return b(t.sortBy).isString()?e=b(e).sortBy(function(e){return e.get(t.sortBy)}):b(t.sortBy).isFunction()&&(e=b(e).sortBy(t.sortBy)),"desc"===t.order&&(e=e.reverse()),e},u=function(e,t){var n,i,r,a;return r=t.offset?t.offset:t.page?(t.page-1)*t.limit:0,n=r+t.limit,i=e.slice(r,n),t.pager&&b.isFunction(t.pager)&&(a=Math.ceil(e.length/t.limit),t.pager(a,i)),i},n.QueryCollection=n.Collection.extend({query:function(e,t){var n;return null==t&&(t={}),n=t.cache?a(this,e,t):s(this,e,t),t.limit&&(n=u(n,t)),n},findOne:function(e){return this.query(e)[0]},whereBy:function(e,t){return null==t&&(t={}),new this.constructor(this.query(e,t))},resetQueryCache:function(){
return this._queryCache={}}}),t.QueryCollection=n.QueryCollection})}).call(this,"function"==typeof define&&define.amd?define:function(e,t){"undefined"!=typeof exports?t(function(e){return require(e)},exports):t(function(e){return this["underscore"===e?"_":"Backbone"]},{})}),window.Backbone=window.Backbone||{},window.Backbone.ViewHelper=function(){"use strict";function e(e){this.$el=e,this.errorMessages=[]}return e.prototype.setElement=function(e){this.$el=e},e.prototype.clearErrors=function(){this.errorMessages=[],this.$el.find("*").removeClass("error")},e.prototype.handleErrors=function(e,t){this.clearErrors(),t=t||"#primary_content";var n=$.parseJSON(e.responseText);n.errors?(_.isArray(n.errors)?this.displayErrors("Base",n.errors):_.each(_.keys(n.errors),function(e){this.displayErrors(e,n.errors[e])},this),RPM.add_flash_message("error","validation_error",JST["shared/_validation_errors.haml"]({errors:this.errorMessages}),!0,!1,t)):RPM.add_flash_message("error","ajax_error",RPM.GENERIC_AJAX_ERROR,!0)},e.prototype.displayErrors=function(e,t){_.isArray(t)?_.each(t,function(t){var n=t[0];"base"===n&&(n=e),this.highlightError(n),this.errorMessages.push(this.humanFieldName(n)+" "+t[1])},this):_.each(t,function(t,n){"base"===n&&(n=e),this.highlightError(n),_.each(t,function(e){this.errorMessages.push(this.humanFieldName(n)+" "+e)},this)},this)},e.prototype.humanFieldName=function(e){var t=this.fieldElement(e).data("validation_label");return t||(t=e.replace(/_/g," "),t=t.charAt(0).toUpperCase()+t.substring(1)),t},e.prototype.fieldElement=function(e){return this.$el.find('*[name="'+e+'"], .'+e)},e.prototype.highlightError=function(e){this.fieldElement(e).addClass("error")},e.prototype.gatherForm=function(e,t){t=t||this.$el.find("form").first(),_.each(_.keys(e.attributes),function(n){var i=t.find('*[name="'+n+'"]').first();i.length>0&&e.set(n,i.val())})},e.prototype.selectOption=function(e,t,n){var i=[],r=null,a=0,s={};if(n=n||{},n.approximate=n.approximate||!1,n.roundDir=n.roundDir||"down",t=null===t?"":t,s=e.find('option[value="'+t+'"]'),n.approximate&&0===s.length){for(e.find("option").each(function(){i.push($(this).attr("value"))}),i.sort(function(e,t){return e-t}),a=0;a<=i.length;a+=1)if(t>i[a]&&t<i[a+1]){r="up"===n.roundDir?i[a+1]:i[a];break}s=e.find('option[value="'+r+'"]')}s.length>0&&(e.find("option").removeAttr("selected"),s.attr("selected",!0))},e.prototype.relatedAppLinks=function(e,t){var n=e.get("applications"),i=_.map(n,function(t){return"<a href='/accounts/"+e.get("account_id")+"/applications/"+t.id+"'>"+Haml.html_escape(t.name)+"</a>"}),r=i.slice(0,t).join(", "),a="";return t&&i.length>t&&(i.length-t===1&&n[t].name.length<=8?r+=", "+i[t]:(a="<span style='display:none'>",a+=i.slice(t).join(", "),a+="</span><a href='javascript:void(0)' onclick=\"jQuery(this).parent().find('span:hidden').show();jQuery(this).hide();\">",a+=n.length-t+" more&hellip;</a>")),0===a.length?r:r+", "+a},e}(),function(){"use strict";Backbone.Singleton={getInstance:function(e){return this.prototype._instance=this.prototype._instance||new this(e),this.prototype._instance},setInstance:function(e){this._instance=e}};var e=Backbone.sync;Backbone.sync=function(t,n,i){var r=n.toJSON;_.contains(["create","update"],t)&&(n.toJSON=function(){if(n.paramRoot){var e={};return e[n.paramRoot]=_.clone(n.attributes),e}return _.clone(n.attributes)}),e(t,n,i),n.toJSON=r}}(),function(e){e.widget("ui.tagit",{options:{allowDuplicates:!1,caseSensitive:!0,fieldName:"tags",placeholderText:null,readOnly:!1,removeConfirmation:!1,tagLimit:null,availableTags:[],autocomplete:{},showAutocompleteOnFocus:!1,allowSpaces:!1,singleField:!1,singleFieldDelimiter:",",singleFieldNode:null,animate:!0,tabIndex:null,beforeTagAdded:null,afterTagAdded:null,beforeTagRemoved:null,afterTagRemoved:null,onTagClicked:null,onTagLimitExceeded:null,onTagAdded:null,onTagRemoved:null,tagSource:null},_create:function(){var t=this;this.element.is("input")?(this.tagList=e("<ul></ul>").insertAfter(this.element),this.options.singleField=!0,this.options.singleFieldNode=this.element,this.element.css("display","none")):this.tagList=this.element.find("ul, ol").andSelf().last(),this.tagInput=e('<input type="text" />').addClass("ui-widget-content"),this.options.readOnly&&this.tagInput.attr("disabled","disabled"),this.options.tabIndex&&this.tagInput.attr("tabindex",this.options.tabIndex),this.options.placeholderText&&this.tagInput.attr("placeholder",this.options.placeholderText),this.options.autocomplete.source||(this.options.autocomplete.source=function(t,n){var i=t.term.toLowerCase(),r=e.grep(this.options.availableTags,function(e){return 0===e.toLowerCase().indexOf(i)});n(this._subtractArray(r,this.assignedTags()))}),this.options.showAutocompleteOnFocus&&(this.tagInput.focus(function(){t._showAutocomplete()}),"undefined"==typeof this.options.autocomplete.minLength&&(this.options.autocomplete.minLength=0)),e.isFunction(this.options.autocomplete.source)&&(this.options.autocomplete.source=e.proxy(this.options.autocomplete.source,this)),e.isFunction(this.options.tagSource)&&(this.options.tagSource=e.proxy(this.options.tagSource,this)),this.tagList.addClass("tagit").addClass("ui-widget ui-widget-content ui-corner-all").append(e('<li class="tagit-new"></li>').append(this.tagInput)).click(function(n){var i=e(n.target);i.hasClass("tagit-label")?(i=i.closest(".tagit-choice"),i.hasClass("removed")||t._trigger("onTagClicked",n,{tag:i,tagLabel:t.tagLabel(i)})):t.tagInput.focus()});var n=!1;if(this.options.singleField)if(this.options.singleFieldNode){var i=e(this.options.singleFieldNode),r=i.val().split(this.options.singleFieldDelimiter);i.val(""),e.each(r,function(e,i){t.createTag(i,null,!0),n=!0})}else this.options.singleFieldNode=e('<input type="hidden" style="display:none;" value="" name="'+this.options.fieldName+'" />'),this.tagList.after(this.options.singleFieldNode);n||this.tagList.children("li").each(function(){e(this).hasClass("tagit-new")||(t.createTag(e(this).text(),e(this).attr("class"),!0),e(this).remove())}),this.tagInput.keydown(function(n){if(n.which==e.ui.keyCode.BACKSPACE&&""===t.tagInput.val()){var i=t._lastTag();!t.options.removeConfirmation||i.hasClass("remove")?t.removeTag(i):t.options.removeConfirmation&&i.addClass("remove ui-state-highlight")}else t.options.removeConfirmation&&t._lastTag().removeClass("remove ui-state-highlight");(n.which===e.ui.keyCode.COMMA||n.which===e.ui.keyCode.ENTER||n.which==e.ui.keyCode.TAB&&""!==t.tagInput.val()||n.which==e.ui.keyCode.SPACE&&!0!==t.options.allowSpaces&&('"'!=e.trim(t.tagInput.val()).replace(/^s*/,"").charAt(0)||'"'==e.trim(t.tagInput.val()).charAt(0)&&'"'==e.trim(t.tagInput.val()).charAt(e.trim(t.tagInput.val()).length-1)&&0!==e.trim(t.tagInput.val()).length-1))&&(n.which===e.ui.keyCode.ENTER&&""===t.tagInput.val()||n.preventDefault(),t.createTag(t._cleanedInput()),t.tagInput.autocomplete("close"))}).blur(function(){t.tagInput.data("autocomplete-open")||t.createTag(t._cleanedInput())}),(this.options.availableTags||this.options.tagSource||this.options.autocomplete.source)&&(i={select:function(e,n){return t.createTag(n.item.value),!1}},e.extend(i,this.options.autocomplete),i.source=this.options.tagSource||i.source,this.tagInput.autocomplete(i).bind("autocompleteopen",function(){t.tagInput.data("autocomplete-open",!0)}).bind("autocompleteclose",function(){t.tagInput.data("autocomplete-open",!1)}))},_cleanedInput:function(){return e.trim(this.tagInput.val().replace(/^"(.*)"$/,"$1"))},_lastTag:function(){return this.tagList.find(".tagit-choice:last:not(.removed)")},_tags:function(){return this.tagList.find(".tagit-choice:not(.removed)")},assignedTags:function(){var t=this,n=[];return this.options.singleField?(n=e(this.options.singleFieldNode).val().split(this.options.singleFieldDelimiter),""===n[0]&&(n=[])):this._tags().each(function(){n.push(t.tagLabel(this))}),n},_updateSingleTagsField:function(t){e(this.options.singleFieldNode).val(t.join(this.options.singleFieldDelimiter)).trigger("change")},_subtractArray:function(t,n){for(var i=[],r=0;r<t.length;r++)-1==e.inArray(t[r],n)&&i.push(t[r]);return i},tagLabel:function(t){return this.options.singleField?e(t).find(".tagit-label:first").text():e(t).find("input:first").val()},_showAutocomplete:function(){this.tagInput.autocomplete("search","")},_findTagByLabel:function(t){var n=this,i=null;return this._tags().each(function(){return n._formatStr(t)==n._formatStr(n.tagLabel(this))?(i=e(this),!1):void 0}),i},_isNew:function(e){return!this._findTagByLabel(e)},_formatStr:function(t){return this.options.caseSensitive?t:e.trim(t.toLowerCase())},_effectExists:function(t){return Boolean(e.effects&&(e.effects[t]||e.effects.effect&&e.effects.effect[t]))},createTag:function(t,n,i){var r=this;if(t=e.trim(t),""===t)return!1;if(!this.options.allowDuplicates&&!this._isNew(t))return t=this._findTagByLabel(t),!1!==this._trigger("onTagExists",null,{existingTag:t,duringInitialization:i})&&this._effectExists("highlight")&&t.effect("highlight"),!1;if(this.options.tagLimit&&this._tags().length>=this.options.tagLimit)return this._trigger("onTagLimitExceeded",null,{duringInitialization:i}),!1;var a=e(this.options.onTagClicked?'<a class="tagit-label"></a>':'<span class="tagit-label"></span>').text(t),s=e("<li></li>").addClass("tagit-choice ui-widget-content ui-state-default ui-corner-all").addClass(n).append(a);this.options.readOnly?s.addClass("tagit-choice-read-only"):(s.addClass("tagit-choice-editable"),n=e("<span></span>").addClass("ui-icon ui-icon-close"),n=e('<a><span class="text-icon">\xd7</span></a>').addClass("tagit-close").append(n).click(function(){r.removeTag(s)}),s.append(n)),this.options.singleField||(a=a.html(),s.append('<input type="hidden" style="display:none;" value="'+a+'" name="'+this.options.fieldName+'" />')),!1!==this._trigger("beforeTagAdded",null,{tag:s,tagLabel:this.tagLabel(s),duringInitialization:i})&&(this.options.singleField&&(a=this.assignedTags(),a.push(t),this._updateSingleTagsField(a)),this._trigger("onTagAdded",null,s),this.tagInput.val(""),this.tagInput.parent().before(s),this._trigger("afterTagAdded",null,{tag:s,tagLabel:this.tagLabel(s),duringInitialization:i}),this.options.showAutocompleteOnFocus&&!i&&setTimeout(function(){r._showAutocomplete()},0))},removeTag:function(t,n){if(n="undefined"==typeof n?this.options.animate:n,t=e(t),this._trigger("onTagRemoved",null,t),!1!==this._trigger("beforeTagRemoved",null,{tag:t,tagLabel:this.tagLabel(t)})){if(this.options.singleField){var i=this.assignedTags(),r=this.tagLabel(t),i=e.grep(i,function(e){return e!=r});this._updateSingleTagsField(i)}n?(t.addClass("removed"),i=this._effectExists("blind")?["blind",{direction:"horizontal"},"fast"]:["fast"],i.push(function(){t.remove()}),t.fadeOut("fast").hide.apply(t,i).dequeue()):t.remove(),this._trigger("afterTagRemoved",null,{tag:t,tagLabel:this.tagLabel(t)})}},removeTagByLabel:function(e,t){var n=this._findTagByLabel(e);if(!n)throw"No such tag exists with the name '"+e+"'";this.removeTag(n,t)},removeAll:function(){var e=this;this._tags().each(function(t,n){e.removeTag(n,!1)})}})}(jQuery),function(){"use strict";RPM=window.RPM||{},RPM.Views=RPM.Views||{},RPM.Views.BulkTagView=Backbone.View.extend({template:"tags/jst/_form.haml",tagName:"div",events:{"click a.tags.trigger":"focusInput"},initialize:function(e){this.$el=$(e.el),this.className=e.className,this.url=e.url,this.tagHidden=e.tagHidden||function(){return!1}},render:function(){var e=this.collection.pluck("tags");return e=_.intersection.apply(this,e),this.$el.html(JST[this.template]({tagged:"tagged",tags:e})),this.setupTagInput(),this.setupTaggingDropdown(),this},setupTagInput:function(){var e=this,t=this.$el.find("ul.tag-input");t.tagit({placeholderText:"Tag all visible "+this.className+"...",removeConfirmation:!0,availableTags:RPM.tags,autocomplete:{delay:1},afterTagAdded:function(t,n){n.duringInitialization||n.tag.hasClass("no-post")||e.createTag(n.tagLabel)},afterTagRemoved:function(t,n){e.deleteTag(n.tagLabel)}})},createTag:function(e){var t=this.collection.models;this.tagHidden()||(t=_.reject(t,function(e){return e.get("is_hidden")}));var n=_.map(t,function(e){return e.id});$.post(this.url,{tag:e,ids:n}),-1===$.inArray(e,RPM.tags)&&RPM.tags.push(e)},deleteTag:function(e){var t=this.collection.map(function(e){return e.id});$.ajax(this.url,{data:{tag:e,ids:t},type:"DELETE"})},setupTaggingDropdown:function(){this.$el.simpleDropdown({triggerSelector:".tags.trigger",contentSelector:"div.tags-dropdown-wrapper"})},focusInput:function(){this.$el.find('input[type="text"]').focus()}})}(),function(){"use strict";RPM=window.RPM||{},RPM.Views=RPM.Views||{},RPM.Views.TagView=Backbone.View.extend({template:"tags/jst/_form.haml",tagName:"div",events:{"click a.tags.trigger":"focusInput"},initialize:function(e){this.$el=$(e.el),this.lazy=e.lazy},render:function(){var e={tags:this.collection,tagged:this.isTagged()};return this.$el.html(JST[this.template](e)),this.lazy||this.setupTagInput(),this},isTagged:function(){return this.collection.length>0?"tagged":""},setupTagInput:function(){var e=this,t=this.$el.find("ul.tag-input"),n=this.model.get("tags");t.tagit({placeholderText:"Enter tags...",removeConfirmation:!0,availableTags:RPM.tags,autocomplete:{delay:1},afterTagAdded:function(t,i){i.duringInitialization||i.tag.hasClass("no-post")||(e.createTag(i.tagLabel),n.push(i.tagLabel),e.model.set("tags",n))},afterTagRemoved:function(t,i){e.removeTag(i.tagLabel),n=_.without(n,i.tagLabel),e.model.set("tags",n)},onTagClicked:function(e,t){$("#text_filter").val(t.tagLabel).trigger("click")}})},createTag:function(e){this.lazy&&void 0===this.$el.find("ul.tag-input").data("tagit")&&this.setupTagInput();var t=this,n=this.model.url({tagging:!0})+"/tags.json";$.post(n,{tag:e}).done(function(){t.$el.find(".tags-dropdown-wrapper").siblings("a.icon.tags").addClass("tagged")}),-1===$.inArray(e,RPM.tags)&&RPM.tags.push(e)},removeTag:function(e){var t=this,n=this.model.url({tagging:!0})+"/tags.json";$.ajax(n,{data:{tag:e},type:"DELETE"}).done(function(){0==t.$el.find("ul.tag-input").children("li.tagit-choice").length&&t.$el.find("a.icon.tags").removeClass("tagged")})},focusInput:function(){this.$el.find('input[type="text"]').focus()}})}(),BestInPlaceEditor.prototype={activate:function(){var e="";e=this.isNil()?"":this.original_content?this.original_content:this.sanitize?this.element.text():this.element.html().replace("&amp;","&"),this.oldValue=this.isNil()?"":this.element.html(),this.display_value=e,jQuery(this.activator).unbind("click",this.clickHandler),this.activateForm(),this.element.trigger(jQuery.Event("best_in_place:activate"))},abort:function(){this.activateText(this.oldValue),jQuery(this.activator).bind("click",{editor:this},this.clickHandler),this.element.trigger(jQuery.Event("best_in_place:abort")),this.element.trigger(jQuery.Event("best_in_place:deactivate"))},abortIfConfirm:function(){return this.useConfirm?void(confirm("Are you sure you want to discard your changes?")&&this.abort()):void this.abort()},update:function(){var e=this;if(this.formType in{input:1,textarea:1}&&this.getValue()==this.oldValue)return this.abort(),!0;if(e.ajax({type:"post",dataType:"text",data:e.requestData(),success:function(t){e.loadSuccessCallback(t)},error:function(t,n){e.loadErrorCallback(t,n)}}),"select"==this.formType){var t=this.getValue();this.previousCollectionValue=t,jQuery.each(this.values,function(n,i){t==i[0]&&e.element.html(i[1])})}else"checkbox"==this.formType?e.element.html(this.getValue()?this.values[1]:this.values[0]):""!==this.getValue()?e.element.text(this.getValue()):e.element.html(this.nil);e.element.trigger(jQuery.Event("best_in_place:update"))},activateForm:function(){alert("The form was not properly initialized. activateForm is unbound")},activateText:function(e){this.element.html(e),this.isNil()&&this.element.html(this.nil)},initOptions:function(){var e=this;e.element.parents().each(function(){$parent=jQuery(this),e.url=e.url||$parent.attr("data-url"),e.collection=e.collection||$parent.attr("data-collection"),e.formType=e.formType||$parent.attr("data-type"),e.objectName=e.objectName||$parent.attr("data-object"),e.attributeName=e.attributeName||$parent.attr("data-attribute"),e.activator=e.activator||$parent.attr("data-activator"),e.okButton=e.okButton||$parent.attr("data-ok-button"),e.okButtonClass=e.okButtonClass||$parent.attr("data-ok-button-class"),e.cancelButton=e.cancelButton||$parent.attr("data-cancel-button"),e.cancelButtonClass=e.cancelButtonClass||$parent.attr("data-cancel-button-class"),e.nil=e.nil||$parent.attr("data-nil"),e.inner_class=e.inner_class||$parent.attr("data-inner-class"),e.html_attrs=e.html_attrs||$parent.attr("data-html-attrs"),e.original_content=e.original_content||$parent.attr("data-original-content"),e.collectionValue=e.collectionValue||$parent.attr("data-value")}),e.element.parents().each(function(){var t=this.id.match(/^(\w+)_(\d+)$/i);t&&(e.objectName=e.objectName||t[1])}),e.url=e.element.attr("data-url")||e.url||document.location.pathname,e.collection=e.element.attr("data-collection")||e.collection,e.formType=e.element.attr("data-type")||e.formtype||"input",e.objectName=e.element.attr("data-object")||e.objectName,e.attributeName=e.element.attr("data-attribute")||e.attributeName,e.activator=e.element.attr("data-activator")||e.element,e.okButton=e.element.attr("data-ok-button")||e.okButton,e.okButtonClass=e.element.attr("data-ok-button-class")||e.okButtonClass||"",e.cancelButton=e.element.attr("data-cancel-button")||e.cancelButton,e.cancelButtonClass=e.element.attr("data-cancel-button-class")||e.cancelButtonClass||"",e.nil=e.element.attr("data-nil")||e.nil||"\u2014",e.inner_class=e.element.attr("data-inner-class")||e.inner_class||null,e.html_attrs=e.element.attr("data-html-attrs")||e.html_attrs,e.original_content=e.element.attr("data-original-content")||e.original_content,e.collectionValue=e.element.attr("data-value")||e.collectionValue,e.element.attr("data-sanitize")?e.sanitize="true"==e.element.attr("data-sanitize"):e.sanitize=!0,e.element.attr("data-use-confirm")?e.useConfirm="false"!=e.element.attr("data-use-confirm"):e.useConfirm=!0,"select"!=e.formType&&"checkbox"!=e.formType||null===e.collection||(e.values=jQuery.parseJSON(e.collection))},bindForm:function(){this.activateForm=BestInPlaceEditor.forms[this.formType].activateForm,this.getValue=BestInPlaceEditor.forms[this.formType].getValue},initNil:function(){""===this.element.html()&&this.element.html(this.nil)},isNil:function(){return""===this.element.html()||this.element.html()===this.nil},getValue:function(){alert("The form was not properly initialized. getValue is unbound")},sanitizeValue:function(e){return jQuery.trim(e)},requestData:function(){csrf_token=jQuery("meta[name=csrf-token]").attr("content"),csrf_param=jQuery("meta[name=csrf-param]").attr("content");var e="_method=put";return e+="&"+this.objectName+"["+this.attributeName+"]="+encodeURIComponent(this.getValue()),void 0!==csrf_param&&void 0!==csrf_token&&(e+="&"+csrf_param+"="+encodeURIComponent(csrf_token)),e},ajax:function(e){return e.url=this.url,e.beforeSend=function(e){e.setRequestHeader("Accept","application/json")},jQuery.ajax(e)},loadSuccessCallback:function(e){if(e=jQuery.trim(e),e&&""!=e){var t=jQuery.parseJSON(jQuery.trim(e));null!==t&&t.hasOwnProperty("display_as")&&(this.element.attr("data-original-content",this.element.text()),this.original_content=this.element.text(),this.element.html(t.display_as)),this.element.trigger(jQuery.Event("best_in_place:success"),e),this.element.trigger(jQuery.Event("ajax:success"),e)}else this.element.trigger(jQuery.Event("best_in_place:success")),this.element.trigger(jQuery.Event("ajax:success"));jQuery(this.activator).bind("click",{editor:this},this.clickHandler),this.element.trigger(jQuery.Event("best_in_place:deactivate")),null!==this.collectionValue&&"select"==this.formType&&(this.collectionValue=this.previousCollectionValue,this.previousCollectionValue=null)},loadErrorCallback:function(e,t){this.activateText(this.oldValue),this.element.trigger(jQuery.Event("best_in_place:error"),[e,t]),this.element.trigger(jQuery.Event("ajax:error"),e,t),jQuery(this.activator).bind("click",{editor:this},this.clickHandler),this.element.trigger(jQuery.Event("best_in_place:deactivate"))},clickHandler:function(e){e.preventDefault(),e.data.editor.activate()},setHtmlAttributes:function(){var e=this.element.find(this.formType);if(this.html_attrs){var t=jQuery.parseJSON(this.html_attrs);for(var n in t)e.attr(n,t[n])}}},BestInPlaceEditor.forms={input:{activateForm:function(){var e=jQuery(document.createElement("form")).addClass("form_in_place").attr("action","javascript:void(0);").attr("style","display:inline"),t=jQuery(document.createElement("input")).attr("type","text").attr("name",this.attributeName).attr("maxlength","255").val(this.display_value);null!==this.inner_class&&t.addClass(this.inner_class),e.append(t),this.okButton&&e.append(jQuery(document.createElement("input")).attr("type","submit").attr("class",this.okButtonClass).attr("value",this.okButton)),this.cancelButton&&e.append(jQuery(document.createElement("input")).attr("type","button").attr("class",this.cancelButtonClass).attr("value",this.cancelButton)),this.element.html(e),this.setHtmlAttributes(),this.element.find("input[type='text']")[0].select(),this.element.find("form").bind("submit",{editor:this},BestInPlaceEditor.forms.input.submitHandler),this.cancelButton&&this.element.find("input[type='button']").bind("click",{editor:this},BestInPlaceEditor.forms.input.cancelButtonHandler),this.element.find("input[type='text']").bind("blur",{editor:this},BestInPlaceEditor.forms.input.inputBlurHandler),this.element.find("input[type='text']").bind("keyup",{editor:this},BestInPlaceEditor.forms.input.keyupHandler),this.blurTimer=null,this.userClicked=!1},getValue:function(){return this.sanitizeValue(this.element.find("input").val())},inputBlurHandler:function(e){e.data.editor.okButton?e.data.editor.blurTimer=setTimeout(function(){e.data.editor.userClicked||e.data.editor.abort()},500):e.data.editor.cancelButton?e.data.editor.blurTimer=setTimeout(function(){e.data.editor.userClicked||e.data.editor.update()},500):e.data.editor.update()},submitHandler:function(e){e.data.editor.userClicked=!0,clearTimeout(e.data.editor.blurTimer),e.data.editor.update()},cancelButtonHandler:function(e){e.data.editor.userClicked=!0,clearTimeout(e.data.editor.blurTimer),e.data.editor.abort(),e.stopPropagation()},keyupHandler:function(e){27==e.keyCode&&e.data.editor.abort()}},date:{activateForm:function(){var e=this,t=jQuery(document.createElement("form")).addClass("form_in_place").attr("action","javascript:void(0);").attr("style","display:inline"),n=jQuery(document.createElement("input")).attr("type","text").attr("name",this.attributeName).attr("maxlength","255").attr("value",this.sanitizeValue(this.display_value));null!==this.inner_class&&n.addClass(this.inner_class),t.append(n),this.element.html(t),this.setHtmlAttributes(),this.element.find("input")[0].select(),this.element.find("form").bind("submit",{editor:this},BestInPlaceEditor.forms.input.submitHandler),this.element.find("input").bind("keyup",{editor:this},BestInPlaceEditor.forms.input.keyupHandler),this.element.find("input").datepicker({onClose:function(){e.update()}}).datepicker("show")},getValue:function(){return this.sanitizeValue(this.element.find("input").val())},submitHandler:function(e){e.data.editor.update()},keyupHandler:function(e){27==e.keyCode&&e.data.editor.abort()}},select:{activateForm:function(){var e=jQuery(document.createElement("form")).attr("action","javascript:void(0)").attr("style","display:inline");selected="",oldValue=this.oldValue,select_elt=jQuery(document.createElement("select")).attr("class",null!==this.inned_class?this.inner_class:""),currentCollectionValue=this.collectionValue,jQuery.each(this.values,function(e,t){var n=jQuery(document.createElement("option")).val(t[0]).html(t[1]);t[0]==currentCollectionValue&&n.attr("selected","selected"),select_elt.append(n)}),e.append(select_elt),this.element.html(e),this.setHtmlAttributes(),this.element.find("select").bind("change",{editor:this},BestInPlaceEditor.forms.select.blurHandler),this.element.find("select").bind("blur",{editor:this},BestInPlaceEditor.forms.select.blurHandler),this.element.find("select").bind("keyup",{editor:this},BestInPlaceEditor.forms.select.keyupHandler),this.element.find("select")[0].focus()},getValue:function(){return this.sanitizeValue(this.element.find("select").val())},blurHandler:function(e){e.data.editor.update()},keyupHandler:function(e){27==e.keyCode&&e.data.editor.abort()}},checkbox:{activateForm:function(){this.collectionValue=!this.getValue(),this.setHtmlAttributes(),this.update()},getValue:function(){return this.collectionValue}},textarea:{activateForm:function(){width=this.element.css("width"),height=this.element.css("height");var e=jQuery(document.createElement("form")).attr("action","javascript:void(0)").attr("style","display:inline").append(jQuery(document.createElement("textarea")).val(this.sanitizeValue(this.display_value)));this.okButton&&e.append(jQuery(document.createElement("input")).attr("type","submit").attr("value",this.okButton)),this.cancelButton&&e.append(jQuery(document.createElement("input")).attr("type","button").attr("value",this.cancelButton)),this.element.html(e),this.setHtmlAttributes(),jQuery(this.element.find("textarea")[0]).css({"min-width":width,"min-height":height}),jQuery(this.element.find("textarea")[0]).elastic(),this.element.find("textarea")[0].focus(),this.element.find("form").bind("submit",{editor:this},BestInPlaceEditor.forms.textarea.submitHandler),this.cancelButton&&this.element.find("input[type='button']").bind("click",{editor:this},BestInPlaceEditor.forms.textarea.cancelButtonHandler),this.element.find("textarea").bind("blur",{editor:this},BestInPlaceEditor.forms.textarea.blurHandler),this.element.find("textarea").bind("keyup",{editor:this},BestInPlaceEditor.forms.textarea.keyupHandler),this.blurTimer=null,this.userClicked=!1},getValue:function(){return this.sanitizeValue(this.element.find("textarea").val())},blurHandler:function(e){e.data.editor.okButton?e.data.editor.blurTimer=setTimeout(function(){e.data.editor.userClicked||e.data.editor.abortIfConfirm()},500):e.data.editor.cancelButton?e.data.editor.blurTimer=setTimeout(function(){e.data.editor.userClicked||e.data.editor.update()},500):e.data.editor.update()},submitHandler:function(e){e.data.editor.userClicked=!0,clearTimeout(e.data.editor.blurTimer),e.data.editor.update()},cancelButtonHandler:function(e){e.data.editor.userClicked=!0,clearTimeout(e.data.editor.blurTimer),e.data.editor.abortIfConfirm(),e.stopPropagation()},keyupHandler:function(e){27==e.keyCode&&e.data.editor.abortIfConfirm()}}},jQuery.fn.best_in_place=function(){function e(e){return e.data("bestInPlaceEditor")?void 0:(e.data("bestInPlaceEditor",new BestInPlaceEditor(e)),!0)}return jQuery(this.context).delegate(this.selector,"click",function(){var t=jQuery(this);e(t)&&t.click()}),this.each(function(){e(jQuery(this))}),this},function(e){"undefined"==typeof e.fn.elastic&&e.fn.extend({elastic:function(){var t=["paddingTop","paddingRight","paddingBottom","paddingLeft","fontSize","lineHeight","fontFamily","width","fontWeight"];return this.each(function(){function n(e,t){curratedHeight=Math.floor(parseInt(e,10)),r.height()!=curratedHeight&&r.css({height:curratedHeight+"px",overflow:t})}function i(){var e=r.val().replace(/&/g,"&amp;").replace(/  /g,"&nbsp;").replace(/<|>/g,"&gt;").replace(/\n/g,"<br />"),t=a.html().replace(/<br>/gi,"<br />");if(e+"&nbsp;"!=t&&(a.html(e+"&nbsp;"),Math.abs(a.height()+s-r.height())>3)){var i=a.height()+s;i>=l?n(l,"auto"):o>=i?n(o,"hidden"):n(i,"hidden")}}if("textarea"!=this.type)return!1;var r=e(this),a=e("<div />").css({position:"absolute",display:"none","word-wrap":"break-word"}),s=parseInt(r.css("line-height"),10)||parseInt(r.css("font-size"),"10"),o=parseInt(r.css("height"),10)||3*s,l=parseInt(r.css("max-height"),10)||Number.MAX_VALUE,c=0;for(0>l&&(l=Number.MAX_VALUE),a.appendTo(r.parent()),c=t.length;c--;)a.css(t[c].toString(),r.css(t[c].toString()));r.css({overflow:"hidden"}),r.bind("keyup change cut paste",function(){i()}),r.bind("blur",function(){a.height()<l&&(a.height()>o?r.height(a.height()):r.height(o))}),r.on("input paste",function(){setTimeout(i,250)}),i()})}})}(jQuery),function($){RPM.EditInPlace=function(e,t){this.configure(t),BestInPlaceEditor.apply(this,[e])},RPM.EditInPlace.prototype=$.extend({},BestInPlaceEditor.prototype,{configure:function(e){"undefined"==typeof e&&(e={}),this.defaultErrorMessage=e.default_error_message||"Sorry, your previous save operation failed.",this.successCallback=e.success,this.errorCallback=e.error,this.allowHtml=e.html,this.twoPhase=e.twoPhase,this.truncate=e.truncate},activate:function(){BestInPlaceEditor.prototype.activate.call(this),this.element.bind("keypress",{editor:this},this.keyPressHandler),this.element.bind("keyup",{editor:this},this.keyUpHandler),this.element.bind("click",this.clickCatcher)},clickCatcher:function(e){e.stopPropagation(),e.preventDefault()},abort:function(){this.element.unbind("keypress",this.keyPressHandler),this.element.unbind("keyup",this.keyUpHandler),this.element.unbind("blur",BestInPlaceEditor.forms[this.formType].inputBlurHandler),this.element.unbind("submit",BestInPlaceEditor.forms[this.formType].submitHandler),this.element.unbind("click",this.clickCatcher),BestInPlaceEditor.prototype.abort.call(this)},update:function(){var e=this;e.element.unbind("keypress",e.keyPressHandler),e.element.unbind("keyup",e.keyUpHandler),e.element.unbind("submit",BestInPlaceEditor.forms[this.formType].inputBlurHandler),e.element.unbind("blur",BestInPlaceEditor.forms[this.formType].submitHandler),e.element.unbind("click",this.clickCatcher);var t=e.getValue(),n=e.requestData();e.setValue(t);var i=!e.element.data("allow_blank")&&""===$.trim(t);return this.oldValue=$.trim(this.oldValue),t===this.oldValue||i?(e.setValue(this.oldValue),void this._ajaxComplete()):("undefined"!=e.element.data("truncate")&&(t=t.substring(0,e.element.data("truncate")),e.element.text(t)),e.element.addClass("wait"),void e.ajax({type:"post",global:!e.errorCallback,data:n,success:function(n){e.twoPhase?e.ajax({dataType:"json",global:!e.errorCallback,success:function(t){e.loadSuccessCallback(t)},error:function(t){e.loadErrorCallback(e.parseError(t.responseText))}}):e.successCallback&&(n.name&&e.element.text(n.name),e.successCallback(t,e.oldValue),e.formContent=t)},error:function(t){e.loadErrorCallback(e.parseError(t.responseText))},complete:function(){e.element.removeClass("wait"),e._ajaxComplete()}}))},_ajaxComplete:function(){this.element.removeClass("rip-active"),$(this.activator).bind("click",{editor:this},this.clickHandler)},setValue:function(e,t){var n=this;t||n.allowHtml?n.element.html(e):n.element.text(e)},loadSuccessCallback:function(data){var editor=this;jQuery.fn.jquery<"1.4"&&(data=eval("("+data+")"));var value=data[this.objectName][this.attributeName];editor.setValue(value,!!data[this.objectName].html),data[this.objectName][this.attributeName+"_formcontent"]?this.formContent=data[this.objectName][this.attributeName+"_formcontent"]:this.formContent=value,editor.successCallback&&editor.successCallback(value,editor.oldValue)},loadErrorCallback:function(e){var t=this;t.element.text(t.formContent),t.errorCallback&&t.errorCallback(e)},parseError:function(e){var t,n=this;try{t=$.parseJSON(e)}catch(i){RPM.log("*** WARNING *** failed to parse JSON response",i),t={}}return"undefined"==typeof t.error&&(t.error=n.defaultErrorMessage),t.error},keyUpHandler:function(e){return 27===e.keyCode?(e.preventDefault(),e.stopPropagation(),e.data.editor.abort(),!1):void 0},keyPressHandler:function(e){return 13===e.keyCode?(e.preventDefault(),e.stopPropagation(),e.data.editor.update(),!1):void 0}}),BestInPlaceEditor.forms.input.inputBlurHandler=function(e){e.data.editor.update()},$.fn.rpm_edit_in_place=function(e){return"undefined"==typeof e&&(e={}),this.each(function(){$(this).data("bestInPlaceEditor")?$(this).data("bestInPlaceEditor").configure(e):$(this).data("bestInPlaceEditor",new RPM.EditInPlace(this,e))}),this}}(jQuery),function(e){function t(i){if(n[i])return n[i].exports;var r=n[i]={exports:{},id:i,loaded:!1};return e[i].call(r.exports,r,r.exports,t),r.loaded=!0,r.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}({0:function(e,t,n){e.exports=n(563)},2:function(e,t,n){var i=angular.module("RPM.RPMServices",[]);i.factory("RPMService",n(15))},9:function(e,t,n){var i=n(11);angular.module("StringFormatFilters",[]).filter("trim",function(){return function(e){return e&&e.trim?e.trim():e}}).filter("capitalize",function(){return function(e){
return null!==e?(e=e.toLowerCase(),e.substring(0,1).toUpperCase()+e.substring(1)):void 0}}).filter("append",function(){return function(e,t,n){return n||(t=" "+t),e+t}}).filter("truncate",function(){return function(e,t){e=e||"",t=t||30;var n="...",i=5,r=e,a=e.length-t;if(a>0){var s=t-(i+n.length);r=[e.substring(0,i),n,e.substring(e.length-s)].join("")}return r}}).filter("proseTruncate",function(){return function(e,t){return e=e||"",t=t||30,e.length>t?[e.substring(0,t-3),"..."].join(""):e}}).filter("formattedDate",function(){return function(e){if(void 0===e)return"-";var t=i(e),n=i(),r=n.date()===t.date(),a=n.month()===t.month(),s=n.year()===t.year(),o=r&&a&&s;return o?t.format("h:mm a"):s?t.format("MMM D, h:mm a"):s?void 0:t.format("MMM D 'YY, h:mm a")}}).filter("formattedDuration",function(){return function(e){if(0===e)return"-";var t=i.duration(e,"seconds"),n="";return t.days()>0&&(n=n+t.days()+"d "),t.hours()>0&&(n=n+t.hours()+"h "),t.minutes()>0&&(n=n+t.minutes()+"m "),n}})},11:function(e,t,n){(function(e){!function(t,n){e.exports=n()}(this,function(){"use strict";function t(){return En.apply(null,arguments)}function n(e){En=e}function i(e){return"[object Array]"===Object.prototype.toString.call(e)}function r(e){return e instanceof Date||"[object Date]"===Object.prototype.toString.call(e)}function a(e,t){var n,i=[];for(n=0;n<e.length;++n)i.push(t(e[n],n));return i}function s(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function o(e,t){for(var n in t)s(t,n)&&(e[n]=t[n]);return s(t,"toString")&&(e.toString=t.toString),s(t,"valueOf")&&(e.valueOf=t.valueOf),e}function l(e,t,n,i){return $e(e,t,n,i,!0).utc()}function c(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1}}function u(e){return null==e._pf&&(e._pf=c()),e._pf}function d(e){if(null==e._isValid){var t=u(e);e._isValid=!isNaN(e._d.getTime())&&t.overflow<0&&!t.empty&&!t.invalidMonth&&!t.nullInput&&!t.invalidFormat&&!t.userInvalidated,e._strict&&(e._isValid=e._isValid&&0===t.charsLeftOver&&0===t.unusedTokens.length&&void 0===t.bigHour)}return e._isValid}function h(e){var t=l(NaN);return null!=e?o(u(t),e):u(t).userInvalidated=!0,t}function p(e,t){var n,i,r;if("undefined"!=typeof t._isAMomentObject&&(e._isAMomentObject=t._isAMomentObject),"undefined"!=typeof t._i&&(e._i=t._i),"undefined"!=typeof t._f&&(e._f=t._f),"undefined"!=typeof t._l&&(e._l=t._l),"undefined"!=typeof t._strict&&(e._strict=t._strict),"undefined"!=typeof t._tzm&&(e._tzm=t._tzm),"undefined"!=typeof t._isUTC&&(e._isUTC=t._isUTC),"undefined"!=typeof t._offset&&(e._offset=t._offset),"undefined"!=typeof t._pf&&(e._pf=u(t)),"undefined"!=typeof t._locale&&(e._locale=t._locale),On.length>0)for(n in On)i=On[n],r=t[i],"undefined"!=typeof r&&(e[i]=r);return e}function f(e){p(this,e),this._d=new Date(+e._d),An===!1&&(An=!0,t.updateOffset(this),An=!1)}function g(e){return e instanceof f||null!=e&&null!=e._isAMomentObject}function m(e){var t=+e,n=0;return 0!==t&&isFinite(t)&&(n=t>=0?Math.floor(t):Math.ceil(t)),n}function v(e,t,n){var i,r=Math.min(e.length,t.length),a=Math.abs(e.length-t.length),s=0;for(i=0;r>i;i++)(n&&e[i]!==t[i]||!n&&m(e[i])!==m(t[i]))&&s++;return s+a}function _(){}function y(e){return e?e.toLowerCase().replace("_","-"):e}function b(e){for(var t,n,i,r,a=0;a<e.length;){for(r=y(e[a]).split("-"),t=r.length,n=y(e[a+1]),n=n?n.split("-"):null;t>0;){if(i=w(r.slice(0,t).join("-")))return i;if(n&&n.length>=t&&v(r,n,!0)>=t-1)break;t--}a++}return null}function w(t){var n=null;if(!Rn[t]&&"undefined"!=typeof e&&e&&e.exports)try{n=In._abbr,!function(){var e=new Error('Cannot find module "./locale"');throw e.code="MODULE_NOT_FOUND",e}(),k(n)}catch(i){}return Rn[t]}function k(e,t){var n;return e&&(n="undefined"==typeof t?S(e):x(e,t),n&&(In=n)),In._abbr}function x(e,t){return null!==t?(t.abbr=e,Rn[e]||(Rn[e]=new _),Rn[e].set(t),k(e),Rn[e]):(delete Rn[e],null)}function S(e){var t;if(e&&e._locale&&e._locale._abbr&&(e=e._locale._abbr),!e)return In;if(!i(e)){if(t=w(e))return t;e=[e]}return b(e)}function C(e,t){var n=e.toLowerCase();Nn[n]=Nn[n+"s"]=Nn[t]=e}function $(e){return"string"==typeof e?Nn[e]||Nn[e.toLowerCase()]:void 0}function T(e){var t,n,i={};for(n in e)s(e,n)&&(t=$(n),t&&(i[t]=e[n]));return i}function P(e,n){return function(i){return null!=i?(M(this,e,i),t.updateOffset(this,n),this):D(this,e)}}function D(e,t){return e._d["get"+(e._isUTC?"UTC":"")+t]()}function M(e,t,n){return e._d["set"+(e._isUTC?"UTC":"")+t](n)}function E(e,t){var n;if("object"==typeof e)for(n in e)this.set(n,e[n]);else if(e=$(e),"function"==typeof this[e])return this[e](t);return this}function I(e,t,n){for(var i=""+Math.abs(e),r=e>=0;i.length<t;)i="0"+i;return(r?n?"+":"":"-")+i}function O(e,t,n,i){var r=i;"string"==typeof i&&(r=function(){return this[i]()}),e&&(Hn[e]=r),t&&(Hn[t[0]]=function(){return I(r.apply(this,arguments),t[1],t[2])}),n&&(Hn[n]=function(){return this.localeData().ordinal(r.apply(this,arguments),e)})}function A(e){return e.match(/\[[\s\S]/)?e.replace(/^\[|\]$/g,""):e.replace(/\\/g,"")}function R(e){var t,n,i=e.match(jn);for(t=0,n=i.length;n>t;t++)Hn[i[t]]?i[t]=Hn[i[t]]:i[t]=A(i[t]);return function(r){var a="";for(t=0;n>t;t++)a+=i[t]instanceof Function?i[t].call(r,e):i[t];return a}}function N(e,t){return e.isValid()?(t=j(t,e.localeData()),Fn[t]||(Fn[t]=R(t)),Fn[t](e)):e.localeData().invalidDate()}function j(e,t){function n(e){return t.longDateFormat(e)||e}var i=5;for(Ln.lastIndex=0;i>=0&&Ln.test(e);)e=e.replace(Ln,n),Ln.lastIndex=0,i-=1;return e}function L(e,t,n){ti[e]="function"==typeof t?t:function(e){return e&&n?n:t}}function F(e,t){return s(ti,e)?ti[e](t._strict,t._locale):new RegExp(H(e))}function H(e){return e.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(e,t,n,i,r){return t||n||i||r}).replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function U(e,t){var n,i=t;for("string"==typeof e&&(e=[e]),"number"==typeof t&&(i=function(e,n){n[t]=m(e)}),n=0;n<e.length;n++)ni[e[n]]=i}function V(e,t){U(e,function(e,n,i,r){i._w=i._w||{},t(e,i._w,i,r)})}function B(e,t,n){null!=t&&s(ni,e)&&ni[e](t,n._a,n,e)}function z(e,t){return new Date(Date.UTC(e,t+1,0)).getUTCDate()}function Y(e){return this._months[e.month()]}function W(e){return this._monthsShort[e.month()]}function q(e,t,n){var i,r,a;for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),i=0;12>i;i++){if(r=l([2e3,i]),n&&!this._longMonthsParse[i]&&(this._longMonthsParse[i]=new RegExp("^"+this.months(r,"").replace(".","")+"$","i"),this._shortMonthsParse[i]=new RegExp("^"+this.monthsShort(r,"").replace(".","")+"$","i")),n||this._monthsParse[i]||(a="^"+this.months(r,"")+"|^"+this.monthsShort(r,""),this._monthsParse[i]=new RegExp(a.replace(".",""),"i")),n&&"MMMM"===t&&this._longMonthsParse[i].test(e))return i;if(n&&"MMM"===t&&this._shortMonthsParse[i].test(e))return i;if(!n&&this._monthsParse[i].test(e))return i}}function J(e,t){var n;return"string"==typeof t&&(t=e.localeData().monthsParse(t),"number"!=typeof t)?e:(n=Math.min(e.date(),z(e.year(),t)),e._d["set"+(e._isUTC?"UTC":"")+"Month"](t,n),e)}function G(e){return null!=e?(J(this,e),t.updateOffset(this,!0),this):D(this,"Month")}function Q(){return z(this.year(),this.month())}function K(e){var t,n=e._a;return n&&-2===u(e).overflow&&(t=n[ri]<0||n[ri]>11?ri:n[ai]<1||n[ai]>z(n[ii],n[ri])?ai:n[si]<0||n[si]>24||24===n[si]&&(0!==n[oi]||0!==n[li]||0!==n[ci])?si:n[oi]<0||n[oi]>59?oi:n[li]<0||n[li]>59?li:n[ci]<0||n[ci]>999?ci:-1,u(e)._overflowDayOfYear&&(ii>t||t>ai)&&(t=ai),u(e).overflow=t),e}function X(e){t.suppressDeprecationWarnings===!1&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+e)}function Z(e,t){var n=!0,i=e+"\n"+(new Error).stack;return o(function(){return n&&(X(i),n=!1),t.apply(this,arguments)},t)}function ee(e,t){hi[e]||(X(t),hi[e]=!0)}function te(e){var t,n,i=e._i,r=pi.exec(i);if(r){for(u(e).iso=!0,t=0,n=fi.length;n>t;t++)if(fi[t][1].exec(i)){e._f=fi[t][0]+(r[6]||" ");break}for(t=0,n=gi.length;n>t;t++)if(gi[t][1].exec(i)){e._f+=gi[t][0];break}i.match(Xn)&&(e._f+="Z"),be(e)}else e._isValid=!1}function ne(e){var n=mi.exec(e._i);return null!==n?void(e._d=new Date(+n[1])):(te(e),void(e._isValid===!1&&(delete e._isValid,t.createFromInputFallback(e))))}function ie(e,t,n,i,r,a,s){var o=new Date(e,t,n,i,r,a,s);return 1970>e&&o.setFullYear(e),o}function re(e){var t=new Date(Date.UTC.apply(null,arguments));return 1970>e&&t.setUTCFullYear(e),t}function ae(e){return se(e)?366:365}function se(e){return e%4===0&&e%100!==0||e%400===0}function oe(){return se(this.year())}function le(e,t,n){var i,r=n-t,a=n-e.day();return a>r&&(a-=7),r-7>a&&(a+=7),i=Te(e).add(a,"d"),{week:Math.ceil(i.dayOfYear()/7),year:i.year()}}function ce(e){return le(e,this._week.dow,this._week.doy).week}function ue(){return this._week.dow}function de(){return this._week.doy}function he(e){var t=this.localeData().week(this);return null==e?t:this.add(7*(e-t),"d")}function pe(e){var t=le(this,1,4).week;return null==e?t:this.add(7*(e-t),"d")}function fe(e,t,n,i,r){var a,s,o=re(e,0,1).getUTCDay();return o=0===o?7:o,n=null!=n?n:r,a=r-o+(o>i?7:0)-(r>o?7:0),s=7*(t-1)+(n-r)+a+1,{year:s>0?e:e-1,dayOfYear:s>0?s:ae(e-1)+s}}function ge(e){var t=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==e?t:this.add(e-t,"d")}function me(e,t,n){return null!=e?e:null!=t?t:n}function ve(e){var t=new Date;return e._useUTC?[t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()]:[t.getFullYear(),t.getMonth(),t.getDate()]}function _e(e){var t,n,i,r,a=[];if(!e._d){for(i=ve(e),e._w&&null==e._a[ai]&&null==e._a[ri]&&ye(e),e._dayOfYear&&(r=me(e._a[ii],i[ii]),e._dayOfYear>ae(r)&&(u(e)._overflowDayOfYear=!0),n=re(r,0,e._dayOfYear),e._a[ri]=n.getUTCMonth(),e._a[ai]=n.getUTCDate()),t=0;3>t&&null==e._a[t];++t)e._a[t]=a[t]=i[t];for(;7>t;t++)e._a[t]=a[t]=null==e._a[t]?2===t?1:0:e._a[t];24===e._a[si]&&0===e._a[oi]&&0===e._a[li]&&0===e._a[ci]&&(e._nextDay=!0,e._a[si]=0),e._d=(e._useUTC?re:ie).apply(null,a),null!=e._tzm&&e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),e._nextDay&&(e._a[si]=24)}}function ye(e){var t,n,i,r,a,s,o;t=e._w,null!=t.GG||null!=t.W||null!=t.E?(a=1,s=4,n=me(t.GG,e._a[ii],le(Te(),1,4).year),i=me(t.W,1),r=me(t.E,1)):(a=e._locale._week.dow,s=e._locale._week.doy,n=me(t.gg,e._a[ii],le(Te(),a,s).year),i=me(t.w,1),null!=t.d?(r=t.d,a>r&&++i):r=null!=t.e?t.e+a:a),o=fe(n,i,r,s,a),e._a[ii]=o.year,e._dayOfYear=o.dayOfYear}function be(e){if(e._f===t.ISO_8601)return void te(e);e._a=[],u(e).empty=!0;var n,i,r,a,s,o=""+e._i,l=o.length,c=0;for(r=j(e._f,e._locale).match(jn)||[],n=0;n<r.length;n++)a=r[n],i=(o.match(F(a,e))||[])[0],i&&(s=o.substr(0,o.indexOf(i)),s.length>0&&u(e).unusedInput.push(s),o=o.slice(o.indexOf(i)+i.length),c+=i.length),Hn[a]?(i?u(e).empty=!1:u(e).unusedTokens.push(a),B(a,i,e)):e._strict&&!i&&u(e).unusedTokens.push(a);u(e).charsLeftOver=l-c,o.length>0&&u(e).unusedInput.push(o),u(e).bigHour===!0&&e._a[si]<=12&&e._a[si]>0&&(u(e).bigHour=void 0),e._a[si]=we(e._locale,e._a[si],e._meridiem),_e(e),K(e)}function we(e,t,n){var i;return null==n?t:null!=e.meridiemHour?e.meridiemHour(t,n):null!=e.isPM?(i=e.isPM(n),i&&12>t&&(t+=12),i||12!==t||(t=0),t):t}function ke(e){var t,n,i,r,a;if(0===e._f.length)return u(e).invalidFormat=!0,void(e._d=new Date(NaN));for(r=0;r<e._f.length;r++)a=0,t=p({},e),null!=e._useUTC&&(t._useUTC=e._useUTC),t._f=e._f[r],be(t),d(t)&&(a+=u(t).charsLeftOver,a+=10*u(t).unusedTokens.length,u(t).score=a,(null==i||i>a)&&(i=a,n=t));o(e,n||t)}function xe(e){if(!e._d){var t=T(e._i);e._a=[t.year,t.month,t.day||t.date,t.hour,t.minute,t.second,t.millisecond],_e(e)}}function Se(e){var t,n=e._i,a=e._f;return e._locale=e._locale||S(e._l),null===n||void 0===a&&""===n?h({nullInput:!0}):("string"==typeof n&&(e._i=n=e._locale.preparse(n)),g(n)?new f(K(n)):(i(a)?ke(e):a?be(e):r(n)?e._d=n:Ce(e),t=new f(K(e)),t._nextDay&&(t.add(1,"d"),t._nextDay=void 0),t))}function Ce(e){var n=e._i;void 0===n?e._d=new Date:r(n)?e._d=new Date(+n):"string"==typeof n?ne(e):i(n)?(e._a=a(n.slice(0),function(e){return parseInt(e,10)}),_e(e)):"object"==typeof n?xe(e):"number"==typeof n?e._d=new Date(n):t.createFromInputFallback(e)}function $e(e,t,n,i,r){var a={};return"boolean"==typeof n&&(i=n,n=void 0),a._isAMomentObject=!0,a._useUTC=a._isUTC=r,a._l=n,a._i=e,a._f=t,a._strict=i,Se(a)}function Te(e,t,n,i){return $e(e,t,n,i,!1)}function Pe(e,t){var n,r;if(1===t.length&&i(t[0])&&(t=t[0]),!t.length)return Te();for(n=t[0],r=1;r<t.length;++r)t[r][e](n)&&(n=t[r]);return n}function De(){var e=[].slice.call(arguments,0);return Pe("isBefore",e)}function Me(){var e=[].slice.call(arguments,0);return Pe("isAfter",e)}function Ee(e){var t=T(e),n=t.year||0,i=t.quarter||0,r=t.month||0,a=t.week||0,s=t.day||0,o=t.hour||0,l=t.minute||0,c=t.second||0,u=t.millisecond||0;this._milliseconds=+u+1e3*c+6e4*l+36e5*o,this._days=+s+7*a,this._months=+r+3*i+12*n,this._data={},this._locale=S(),this._bubble()}function Ie(e){return e instanceof Ee}function Oe(e,t){O(e,0,0,function(){var e=this.utcOffset(),n="+";return 0>e&&(e=-e,n="-"),n+I(~~(e/60),2)+t+I(~~e%60,2)})}function Ae(e){var t=(e||"").match(Xn)||[],n=t[t.length-1]||[],i=(n+"").match(wi)||["-",0,0],r=+(60*i[1])+m(i[2]);return"+"===i[0]?r:-r}function Re(e,n){var i,a;return n._isUTC?(i=n.clone(),a=(g(e)||r(e)?+e:+Te(e))-+i,i._d.setTime(+i._d+a),t.updateOffset(i,!1),i):Te(e).local()}function Ne(e){return 15*-Math.round(e._d.getTimezoneOffset()/15)}function je(e,n){var i,r=this._offset||0;return null!=e?("string"==typeof e&&(e=Ae(e)),Math.abs(e)<16&&(e=60*e),!this._isUTC&&n&&(i=Ne(this)),this._offset=e,this._isUTC=!0,null!=i&&this.add(i,"m"),r!==e&&(!n||this._changeInProgress?Ze(this,Je(e-r,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,t.updateOffset(this,!0),this._changeInProgress=null)),this):this._isUTC?r:Ne(this)}function Le(e,t){return null!=e?("string"!=typeof e&&(e=-e),this.utcOffset(e,t),this):-this.utcOffset()}function Fe(e){return this.utcOffset(0,e)}function He(e){return this._isUTC&&(this.utcOffset(0,e),this._isUTC=!1,e&&this.subtract(Ne(this),"m")),this}function Ue(){return this._tzm?this.utcOffset(this._tzm):"string"==typeof this._i&&this.utcOffset(Ae(this._i)),this}function Ve(e){return e=e?Te(e).utcOffset():0,(this.utcOffset()-e)%60===0}function Be(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function ze(){if(this._a){var e=this._isUTC?l(this._a):Te(this._a);return this.isValid()&&v(this._a,e.toArray())>0}return!1}function Ye(){return!this._isUTC}function We(){return this._isUTC}function qe(){return this._isUTC&&0===this._offset}function Je(e,t){var n,i,r,a=e,o=null;return Ie(e)?a={ms:e._milliseconds,d:e._days,M:e._months}:"number"==typeof e?(a={},t?a[t]=e:a.milliseconds=e):(o=ki.exec(e))?(n="-"===o[1]?-1:1,a={y:0,d:m(o[ai])*n,h:m(o[si])*n,m:m(o[oi])*n,s:m(o[li])*n,ms:m(o[ci])*n}):(o=xi.exec(e))?(n="-"===o[1]?-1:1,a={y:Ge(o[2],n),M:Ge(o[3],n),d:Ge(o[4],n),h:Ge(o[5],n),m:Ge(o[6],n),s:Ge(o[7],n),w:Ge(o[8],n)}):null==a?a={}:"object"==typeof a&&("from"in a||"to"in a)&&(r=Ke(Te(a.from),Te(a.to)),a={},a.ms=r.milliseconds,a.M=r.months),i=new Ee(a),Ie(e)&&s(e,"_locale")&&(i._locale=e._locale),i}function Ge(e,t){var n=e&&parseFloat(e.replace(",","."));return(isNaN(n)?0:n)*t}function Qe(e,t){var n={milliseconds:0,months:0};return n.months=t.month()-e.month()+12*(t.year()-e.year()),e.clone().add(n.months,"M").isAfter(t)&&--n.months,n.milliseconds=+t-+e.clone().add(n.months,"M"),n}function Ke(e,t){var n;return t=Re(t,e),e.isBefore(t)?n=Qe(e,t):(n=Qe(t,e),n.milliseconds=-n.milliseconds,n.months=-n.months),n}function Xe(e,t){return function(n,i){var r,a;return null===i||isNaN(+i)||(ee(t,"moment()."+t+"(period, number) is deprecated. Please use moment()."+t+"(number, period)."),a=n,n=i,i=a),n="string"==typeof n?+n:n,r=Je(n,i),Ze(this,r,e),this}}function Ze(e,n,i,r){var a=n._milliseconds,s=n._days,o=n._months;r=null==r?!0:r,a&&e._d.setTime(+e._d+a*i),s&&M(e,"Date",D(e,"Date")+s*i),o&&J(e,D(e,"Month")+o*i),r&&t.updateOffset(e,s||o)}function et(e){var t=e||Te(),n=Re(t,this).startOf("day"),i=this.diff(n,"days",!0),r=-6>i?"sameElse":-1>i?"lastWeek":0>i?"lastDay":1>i?"sameDay":2>i?"nextDay":7>i?"nextWeek":"sameElse";return this.format(this.localeData().calendar(r,this,Te(t)))}function tt(){return new f(this)}function nt(e,t){var n;return t=$("undefined"!=typeof t?t:"millisecond"),"millisecond"===t?(e=g(e)?e:Te(e),+this>+e):(n=g(e)?+e:+Te(e),n<+this.clone().startOf(t))}function it(e,t){var n;return t=$("undefined"!=typeof t?t:"millisecond"),"millisecond"===t?(e=g(e)?e:Te(e),+e>+this):(n=g(e)?+e:+Te(e),+this.clone().endOf(t)<n)}function rt(e,t,n){return this.isAfter(e,n)&&this.isBefore(t,n)}function at(e,t){var n;return t=$(t||"millisecond"),"millisecond"===t?(e=g(e)?e:Te(e),+this===+e):(n=+Te(e),+this.clone().startOf(t)<=n&&n<=+this.clone().endOf(t))}function st(e){return 0>e?Math.ceil(e):Math.floor(e)}function ot(e,t,n){var i,r,a=Re(e,this),s=6e4*(a.utcOffset()-this.utcOffset());return t=$(t),"year"===t||"month"===t||"quarter"===t?(r=lt(this,a),"quarter"===t?r/=3:"year"===t&&(r/=12)):(i=this-a,r="second"===t?i/1e3:"minute"===t?i/6e4:"hour"===t?i/36e5:"day"===t?(i-s)/864e5:"week"===t?(i-s)/6048e5:i),n?r:st(r)}function lt(e,t){var n,i,r=12*(t.year()-e.year())+(t.month()-e.month()),a=e.clone().add(r,"months");return 0>t-a?(n=e.clone().add(r-1,"months"),i=(t-a)/(a-n)):(n=e.clone().add(r+1,"months"),i=(t-a)/(n-a)),-(r+i)}function ct(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function ut(){var e=this.clone().utc();return 0<e.year()&&e.year()<=9999?"function"==typeof Date.prototype.toISOString?this.toDate().toISOString():N(e,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):N(e,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")}function dt(e){var n=N(this,e||t.defaultFormat);return this.localeData().postformat(n)}function ht(e,t){return this.isValid()?Je({to:this,from:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()}function pt(e){return this.from(Te(),e)}function ft(e,t){return this.isValid()?Je({from:this,to:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()}function gt(e){return this.to(Te(),e)}function mt(e){var t;return void 0===e?this._locale._abbr:(t=S(e),null!=t&&(this._locale=t),this)}function vt(){return this._locale}function _t(e){switch(e=$(e)){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===e&&this.weekday(0),"isoWeek"===e&&this.isoWeekday(1),"quarter"===e&&this.month(3*Math.floor(this.month()/3)),this}function yt(e){return e=$(e),void 0===e||"millisecond"===e?this:this.startOf(e).add(1,"isoWeek"===e?"week":e).subtract(1,"ms")}function bt(){return+this._d-6e4*(this._offset||0)}function wt(){return Math.floor(+this/1e3)}function kt(){return this._offset?new Date(+this):this._d}function xt(){var e=this;return[e.year(),e.month(),e.date(),e.hour(),e.minute(),e.second(),e.millisecond()]}function St(){return d(this)}function Ct(){return o({},u(this))}function $t(){return u(this).overflow}function Tt(e,t){O(0,[e,e.length],0,t)}function Pt(e,t,n){return le(Te([e,11,31+t-n]),t,n).week}function Dt(e){var t=le(this,this.localeData()._week.dow,this.localeData()._week.doy).year;return null==e?t:this.add(e-t,"y")}function Mt(e){var t=le(this,1,4).year;return null==e?t:this.add(e-t,"y")}function Et(){return Pt(this.year(),1,4)}function It(){var e=this.localeData()._week;return Pt(this.year(),e.dow,e.doy)}function Ot(e){return null==e?Math.ceil((this.month()+1)/3):this.month(3*(e-1)+this.month()%3)}function At(e,t){if("string"==typeof e)if(isNaN(e)){if(e=t.weekdaysParse(e),"number"!=typeof e)return null}else e=parseInt(e,10);return e}function Rt(e){return this._weekdays[e.day()]}function Nt(e){return this._weekdaysShort[e.day()]}function jt(e){return this._weekdaysMin[e.day()]}function Lt(e){var t,n,i;for(this._weekdaysParse||(this._weekdaysParse=[]),t=0;7>t;t++)if(this._weekdaysParse[t]||(n=Te([2e3,1]).day(t),i="^"+this.weekdays(n,"")+"|^"+this.weekdaysShort(n,"")+"|^"+this.weekdaysMin(n,""),this._weekdaysParse[t]=new RegExp(i.replace(".",""),"i")),this._weekdaysParse[t].test(e))return t}function Ft(e){var t=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=e?(e=At(e,this.localeData()),this.add(e-t,"d")):t}function Ht(e){var t=(this.day()+7-this.localeData()._week.dow)%7;return null==e?t:this.add(e-t,"d")}function Ut(e){return null==e?this.day()||7:this.day(this.day()%7?e:e-7)}function Vt(e,t){O(e,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),t)})}function Bt(e,t){return t._meridiemParse}function zt(e){return"p"===(e+"").toLowerCase().charAt(0)}function Yt(e,t,n){return e>11?n?"pm":"PM":n?"am":"AM"}function Wt(e){O(0,[e,3],0,"millisecond")}function qt(){return this._isUTC?"UTC":""}function Jt(){return this._isUTC?"Coordinated Universal Time":""}function Gt(e){return Te(1e3*e)}function Qt(){return Te.apply(null,arguments).parseZone()}function Kt(e,t,n){var i=this._calendar[e];return"function"==typeof i?i.call(t,n):i}function Xt(e){var t=this._longDateFormat[e];return!t&&this._longDateFormat[e.toUpperCase()]&&(t=this._longDateFormat[e.toUpperCase()].replace(/MMMM|MM|DD|dddd/g,function(e){return e.slice(1)}),this._longDateFormat[e]=t),t}function Zt(){return this._invalidDate}function en(e){return this._ordinal.replace("%d",e)}function tn(e){return e}function nn(e,t,n,i){var r=this._relativeTime[n];return"function"==typeof r?r(e,t,n,i):r.replace(/%d/i,e)}function rn(e,t){var n=this._relativeTime[e>0?"future":"past"];return"function"==typeof n?n(t):n.replace(/%s/i,t)}function an(e){var t,n;for(n in e)t=e[n],"function"==typeof t?this[n]=t:this["_"+n]=t;this._ordinalParseLenient=new RegExp(this._ordinalParse.source+"|"+/\d{1,2}/.source)}function sn(e,t,n,i){var r=S(),a=l().set(i,t);return r[n](a,e)}function on(e,t,n,i,r){if("number"==typeof e&&(t=e,e=void 0),e=e||"",null!=t)return sn(e,t,n,r);var a,s=[];for(a=0;i>a;a++)s[a]=sn(e,a,n,r);return s}function ln(e,t){return on(e,t,"months",12,"month")}function cn(e,t){return on(e,t,"monthsShort",12,"month")}function un(e,t){return on(e,t,"weekdays",7,"day")}function dn(e,t){return on(e,t,"weekdaysShort",7,"day")}function hn(e,t){return on(e,t,"weekdaysMin",7,"day")}function pn(){var e=this._data;return this._milliseconds=Yi(this._milliseconds),this._days=Yi(this._days),this._months=Yi(this._months),e.milliseconds=Yi(e.milliseconds),e.seconds=Yi(e.seconds),e.minutes=Yi(e.minutes),e.hours=Yi(e.hours),e.months=Yi(e.months),e.years=Yi(e.years),this}function fn(e,t,n,i){var r=Je(t,n);return e._milliseconds+=i*r._milliseconds,e._days+=i*r._days,e._months+=i*r._months,e._bubble()}function gn(e,t){return fn(this,e,t,1)}function mn(e,t){return fn(this,e,t,-1)}function vn(){var e,t,n,i=this._milliseconds,r=this._days,a=this._months,s=this._data,o=0;return s.milliseconds=i%1e3,e=st(i/1e3),s.seconds=e%60,t=st(e/60),s.minutes=t%60,n=st(t/60),s.hours=n%24,r+=st(n/24),o=st(_n(r)),r-=st(yn(o)),a+=st(r/30),r%=30,o+=st(a/12),a%=12,s.days=r,s.months=a,s.years=o,this}function _n(e){return 400*e/146097}function yn(e){return 146097*e/400}function bn(e){var t,n,i=this._milliseconds;if(e=$(e),"month"===e||"year"===e)return t=this._days+i/864e5,n=this._months+12*_n(t),"month"===e?n:n/12;switch(t=this._days+Math.round(yn(this._months/12)),e){case"week":return t/7+i/6048e5;case"day":return t+i/864e5;case"hour":return 24*t+i/36e5;case"minute":return 1440*t+i/6e4;case"second":return 86400*t+i/1e3;case"millisecond":return Math.floor(864e5*t)+i;default:throw new Error("Unknown unit "+e)}}function wn(){return this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*m(this._months/12)}function kn(e){return function(){return this.as(e)}}function xn(e){return e=$(e),this[e+"s"]()}function Sn(e){return function(){return this._data[e]}}function Cn(){return st(this.days()/7)}function $n(e,t,n,i,r){return r.relativeTime(t||1,!!n,e,i)}function Tn(e,t,n){var i=Je(e).abs(),r=or(i.as("s")),a=or(i.as("m")),s=or(i.as("h")),o=or(i.as("d")),l=or(i.as("M")),c=or(i.as("y")),u=r<lr.s&&["s",r]||1===a&&["m"]||a<lr.m&&["mm",a]||1===s&&["h"]||s<lr.h&&["hh",s]||1===o&&["d"]||o<lr.d&&["dd",o]||1===l&&["M"]||l<lr.M&&["MM",l]||1===c&&["y"]||["yy",c];return u[2]=t,u[3]=+e>0,u[4]=n,$n.apply(null,u)}function Pn(e,t){return void 0===lr[e]?!1:void 0===t?lr[e]:(lr[e]=t,!0)}function Dn(e){var t=this.localeData(),n=Tn(this,!e,t);return e&&(n=t.pastFuture(+this,n)),t.postformat(n)}function Mn(){var e=cr(this.years()),t=cr(this.months()),n=cr(this.days()),i=cr(this.hours()),r=cr(this.minutes()),a=cr(this.seconds()+this.milliseconds()/1e3),s=this.asSeconds();return s?(0>s?"-":"")+"P"+(e?e+"Y":"")+(t?t+"M":"")+(n?n+"D":"")+(i||r||a?"T":"")+(i?i+"H":"")+(r?r+"M":"")+(a?a+"S":""):"P0D"}var En,In,On=t.momentProperties=[],An=!1,Rn={},Nn={},jn=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Q|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,4}|x|X|zz?|ZZ?|.)/g,Ln=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,Fn={},Hn={},Un=/\d/,Vn=/\d\d/,Bn=/\d{3}/,zn=/\d{4}/,Yn=/[+-]?\d{6}/,Wn=/\d\d?/,qn=/\d{1,3}/,Jn=/\d{1,4}/,Gn=/[+-]?\d{1,6}/,Qn=/\d+/,Kn=/[+-]?\d+/,Xn=/Z|[+-]\d\d:?\d\d/gi,Zn=/[+-]?\d+(\.\d{1,3})?/,ei=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,ti={},ni={},ii=0,ri=1,ai=2,si=3,oi=4,li=5,ci=6;O("M",["MM",2],"Mo",function(){return this.month()+1}),O("MMM",0,0,function(e){return this.localeData().monthsShort(this,e)}),O("MMMM",0,0,function(e){return this.localeData().months(this,e)}),C("month","M"),L("M",Wn),L("MM",Wn,Vn),L("MMM",ei),L("MMMM",ei),U(["M","MM"],function(e,t){t[ri]=m(e)-1}),U(["MMM","MMMM"],function(e,t,n,i){var r=n._locale.monthsParse(e,i,n._strict);null!=r?t[ri]=r:u(n).invalidMonth=e});var ui="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),di="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),hi={};t.suppressDeprecationWarnings=!1;var pi=/^\s*(?:[+-]\d{6}|\d{4})-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,fi=[["YYYYYY-MM-DD",/[+-]\d{6}-\d{2}-\d{2}/],["YYYY-MM-DD",/\d{4}-\d{2}-\d{2}/],["GGGG-[W]WW-E",/\d{4}-W\d{2}-\d/],["GGGG-[W]WW",/\d{4}-W\d{2}/],["YYYY-DDD",/\d{4}-\d{3}/]],gi=[["HH:mm:ss.SSSS",/(T| )\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],mi=/^\/?Date\((\-?\d+)/i;t.createFromInputFallback=Z("moment construction falls back to js Date. This is discouraged and will be removed in upcoming major release. Please refer to https://github.com/moment/moment/issues/1407 for more info.",function(e){e._d=new Date(e._i+(e._useUTC?" UTC":""))}),O(0,["YY",2],0,function(){return this.year()%100}),O(0,["YYYY",4],0,"year"),O(0,["YYYYY",5],0,"year"),O(0,["YYYYYY",6,!0],0,"year"),C("year","y"),L("Y",Kn),L("YY",Wn,Vn),L("YYYY",Jn,zn),L("YYYYY",Gn,Yn),L("YYYYYY",Gn,Yn),U(["YYYY","YYYYY","YYYYYY"],ii),U("YY",function(e,n){n[ii]=t.parseTwoDigitYear(e)}),t.parseTwoDigitYear=function(e){return m(e)+(m(e)>68?1900:2e3)};var vi=P("FullYear",!1);O("w",["ww",2],"wo","week"),O("W",["WW",2],"Wo","isoWeek"),C("week","w"),C("isoWeek","W"),L("w",Wn),L("ww",Wn,Vn),L("W",Wn),L("WW",Wn,Vn),V(["w","ww","W","WW"],function(e,t,n,i){t[i.substr(0,1)]=m(e)});var _i={dow:0,doy:6};O("DDD",["DDDD",3],"DDDo","dayOfYear"),C("dayOfYear","DDD"),L("DDD",qn),L("DDDD",Bn),U(["DDD","DDDD"],function(e,t,n){n._dayOfYear=m(e)}),t.ISO_8601=function(){};var yi=Z("moment().min is deprecated, use moment.min instead. https://github.com/moment/moment/issues/1548",function(){var e=Te.apply(null,arguments);return this>e?this:e}),bi=Z("moment().max is deprecated, use moment.max instead. https://github.com/moment/moment/issues/1548",function(){var e=Te.apply(null,arguments);return e>this?this:e});Oe("Z",":"),Oe("ZZ",""),L("Z",Xn),L("ZZ",Xn),U(["Z","ZZ"],function(e,t,n){n._useUTC=!0,n._tzm=Ae(e)});var wi=/([\+\-]|\d\d)/gi;t.updateOffset=function(){};var ki=/(\-)?(?:(\d*)\.)?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?)?/,xi=/^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/;Je.fn=Ee.prototype;var Si=Xe(1,"add"),Ci=Xe(-1,"subtract");t.defaultFormat="YYYY-MM-DDTHH:mm:ssZ";var $i=Z("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(e){return void 0===e?this.localeData():this.locale(e)});O(0,["gg",2],0,function(){return this.weekYear()%100}),O(0,["GG",2],0,function(){return this.isoWeekYear()%100}),Tt("gggg","weekYear"),Tt("ggggg","weekYear"),Tt("GGGG","isoWeekYear"),Tt("GGGGG","isoWeekYear"),C("weekYear","gg"),C("isoWeekYear","GG"),L("G",Kn),L("g",Kn),L("GG",Wn,Vn),L("gg",Wn,Vn),L("GGGG",Jn,zn),L("gggg",Jn,zn),L("GGGGG",Gn,Yn),L("ggggg",Gn,Yn),V(["gggg","ggggg","GGGG","GGGGG"],function(e,t,n,i){t[i.substr(0,2)]=m(e)}),V(["gg","GG"],function(e,n,i,r){n[r]=t.parseTwoDigitYear(e)}),O("Q",0,0,"quarter"),C("quarter","Q"),L("Q",Un),U("Q",function(e,t){t[ri]=3*(m(e)-1)}),O("D",["DD",2],"Do","date"),C("date","D"),L("D",Wn),L("DD",Wn,Vn),L("Do",function(e,t){return e?t._ordinalParse:t._ordinalParseLenient}),U(["D","DD"],ai),U("Do",function(e,t){t[ai]=m(e.match(Wn)[0],10)});var Ti=P("Date",!0);O("d",0,"do","day"),O("dd",0,0,function(e){return this.localeData().weekdaysMin(this,e)}),O("ddd",0,0,function(e){return this.localeData().weekdaysShort(this,e)}),O("dddd",0,0,function(e){return this.localeData().weekdays(this,e)}),O("e",0,0,"weekday"),O("E",0,0,"isoWeekday"),C("day","d"),C("weekday","e"),C("isoWeekday","E"),L("d",Wn),L("e",Wn),L("E",Wn),L("dd",ei),L("ddd",ei),L("dddd",ei),V(["dd","ddd","dddd"],function(e,t,n){var i=n._locale.weekdaysParse(e);null!=i?t.d=i:u(n).invalidWeekday=e}),V(["d","e","E"],function(e,t,n,i){t[i]=m(e)});var Pi="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),Di="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),Mi="Su_Mo_Tu_We_Th_Fr_Sa".split("_");O("H",["HH",2],0,"hour"),O("h",["hh",2],0,function(){return this.hours()%12||12}),Vt("a",!0),Vt("A",!1),C("hour","h"),L("a",Bt),L("A",Bt),L("H",Wn),L("h",Wn),L("HH",Wn,Vn),L("hh",Wn,Vn),U(["H","HH"],si),U(["a","A"],function(e,t,n){n._isPm=n._locale.isPM(e),n._meridiem=e}),U(["h","hh"],function(e,t,n){t[si]=m(e),u(n).bigHour=!0});var Ei=/[ap]\.?m?\.?/i,Ii=P("Hours",!0);O("m",["mm",2],0,"minute"),C("minute","m"),L("m",Wn),L("mm",Wn,Vn),U(["m","mm"],oi);var Oi=P("Minutes",!1);O("s",["ss",2],0,"second"),C("second","s"),L("s",Wn),L("ss",Wn,Vn),U(["s","ss"],li);var Ai=P("Seconds",!1);O("S",0,0,function(){return~~(this.millisecond()/100)}),O(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),Wt("SSS"),Wt("SSSS"),C("millisecond","ms"),L("S",qn,Un),L("SS",qn,Vn),L("SSS",qn,Bn),L("SSSS",Qn),U(["S","SS","SSS","SSSS"],function(e,t){t[ci]=m(1e3*("0."+e))});var Ri=P("Milliseconds",!1);O("z",0,0,"zoneAbbr"),O("zz",0,0,"zoneName");var Ni=f.prototype;Ni.add=Si,Ni.calendar=et,Ni.clone=tt,Ni.diff=ot,Ni.endOf=yt,Ni.format=dt,Ni.from=ht,Ni.fromNow=pt,Ni.to=ft,Ni.toNow=gt,Ni.get=E,Ni.invalidAt=$t,Ni.isAfter=nt,Ni.isBefore=it,Ni.isBetween=rt,Ni.isSame=at,Ni.isValid=St,Ni.lang=$i,Ni.locale=mt,Ni.localeData=vt,Ni.max=bi,Ni.min=yi,Ni.parsingFlags=Ct,Ni.set=E,Ni.startOf=_t,Ni.subtract=Ci,Ni.toArray=xt,Ni.toDate=kt,Ni.toISOString=ut,Ni.toJSON=ut,Ni.toString=ct,Ni.unix=wt,Ni.valueOf=bt,Ni.year=vi,Ni.isLeapYear=oe,Ni.weekYear=Dt,Ni.isoWeekYear=Mt,Ni.quarter=Ni.quarters=Ot,Ni.month=G,Ni.daysInMonth=Q,Ni.week=Ni.weeks=he,Ni.isoWeek=Ni.isoWeeks=pe,Ni.weeksInYear=It,Ni.isoWeeksInYear=Et,Ni.date=Ti,Ni.day=Ni.days=Ft,Ni.weekday=Ht,Ni.isoWeekday=Ut,Ni.dayOfYear=ge,Ni.hour=Ni.hours=Ii,Ni.minute=Ni.minutes=Oi,Ni.second=Ni.seconds=Ai,Ni.millisecond=Ni.milliseconds=Ri,Ni.utcOffset=je,Ni.utc=Fe,Ni.local=He,Ni.parseZone=Ue,Ni.hasAlignedHourOffset=Ve,Ni.isDST=Be,Ni.isDSTShifted=ze,Ni.isLocal=Ye,Ni.isUtcOffset=We,Ni.isUtc=qe,Ni.isUTC=qe,Ni.zoneAbbr=qt,Ni.zoneName=Jt,Ni.dates=Z("dates accessor is deprecated. Use date instead.",Ti),Ni.months=Z("months accessor is deprecated. Use month instead",G),Ni.years=Z("years accessor is deprecated. Use year instead",vi),Ni.zone=Z("moment().zone is deprecated, use moment().utcOffset instead. https://github.com/moment/moment/issues/1779",Le);var ji=Ni,Li={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},Fi={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY LT",LLLL:"dddd, MMMM D, YYYY LT"
},Hi="Invalid date",Ui="%d",Vi=/\d{1,2}/,Bi={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},zi=_.prototype;zi._calendar=Li,zi.calendar=Kt,zi._longDateFormat=Fi,zi.longDateFormat=Xt,zi._invalidDate=Hi,zi.invalidDate=Zt,zi._ordinal=Ui,zi.ordinal=en,zi._ordinalParse=Vi,zi.preparse=tn,zi.postformat=tn,zi._relativeTime=Bi,zi.relativeTime=nn,zi.pastFuture=rn,zi.set=an,zi.months=Y,zi._months=ui,zi.monthsShort=W,zi._monthsShort=di,zi.monthsParse=q,zi.week=ce,zi._week=_i,zi.firstDayOfYear=de,zi.firstDayOfWeek=ue,zi.weekdays=Rt,zi._weekdays=Pi,zi.weekdaysMin=jt,zi._weekdaysMin=Mi,zi.weekdaysShort=Nt,zi._weekdaysShort=Di,zi.weekdaysParse=Lt,zi.isPM=zt,zi._meridiemParse=Ei,zi.meridiem=Yt,k("en",{ordinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var t=e%10,n=1===m(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th";return e+n}}),t.lang=Z("moment.lang is deprecated. Use moment.locale instead.",k),t.langData=Z("moment.langData is deprecated. Use moment.localeData instead.",S);var Yi=Math.abs,Wi=kn("ms"),qi=kn("s"),Ji=kn("m"),Gi=kn("h"),Qi=kn("d"),Ki=kn("w"),Xi=kn("M"),Zi=kn("y"),er=Sn("milliseconds"),tr=Sn("seconds"),nr=Sn("minutes"),ir=Sn("hours"),rr=Sn("days"),ar=Sn("months"),sr=Sn("years"),or=Math.round,lr={s:45,m:45,h:22,d:26,M:11},cr=Math.abs,ur=Ee.prototype;ur.abs=pn,ur.add=gn,ur.subtract=mn,ur.as=bn,ur.asMilliseconds=Wi,ur.asSeconds=qi,ur.asMinutes=Ji,ur.asHours=Gi,ur.asDays=Qi,ur.asWeeks=Ki,ur.asMonths=Xi,ur.asYears=Zi,ur.valueOf=wn,ur._bubble=vn,ur.get=xn,ur.milliseconds=er,ur.seconds=tr,ur.minutes=nr,ur.hours=ir,ur.days=rr,ur.weeks=Cn,ur.months=ar,ur.years=sr,ur.humanize=Dn,ur.toISOString=Mn,ur.toString=Mn,ur.toJSON=Mn,ur.locale=mt,ur.localeData=vt,ur.toIsoString=Z("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",Mn),ur.lang=$i,O("X",0,0,"unix"),O("x",0,0,"valueOf"),L("x",Kn),L("X",Zn),U("X",function(e,t,n){n._d=new Date(1e3*parseFloat(e,10))}),U("x",function(e,t,n){n._d=new Date(m(e))}),t.version="2.10.3",n(Te),t.fn=ji,t.min=De,t.max=Me,t.utc=l,t.unix=Gt,t.months=ln,t.isDate=r,t.locale=k,t.invalid=h,t.duration=Je,t.isMoment=g,t.weekdays=un,t.parseZone=Qt,t.localeData=S,t.isDuration=Ie,t.monthsShort=cn,t.weekdaysMin=hn,t.defineLocale=x,t.weekdaysShort=dn,t.normalizeUnits=$,t.relativeTimeThreshold=Pn;var dr=t;return dr})}).call(t,n(12)(e))},12:function(e){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children=[],e.webpackPolyfill=1),e}},13:function(e,t,n){n(2);var i=angular.module("Events.EventsServices",["RPM.RPMServices"]);i.factory("EventsService",n(32)),i.service("EventFilteringService",n(33))},15:function(e){e.exports=function(e){var t={},n=e.NREUM||{noticeError:function(){}},i=e.RPM||{};return t.timeWindowObject=function(){return i.time_window||{}},t.timeWindowParamsForAngularResource=function(){var e={};return Object.keys(t.timeWindowObject()).forEach(function(t){e["tw["+t+"]"]=i.time_window[t]}),e},t.accountId=function(){return i.context.account_id},t.applicationId=function(){return i.context.application_id},t.flashError=function(e,t,r,a){e=e||"",t=t||"",r=r||{};var s=(r.status||"")+" "+(r.statusText||""),o=JSON.stringify(r.data||{});i.newrelic_admin?i.add_flash_message("error",e+"_error",i.ADMIN_AJAX_ERROR(s+": "+t,o),!0):i.add_flash_message("error",e+"_error",i.GENERIC_AJAX_ERROR,!0),a&&n.noticeError&&n.noticeError(new Error(t))},t.addMethod=function(e,n){t[e]=n,i[e]=n},t.noticeError=n.noticeError,t.NREUM=n,t.RPM=i,angular.extend(t,i)},e.exports.$inject=["$window"]},16:function(){angular.module("rpmConstants",[]).constant("currentUser",{id:RPM.user_id,hasAccountView:RPM.user_has_account_view,isRestricted:!RPM.is_not_restricted_user,isAdmin:RPM.has_admin_on_account,isAccountAdmin:RPM.has_account_admin_on_account,timezoneOffset:RPM.time_zone_offset,capabilities:RPM.user_capabilities||[]}).constant("account",{id:RPM.account_id}).constant("context",RPM.context||{}).constant("features",RPM.features||{}).constant("feature_switches",{megamap_time_window:RPM.megamap_time_window,aws_view:RPM.aws_view}).constant("entity",{name:RPM.application_name}).constant("tessen",RPM.tessen||{})},20:function(e,t,n){n(13),n(29),n(26);var i=angular.module("Events",["Events.EventsControllers","Events.EventsServices","Events.EventsDirectives"]);e.exports={bootstrap:function(e,t){i.value("RecentEventParams",t),angular.bootstrap(e,["Events"])}}},22:function(e){e.exports=function(){return function(e){return function(){var e;return e=[],e.push("<div class='filters' ng-if='showFilters'>\n  <form class='form formtastic small'>\n    <fieldset class='inputs'>\n      <ol>\n        <li class='check_boxes field'>\n          <ol>\n            <li>\n              <label>\n                <input type='checkbox' ng-model='filters.all' ng-change='toggleFilters()'>\n                All\n              </label>\n            </li>\n            <li>\n              <label>\n                <input type='checkbox' ng-model='filters.critical' ng-change='filters.all = false'>\n                Critical violation events\n              </label>\n            </li>\n            <li>\n              <label>\n                <input type='checkbox' ng-model='filters.warning' ng-change='filters.all = false'>\n                Warning violation events\n              </label>\n            </li>\n            <li ng-if=\"display === 'list'\">\n              <label>\n                <input type='checkbox' ng-model='filters.deployment' ng-change='filters.all = false'>\n                Deployments\n              </label>\n            </li>\n            <li ng-if=\"display === 'list'\">\n              <label>\n                <input type='checkbox' ng-model='filters.settings' ng-change='filters.all = false'>\n                Settings changes\n              </label>\n            </li>\n            <li ng-if=\"display === 'list'\">\n              <label>\n                <input type='checkbox' ng-model='filters.instrumentation' ng-change='filters.all = false'>\n                Instrumentations\n              </label>\n            </li>\n          </ol>\n        </li>\n      </ol>\n    </fieldset>\n  </form>\n</div>"),e.join("\n").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(e)}}.call(this)},23:function(e){e.exports=function(){return function(e){return function(){var e;return e=[],e.push("<li class='event' ng-class='severity'>\n  <p class='event_time'>{{ event.timestamp | formattedDate }}</p>\n  <p class='event_title'>{{ event.title || '&nbsp;' }}</p>\n  <p class='event_target_name'>{{ event.attributes.target_name || '&nbsp;' }}</p>\n  <p class='event_description'>\n    <a ng-href='{{ link }}' title='{{ event.condition_name }}'>{{ event.description || '&nbsp;' }}</a>\n  </p>\n</li>"),e.join("\n").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(e)}}.call(this)},24:function(e){e.exports=function(){return function(e){return function(){var e;return e=[],e.push("<div class='event_list'>\n  <div class='filtering_menu' ng-hide='data.serverErrors'>\n    <ul class='filtering_options'>\n      <li ng-class=\"{ selected: display === 'open' }\">\n        <a href='' ng-click=\"display = 'open'\">In progress\n          <span class='count' ng-hide='!inProgress() || inProgress().length === 0'>({{ inProgress().length }})</span>\n        </a>\n      </li>\n      <li ng-class=\"{ selected: display === 'list' }\">\n        <a href='' ng-click=\"display = 'list'\">Event log</a>\n      </li>\n      <li class='no_border with_icon' ng-class=\"{ 'activated': filterCount() > 0, 'selected': showFilters }\">\n        <a href='' ng-click='showFilters = !showFilters'>Filter</a>\n      </li>\n    </ul>\n    <nr-event-filters show-filters='showFilters' filters='filters' display='display'></nr-event-filters>\n  </div>\n  <div class='events' ng-hide='data.serverErrors'>\n    <div class='list violations' ng-if='showInProgress()'>\n      <ol class='events'>\n        <nrevent ng-repeat='violation in data.violations | filter:filter' event='violation'></nrevent>\n      </ol>\n    </div>\n    <div class='list recent_events' ng-if='showLog()'>\n      <ol class='events'>\n        <nrevent ng-repeat='event in data.events | filter:filter' event='event'></nrevent>\n      </ol>\n    </div>\n    <div class='list no_events' ng-if='noEventsInProgress()'>\n      <div class='jumbo_icon_tagline'>\n        <div class='jumbo_icon'>\n          <i class='icon-nr-smile'></i>\n        </div>\n        <div class='tagline'>\n          There are no violations in progress right now.\n        </div>\n      </div>\n    </div>\n    <div class='list no_events' ng-if='noEvents()'>\n      <div class='jumbo_icon_tagline'>\n        <div class='jumbo_icon'>\n          <i class='icon-nr-smile'></i>\n        </div>\n        <div class='tagline' ng-if='!data.timeWindowClamped'>\n          There are no recent events.\n        </div>\n        <div class='tagline' ng-if='data.timeWindowClamped && data.timeWindowSet'>\n          There are no events in the specified time window.\n        </div>\n        <div class='tagline' ng-if='data.timeWindowClamped && !data.timeWindowSet'>\n          There are no events in the last 3 days.\n        </div>\n      </div>\n    </div>\n    <div class='list no_filtered_events' ng-if='noFilteredEvents()'>\n      <div class='jumbo_icon_tagline'>\n        <div class='jumbo_icon'>\n          <i class='icon-nr-ghost'></i>\n        </div>\n        <div class='tagline'>\n          No activity matches.\n        </div>\n      </div>\n    </div>\n  </div>\n  <div class='events' ng-if='data.serverErrors'>\n    <div class='list unavailable'>\n      <div class='jumbo_icon_tagline'>\n        <div class='jumbo_icon'>\n          <h2>(\u256f\xb0\u25a1\xb0\uff09\u256f\ufe35&nbsp;&nbsp;\u253b\u2501\u253b</h2>\n        </div>\n        <div class='tagline'>\n          Recent events are temporarily unavailable.\n        </div>\n      </div>\n    </div>\n  </div>\n</div>"),e.join("\n").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(e)}}.call(this)},25:function(e){e.exports=function(e,t,n,i,r){e.data=r.data;var a,s=!0,o=0,l=2,c=12e4,u={};try{u=t.get("RecentEventParams")}catch(d){}e.data.isLoading=!0,e.fetch=function(){u.size=u.size||50,i.RPM.features.hawthorne_event_widget_time_clamp?(e.data.timeWindowClamped=!0,i.RPM.time_window_picker_showing&&void 0!==i.RPM.fixed_time_window?(e.data.timeWindowSet=!0,u.from=u.from||i.RPM.fixed_time_window.start,u.to=u.to||i.RPM.fixed_time_window.end):e.data.timeWindowSet=!1):e.data.timeWindowClamped=!1,r.fetch(u).then(function(){o=0,s=!1,e.data.serverErrors=!1,i.remove_flash_message("hawthorne_recent_events",!0)})["catch"](function(){o++,(s||o>=l)&&(e.data.serverErrors=!0,i.remove_flash_message("hawthorne_recent_events",!0),i.add_flash_message("error","hawthorne_recent_events","There was a problem retrieving recent events.",!0))})},e.poll=function(t,r){n.cancel(t),e.fetch(),"Server"==u.target_type||i.aws_view||(t=n(e.fetch,r))},e.poll(a,c)},e.exports.$inject=["$scope","$injector","$interval","RPMService","EventsService"]},26:function(e,t,n){n(2),n(13);var i=angular.module("Events.EventsControllers",["RPM.RPMServices","Events.EventsServices"]);i.controller("RecentEventsController",n(25))},27:function(e,t,n){e.exports=function(e){return{restrict:"E",template:n(23),replace:!0,scope:{event:"="},link:function(t){var n=t.event,i=["none","info","caution","critical","unknown"],r=n.attributes&&n.attributes.priority||0;t.severity=i[r],n.event_type&&n.event_type.indexOf("_CLOSE")>-1&&(t.severity="info"),t.link=n.link||"","critical"===i[r]&&n.attributes&&n.attributes.account_incident_id&&(t.link=e.URL(e.config.alerts_domain+"/accounts/ACCOUNT_ID/incidents/"+n.attributes.account_incident_id),n.attributes.account_violation_id&&(t.link+="/violations/"+n.attributes.account_violation_id))}}},e.exports.$inject=["RPMService","EventsService"]},28:function(e,t,n){e.exports=function(e,t){return{restrict:"E",template:n(24),replace:!0,scope:{data:"="},link:function(e){function n(){var t=_.keys(e.filters),n=t.indexOf("all");t.splice(n,1),_.each(t,function(t){e.filters[t]=!1})}e.display="open",e.filters={all:!0},e.hasFilters=function(){return!e.data.isLoading&&e.filterCount()>0},e.noEventsInProgress=function(){return!e.data.serverErrors&&!e.data.isLoading&&"open"===e.display&&0===e.inProgress().length},e.noEvents=function(){var t=!e.data.events||e.data.events&&0===e.data.events.length;return!e.data.serverErrors&&!e.data.isLoading&&"list"===e.display&&t},e.showLog=function(){return!e.data.isLoading&&"list"===e.display&&e.data.events&&e.data.events.length>0},e.showInProgress=function(){return!e.data.isLoading&&"open"===e.display&&e.inProgress().length>0},e.noFilteredEvents=function(){return!e.noEvents()&&e.hasFilters()&&!e.hasMatches()},e.hasMatches=function(){var n;return e.showLog()?n=e.data.events:e.showInProgress()&&(n=e.inProgress()),_.some(n,function(n){return t.matchesFilters(n,e.filters)})},e.inProgress=function(){return e.data.violations},e.filter=function(n){return e.filters.all||e.noFilters()?n:t.matchesFilters(n,e.filters)},e.toggleFilters=function(){e.filters.all&&n()},e.noFilters=function(){return!_.contains(_.values(e.filters),!0)},e.filterCount=function(){var t=_.clone(e.filters);delete t.all;var n=_.values(t),i=_.countBy(n,function(e){return e?"true":"false"});return i["true"]}}}},e.exports.$inject=["$filter","EventFilteringService"]},29:function(e,t,n){n(13),n(9);var i=angular.module("Events.EventsDirectives",["Events.EventsServices","StringFormatFilters"]);i.directive("nrevents",n(28)),i.directive("nrevent",n(27)),i.directive("nrEventFilters",n(30))},30:function(e,t,n){e.exports=function(){return{restrict:"E",template:n(22),replace:!0,scope:{showFilters:"=",filters:"=",display:"="},link:function(){}}}},31:function(){angular.module("NumberFilters",[]).filter("numberToHuman",function(){return function(t,n){return void 0===t||isNaN(t)?t:(t=parseFloat(t),1e3>=t?t=e(t):t>1e3&&1e6>t?(t=parseFloat(t.toPrecision(3)),t/=1e3,"ms"===n?n="s":t+="k"):t>=1e6&&(t=parseFloat(t.toPrecision(3)),t/=1e6,"ms"===n?(t+="k",n="s"):t+="M"),void 0!==n&&(t=t+" "+n),t)}}).filter("smartRound",function(){return e}).filter("formatNumber",["$filter",function(t){return function(n){return isNaN(n)?n:t("number")(e(n))}}]).filter("numberToPercentage",function(){return function(e,n){return void 0===e?e:(e*=100,t(e,n))}}).filter("formatBytes",function(){return function(e){if(void 0===e)return e;for(var t=["bytes","KB","MB","GB","TB"],n=0;e>1024;)e/=1024,n++;return e.toFixed(0)+" "+t[n]}}).filter("formatPercentage",function(){return t}).filter("secondsToMs",function(){return function(t){return e(1e3*t)}});var e=function(e){var t=3,n=Math.abs(e);if(isNaN(n)||0===e)return e;var i=n===e?1:-1,r=Math.pow(10,t-Math.floor(Math.log(n)/Math.LN10)-1);return i*(Math.round(n*r)/r)},t=function(e,t){if(void 0===e)return e;e=e.toFixed(2);var n=e.substring(e.length-3);return".00"===n?e=e.substring(0,e.length-3):"0"===n[2]&&(e=e.substring(0,e.length-1)),t||(e+="%"),e}},32:function(e){e.exports=function(e,t,n){function i(){a.data.events.forEach(function(e){e.event_type.match(/VIOLATION/)&&(e.description=e.attributes.details,e.condition_name=e.attributes.condition_name)})}function r(){var e={WARN:"2",CRITICAL:"3"},t={WARN:"WARNING",CRITICAL:"CRITICAL"};a.data.violations.forEach(function(n){n.attributes=n.attributes||{},n.attributes.priority=e[n.severity],n.attributes.target_name=n.target.name,n.attributes.violation_id=n.id,n.attributes.account_incident_id=n.account_incident_id,n.description=n.label,n.link=n.callback_url,n.title=t[n.severity]+" VIOLATION OPEN",n.timestamp=n.opened_at,n.event_type="VIOLATION_OPEN"})}var a={};return a.url=n.URL("/accounts/ACCOUNT_ID/events.json"),a.violationsUrl=n.URL("/accounts/ACCOUNT_ID/violations.json"),a.data={},a.fetch=function(n){var s={params:n?angular.copy(n):{}};s.params.omit_total=!0,s.responseType="json";var o=e.defer(),l=t.get(a.url,s),c=angular.copy(s);c.params.only_open=!0;var u=t.get(a.violationsUrl,c),d={recent_events:l,violations:u};return e.all(d).then(function(e){var t=e.recent_events.data||{};a.data.events=t.recent_events||[],i();var n=e.violations.data||{};a.data.violations=n.violation_summaries||[],r(),o.resolve()})["catch"](function(e){o.reject(e)})["finally"](function(){a.data.isLoading=!1}),o.promise},a},e.exports.$inject=["$q","$http","RPMService"]},33:function(e){e.exports=function(){function e(e,t){var i=[];return t.critical&&i.push("critical"),t.warning&&i.push("warning"),_.some(i,function(t){return _.contains(n.filterToTypes[t],e.event_type)&&e.attributes.priority===n.severities[t]})}function t(e,t){var i=_.clone(t);delete i.critical,delete i.warning;var r=_.map(i,function(e,t){return e?t:void 0});return _.some(r,function(t){return _.contains(n.filterToTypes[t],e.event_type)})}var n={};return n.types={deployment:"DEPLOYMENT",violationOpen:"VIOLATION_OPEN",violationClosed:"VIOLATION_CLOSE",settings:"SETTINGS_CHANGE",instrumentation:"INSTRUMENTATION"},n.filterToTypes={critical:[n.types.violationOpen,n.types.violationClosed],warning:[n.types.violationOpen,n.types.violationClosed],deployment:[n.types.deployment],settings:[n.types.settings],instrumentation:[n.types.instrumentation]},n.severities={critical:"3",warning:"2"},n.matchesFilters=function(n,i){return(i.critical||i.warning)&&e(n,i)?!0:t(n,i)},n}},49:function(){angular.module("ArrayUtilsService",[]).factory("arrayUtils",function(){var e={flattenTree:function(e,t,n){void 0===n&&(n=1);var i=0,r=[],a=0;if(void 0===t&&(t=[]),!e)return t;var s=function(e,o){if(a++,e.id||(e.id=++i),t.includes(e)||(t.push(e),o&&r.push({source:o,target:e})),e.children&&n>=a)for(var l=0;l<e.children.length;l++){var c=e.children[l];t.includes(c)||s(c,e)}a--},o=function(e,s){if(a++,e.id||(e.id=++i),t.includes(e)||(t.push(e),s&&r.push({source:e,target:s})),e.parents&&n>=a)for(var l=0;l<e.parents.length;l++){var c=e.parents[l];t.includes(c)||o(c,e)}a--};return s(e),o(e),{nodes:t,links:r}},intersect:function(e){e=this.sortFromSmallestToLargest(e);for(var t=e[0],n=[],i=0;i<t.length;i++){var r=t[i];this.allHaveValue(e,r)&&n.push(r)}return n},hasUnion:function(e){if(e=this.sortFromSmallestToLargest(e),e.length>2){var t=e.reduce(function(e,t){return e.union(t)});return t.length>0}return this.any(e[0],function(t){return this.any(e[1],function(e){return t===e})})},sortFromSmallestToLargest:function(e){return e.sort(function(e,t){return e.length-t.length})},allHaveValue:function(e,t){for(var n=0;n<e.length;n++){for(var i=e[n],r=i.length,a=!1,s=0;r>s;s++)if(i[s]===t){a=!0;break}if(a===!1)return!1}return!0},select:function(e,t,n){var i,r=[];void 0===n&&(n=this);for(var a in e)a===parseInt(a)&&(i=e[a],t.call(n,i,a,e)&&r.push(i));return r},reject:function(e,t,n){var i,r=[];void 0===n&&(n=this);for(var a in e)a===parseInt(a)&&(i=e[a],t.call(n,i,a,e)||r.push(i));return r},any:function(e,t,n){void 0===n&&(n=this);for(var i in e)if(i===parseInt(i)&&t.call(n,e[i],i,e))return!0;return!1},concatChildArrays:function(e,t,n){for(var i=[],r=function(e,t){if(void 0===e)return[];var n=e[t[0]];return void 0===n?[]:1===t.length?n:r(n,t.slice(1))},a=0;a<e.length;a++){var s=r(e[a],t);if(n)for(var o=0;o<s.length;o++)-1===i.indexOf(s[o])&&i.push(s[o]);else i=i.concat(s)}return i},spliceArrayIntoArray:function(e,t){e.unshift(t.length,e.length),[].splice.apply(t,e),e.shift(),e.shift()},cssSafeString:function(e){return String(e).replace(/[!\"#$%&'\(\)\*\+,\.\/:;<=>\?\@\[\\\]\^`\{\|\}~]/g,"-")},chunk:function(e,t){for(var n=[];e.length>t;)n.push(e.splice(0,t));return n.push(e),n},fuzzySearch:function(e,t,n){if(0===e.length||0===t.length||0===n.length)return[];var i=[],r=(t+"").toLowerCase().replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&").split(" ");return _.each(e,function(e){var t,a;_.each(n,function(n){t=(e[n]?e[n]+"":"").toLowerCase(),a=_.every(r,function(e){return-1!==t.search(e)}),a&&!_.contains(i,e)&&i.push(e)})}),i}};return e})},54:function(e,t,n){n(67),angular.module("HawthorneServices",["BatchServices"]).factory("AlertTarget",function(){function e(e){this.update(e)}return e.prototype.update=function(e){this.accountID=e.account_id,this.product=e.product,this.type=e.type,this.groupID=e.group_id,this.instanceID=e.instance_id,this.name=e.name},e}).service("HealthStatusService",function(){return{trafficLight:function(e){switch(e){case 3:return"red";case 2:return"orange";case 1:return"green";case-1:return"unavailable";default:return"unknown"}}}}).factory("ViolationSummary",function(){function e(e){this.update(e)}return e.prototype.update=function(e){for(var t in e)this[t]=e[t]},e.prototype.id=function(){return this.external_id},e.prototype.statusCode=function(){return this.statuses[-1]?-1:this.statuses[3]?3:this.statuses[2]?2:1},e.prototype.status=function(){return this.statuses[3]||this.statuses[2]},e.prototype.severity=function(){return this.statuses[3]?"critical":this.statuses[2]?"warning":void 0},e.prototype.message=function(){return this.status().label},e.prototype.date=function(){return this.status().opened_at},e.prototype.total=function(){return parseInt(this.status().total,10)},e.prototype.criticalCount=function(){return this.statuses[3]?parseInt(this.statuses[3].total,10):0},e.prototype.warningCount=function(){return this.statuses[2]?parseInt(this.statuses[2].total,10):0},e}).service("ViolationSummaries",["$http",function(e){return{get:function(t,n){return e.get("/accounts/"+t+"/violations/summary",{params:n})}}}]).service("ViolationSummaryService",["$q","$timeout","$rootScope","account","BatchDatastore","ViolationSummaries","ViolationSummary",function(e,t,n,i,r,a,s){var o,l={},c=1,u=100,d=12e4,h=!0,p=!0,f=0,g=2,m=!1,v=function(e,t,n){return e+"-"+t+"-"+n};this.load=function(e,n,i,a){var s,o=v(e,n,i);return a?(s=new r(parseInt(a.total,10)),w(s,a.target_summaries),s.notify()):s=new r,l[o]=s,t(function(){_(e,n,i,s)},0),s.promise()},this.find=function(e,t,n,i){var r=l[v(e,t,n)];return r?m?new s({external_id:i,statuses:{"-1":[]}}):r.find(i):void 0},this.all=function(e,t,n){var i=l[v(e,t,n)];return i?i.all():void 0},this.setBatchRefreshMode=function(e){h=e};var _=function(e,t,n,i){c=Math.ceil(i.totalCount()/u)>1?2:1,i.start();for(var r=0;c>r;r++)y(e,t,n,r,i)},y=function(e,t,n,i,r){a.get(e,{target_product:t,target_type:n,page:i,size:u}).success(function(i){f=0,m=!1,p=!1,RPM.remove_flash_message("refreshViolationSummaryData",!0),b(e,t,n,r,i)}).error(function(i,a){403===a?document.location.reload():(503===a&&(f++,m=p||f>=g),RPM.add_flash_message("error","refreshViolationSummaryData","An error occurred while attempting to automatically refresh alert violation data.  Fetching will continue in the background.",!0),k(e,t,n,r))})},b=function(e,t,n,i,r){var a=parseInt(r.page,10),s=parseInt(r.total,10),o=Math.ceil(s/u-1),l=a+c;a>o||(i.pageReceivedWithTotal(s),w(i,r.target_summaries),i.notify(),i.pagesReceived()===o+1?(i.clearStale(),k(e,t,n,i)):i.pagesReceived()<o+1&&y(e,t,n,l,i))},w=function(e,t){var n;if(t)for(var i=0,r=t.length;r>i;i++)n=t[i],e.exists(n.external_id)?e.update(n,n.external_id):e.add(new s(n))},k=function(e,n,i,r){if(h){var a=d-((new Date).getTime()-r.startTime());t.cancel(o),o=t(function(){_(e,n,i,r)},a)}}}])},55:function(){angular.module("ui.bootstrap",["ui.bootstrap.tpls","ui.bootstrap.transition","ui.bootstrap.collapse","ui.bootstrap.accordion","ui.bootstrap.alert","ui.bootstrap.bindHtml","ui.bootstrap.buttons","ui.bootstrap.carousel","ui.bootstrap.dateparser","ui.bootstrap.position","ui.bootstrap.datepicker","ui.bootstrap.dropdown","ui.bootstrap.modal","ui.bootstrap.pagination","ui.bootstrap.tooltip","ui.bootstrap.popover","ui.bootstrap.progressbar","ui.bootstrap.rating","ui.bootstrap.tabs","ui.bootstrap.timepicker","ui.bootstrap.typeahead"]),angular.module("ui.bootstrap.tpls",["template/accordion/accordion-group.html","template/accordion/accordion.html","template/alert/alert.html","template/carousel/carousel.html","template/carousel/slide.html","template/datepicker/datepicker.html","template/datepicker/day.html","template/datepicker/month.html","template/datepicker/popup.html","template/datepicker/year.html","template/modal/backdrop.html","template/modal/window.html","template/pagination/pager.html","template/pagination/pagination.html","template/tooltip/tooltip-html-unsafe-popup.html","template/tooltip/tooltip-popup.html","template/popover/popover.html","template/progressbar/bar.html","template/progressbar/progress.html","template/progressbar/progressbar.html","template/rating/rating.html","template/tabs/tab.html","template/tabs/tabset.html","template/timepicker/timepicker.html","template/typeahead/typeahead-match.html","template/typeahead/typeahead-popup.html"]),angular.module("ui.bootstrap.transition",[]).factory("$transition",["$q","$timeout","$rootScope",function(e,t,n){function i(e){for(var t in e)if(void 0!==a.style[t])return e[t]}var r=function(i,a,s){s=s||{};var o=e.defer(),l=r[s.animation?"animationEndEventName":"transitionEndEventName"],c=function(){n.$apply(function(){i.unbind(l,c),o.resolve(i)})};return l&&i.bind(l,c),t(function(){angular.isString(a)?i.addClass(a):angular.isFunction(a)?a(i):angular.isObject(a)&&i.css(a),l||o.resolve(i)}),o.promise.cancel=function(){l&&i.unbind(l,c),o.reject("Transition cancelled")},o.promise},a=document.createElement("trans"),s={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd",transition:"transitionend"},o={WebkitTransition:"webkitAnimationEnd",MozTransition:"animationend",OTransition:"oAnimationEnd",transition:"animationend"};return r.transitionEndEventName=i(s),r.animationEndEventName=i(o),r}]),angular.module("ui.bootstrap.collapse",["ui.bootstrap.transition"]).directive("collapse",["$transition",function(e){return{link:function(t,n,i){function r(t){function i(){c===r&&(c=void 0)}var r=e(n,t);return c&&c.cancel(),c=r,r.then(i,i),r}function a(){u?(u=!1,s()):(n.removeClass("collapse").addClass("collapsing"),r({height:n[0].scrollHeight+"px"}).then(s))}function s(){n.removeClass("collapsing"),n.addClass("collapse in"),n.css({height:"auto"})}function o(){u?(u=!1,l(),n.css({height:0})):(n.css({height:n[0].scrollHeight+"px"}),n[0].offsetWidth,n.removeClass("collapse in").addClass("collapsing"),r({height:0}).then(l))}function l(){n.removeClass("collapsing"),n.addClass("collapse")}var c,u=!0;t.$watch(i.collapse,function(e){e?o():a()})}}}]),angular.module("ui.bootstrap.accordion",["ui.bootstrap.collapse"]).constant("accordionConfig",{closeOthers:!0}).controller("AccordionController",["$scope","$attrs","accordionConfig",function(e,t,n){this.groups=[],this.closeOthers=function(i){var r=angular.isDefined(t.closeOthers)?e.$eval(t.closeOthers):n.closeOthers;r&&angular.forEach(this.groups,function(e){e!==i&&(e.isOpen=!1)})},this.addGroup=function(e){var t=this;this.groups.push(e),e.$on("$destroy",function(){t.removeGroup(e)})},this.removeGroup=function(e){var t=this.groups.indexOf(e);-1!==t&&this.groups.splice(t,1)}}]).directive("accordion",function(){return{restrict:"EA",controller:"AccordionController",transclude:!0,replace:!1,templateUrl:"template/accordion/accordion.html"}}).directive("accordionGroup",function(){return{require:"^accordion",restrict:"EA",transclude:!0,replace:!0,templateUrl:"template/accordion/accordion-group.html",scope:{heading:"@",isOpen:"=?",isDisabled:"=?"},controller:function(){this.setHeading=function(e){this.heading=e}},link:function(e,t,n,i){i.addGroup(e),e.$watch("isOpen",function(t){t&&i.closeOthers(e)}),e.toggleOpen=function(){e.isDisabled||(e.isOpen=!e.isOpen)}}}}).directive("accordionHeading",function(){return{restrict:"EA",transclude:!0,template:"",replace:!0,require:"^accordionGroup",link:function(e,t,n,i,r){i.setHeading(r(e,function(){}))}}}).directive("accordionTransclude",function(){return{require:"^accordionGroup",link:function(e,t,n,i){e.$watch(function(){return i[n.accordionTransclude]},function(e){e&&(t.html(""),t.append(e))})}}}),angular.module("ui.bootstrap.alert",[]).controller("AlertController",["$scope","$attrs",function(e,t){e.closeable="close"in t,this.close=e.close}]).directive("alert",function(){return{restrict:"EA",controller:"AlertController",templateUrl:"template/alert/alert.html",transclude:!0,replace:!0,scope:{type:"@",close:"&"}}}).directive("dismissOnTimeout",["$timeout",function(e){return{require:"alert",link:function(t,n,i,r){e(function(){r.close()},parseInt(i.dismissOnTimeout,10))}}}]),angular.module("ui.bootstrap.bindHtml",[]).directive("bindHtmlUnsafe",function(){return function(e,t,n){t.addClass("ng-binding").data("$binding",n.bindHtmlUnsafe),e.$watch(n.bindHtmlUnsafe,function(e){t.html(e||"")})}}),angular.module("ui.bootstrap.buttons",[]).constant("buttonConfig",{activeClass:"active",toggleEvent:"click"}).controller("ButtonsController",["buttonConfig",function(e){this.activeClass=e.activeClass||"active",this.toggleEvent=e.toggleEvent||"click"}]).directive("btnRadio",function(){return{require:["btnRadio","ngModel"],controller:"ButtonsController",link:function(e,t,n,i){var r=i[0],a=i[1];a.$render=function(){t.toggleClass(r.activeClass,angular.equals(a.$modelValue,e.$eval(n.btnRadio)))},t.bind(r.toggleEvent,function(){var i=t.hasClass(r.activeClass);(!i||angular.isDefined(n.uncheckable))&&e.$apply(function(){a.$setViewValue(i?null:e.$eval(n.btnRadio)),a.$render()})})}}}).directive("btnCheckbox",function(){return{require:["btnCheckbox","ngModel"],controller:"ButtonsController",link:function(e,t,n,i){function r(){return s(n.btnCheckboxTrue,!0)}function a(){return s(n.btnCheckboxFalse,!1)}function s(t,n){var i=e.$eval(t);return angular.isDefined(i)?i:n}var o=i[0],l=i[1];l.$render=function(){t.toggleClass(o.activeClass,angular.equals(l.$modelValue,r()))},t.bind(o.toggleEvent,function(){e.$apply(function(){l.$setViewValue(t.hasClass(o.activeClass)?a():r()),l.$render()})})}}}),angular.module("ui.bootstrap.carousel",["ui.bootstrap.transition"]).controller("CarouselController",["$scope","$timeout","$interval","$transition",function(e,t,n,i){function r(){a();var t=+e.interval;!isNaN(t)&&t>0&&(o=n(s,t))}function a(){o&&(n.cancel(o),o=null)}function s(){var t=+e.interval;l&&!isNaN(t)&&t>0?e.next():e.pause()}var o,l,c=this,u=c.slides=e.slides=[],d=-1;c.currentSlide=null;var h=!1;c.select=e.select=function(n,a){function s(){h||(c.currentSlide&&angular.isString(a)&&!e.noTransition&&n.$element?(n.$element.addClass(a),n.$element[0].offsetWidth,angular.forEach(u,function(e){angular.extend(e,{direction:"",entering:!1,leaving:!1,active:!1})}),angular.extend(n,{direction:a,active:!0,entering:!0}),angular.extend(c.currentSlide||{},{direction:a,leaving:!0}),e.$currentTransition=i(n.$element,{}),function(t,n){e.$currentTransition.then(function(){o(t,n)},function(){o(t,n)})}(n,c.currentSlide)):o(n,c.currentSlide),c.currentSlide=n,d=l,r())}function o(t,n){angular.extend(t,{direction:"",active:!0,leaving:!1,entering:!1}),angular.extend(n||{},{direction:"",active:!1,leaving:!1,entering:!1}),e.$currentTransition=null}var l=u.indexOf(n);void 0===a&&(a=l>d?"next":"prev"),n&&n!==c.currentSlide&&(e.$currentTransition?(e.$currentTransition.cancel(),t(s)):s())},e.$on("$destroy",function(){h=!0}),c.indexOfSlide=function(e){return u.indexOf(e)},e.next=function(){var t=(d+1)%u.length;return e.$currentTransition?void 0:c.select(u[t],"next")},e.prev=function(){var t=0>d-1?u.length-1:d-1;return e.$currentTransition?void 0:c.select(u[t],"prev")},e.isActive=function(e){return c.currentSlide===e},e.$watch("interval",r),e.$on("$destroy",a),e.play=function(){l||(l=!0,r())},e.pause=function(){e.noPause||(l=!1,a())},c.addSlide=function(t,n){t.$element=n,u.push(t),1===u.length||t.active?(c.select(u[u.length-1]),1==u.length&&e.play()):t.active=!1},c.removeSlide=function(e){var t=u.indexOf(e);u.splice(t,1),u.length>0&&e.active?c.select(t>=u.length?u[t-1]:u[t]):d>t&&d--}}]).directive("carousel",[function(){return{restrict:"EA",transclude:!0,replace:!0,controller:"CarouselController",require:"carousel",templateUrl:"template/carousel/carousel.html",scope:{interval:"=",noTransition:"=",noPause:"="}}}]).directive("slide",function(){return{require:"^carousel",restrict:"EA",transclude:!0,replace:!0,templateUrl:"template/carousel/slide.html",scope:{active:"=?"},link:function(e,t,n,i){i.addSlide(e,t),e.$on("$destroy",function(){i.removeSlide(e)}),e.$watch("active",function(t){t&&i.select(e)})}}}),angular.module("ui.bootstrap.dateparser",[]).service("dateParser",["$locale","orderByFilter",function(e,t){function n(e){var n=[],i=e.split("");return angular.forEach(r,function(t,r){var a=e.indexOf(r);if(a>-1){e=e.split(""),i[a]="("+t.regex+")",e[a]="$";for(var s=a+1,o=a+r.length;o>s;s++)i[s]="",e[s]="$";e=e.join(""),n.push({index:a,
apply:t.apply})}}),{regex:new RegExp("^"+i.join("")+"$"),map:t(n,"index")}}function i(e,t,n){return 1===t&&n>28?29===n&&(e%4===0&&e%100!==0||e%400===0):3===t||5===t||8===t||10===t?31>n:!0}this.parsers={};var r={yyyy:{regex:"\\d{4}",apply:function(e){this.year=+e}},yy:{regex:"\\d{2}",apply:function(e){this.year=+e+2e3}},y:{regex:"\\d{1,4}",apply:function(e){this.year=+e}},MMMM:{regex:e.DATETIME_FORMATS.MONTH.join("|"),apply:function(t){this.month=e.DATETIME_FORMATS.MONTH.indexOf(t)}},MMM:{regex:e.DATETIME_FORMATS.SHORTMONTH.join("|"),apply:function(t){this.month=e.DATETIME_FORMATS.SHORTMONTH.indexOf(t)}},MM:{regex:"0[1-9]|1[0-2]",apply:function(e){this.month=e-1}},M:{regex:"[1-9]|1[0-2]",apply:function(e){this.month=e-1}},dd:{regex:"[0-2][0-9]{1}|3[0-1]{1}",apply:function(e){this.date=+e}},d:{regex:"[1-2]?[0-9]{1}|3[0-1]{1}",apply:function(e){this.date=+e}},EEEE:{regex:e.DATETIME_FORMATS.DAY.join("|")},EEE:{regex:e.DATETIME_FORMATS.SHORTDAY.join("|")}};this.parse=function(t,r){if(!angular.isString(t)||!r)return t;r=e.DATETIME_FORMATS[r]||r,this.parsers[r]||(this.parsers[r]=n(r));var a=this.parsers[r],s=a.regex,o=a.map,l=t.match(s);if(l&&l.length){for(var c,u={year:1900,month:0,date:1,hours:0},d=1,h=l.length;h>d;d++){var p=o[d-1];p.apply&&p.apply.call(u,l[d])}return i(u.year,u.month,u.date)&&(c=new Date(u.year,u.month,u.date,u.hours)),c}}}]),angular.module("ui.bootstrap.position",[]).factory("$position",["$document","$window",function(e,t){function n(e,n){return e.currentStyle?e.currentStyle[n]:t.getComputedStyle?t.getComputedStyle(e)[n]:e.style[n]}function i(e){return"static"===(n(e,"position")||"static")}var r=function(t){for(var n=e[0],r=t.offsetParent||n;r&&r!==n&&i(r);)r=r.offsetParent;return r||n};return{position:function(t){var n=this.offset(t),i={top:0,left:0},a=r(t[0]);a!=e[0]&&(i=this.offset(angular.element(a)),i.top+=a.clientTop-a.scrollTop,i.left+=a.clientLeft-a.scrollLeft);var s=t[0].getBoundingClientRect();return{width:s.width||t.prop("offsetWidth"),height:s.height||t.prop("offsetHeight"),top:n.top-i.top,left:n.left-i.left}},offset:function(n){var i=n[0].getBoundingClientRect();return{width:i.width||n.prop("offsetWidth"),height:i.height||n.prop("offsetHeight"),top:i.top+(t.pageYOffset||e[0].documentElement.scrollTop),left:i.left+(t.pageXOffset||e[0].documentElement.scrollLeft)}},positionElements:function(e,t,n,i){var r,a,s,o,l=n.split("-"),c=l[0],u=l[1]||"center";r=i?this.offset(e):this.position(e),a=t.prop("offsetWidth"),s=t.prop("offsetHeight");var d={center:function(){return r.left+r.width/2-a/2},left:function(){return r.left},right:function(){return r.left+r.width}},h={center:function(){return r.top+r.height/2-s/2},top:function(){return r.top},bottom:function(){return r.top+r.height}};switch(c){case"right":o={top:h[u](),left:d[c]()};break;case"left":o={top:h[u](),left:r.left-a};break;case"bottom":o={top:h[c](),left:d[u]()};break;default:o={top:r.top-s,left:d[u]()}}return o}}}]),angular.module("ui.bootstrap.datepicker",["ui.bootstrap.dateparser","ui.bootstrap.position"]).constant("datepickerConfig",{formatDay:"dd",formatMonth:"MMMM",formatYear:"yyyy",formatDayHeader:"EEE",formatDayTitle:"MMMM yyyy",formatMonthTitle:"yyyy",datepickerMode:"day",minMode:"day",maxMode:"year",showWeeks:!0,startingDay:0,yearRange:20,minDate:null,maxDate:null}).controller("DatepickerController",["$scope","$attrs","$parse","$interpolate","$timeout","$log","dateFilter","datepickerConfig",function(e,t,n,i,r,a,s,o){var l=this,c={$setViewValue:angular.noop};this.modes=["day","month","year"],angular.forEach(["formatDay","formatMonth","formatYear","formatDayHeader","formatDayTitle","formatMonthTitle","minMode","maxMode","showWeeks","startingDay","yearRange"],function(n,r){l[n]=angular.isDefined(t[n])?8>r?i(t[n])(e.$parent):e.$parent.$eval(t[n]):o[n]}),angular.forEach(["minDate","maxDate"],function(i){t[i]?e.$parent.$watch(n(t[i]),function(e){l[i]=e?new Date(e):null,l.refreshView()}):l[i]=o[i]?new Date(o[i]):null}),e.datepickerMode=e.datepickerMode||o.datepickerMode,e.uniqueId="datepicker-"+e.$id+"-"+Math.floor(1e4*Math.random()),this.activeDate=angular.isDefined(t.initDate)?e.$parent.$eval(t.initDate):new Date,e.isActive=function(t){return 0===l.compare(t.date,l.activeDate)?(e.activeDateId=t.uid,!0):!1},this.init=function(e){c=e,c.$render=function(){l.render()}},this.render=function(){if(c.$modelValue){var e=new Date(c.$modelValue),t=!isNaN(e);t?this.activeDate=e:a.error('Datepicker directive: "ng-model" value must be a Date object, a number of milliseconds since 01.01.1970 or a string representing an RFC2822 or ISO 8601 date.'),c.$setValidity("date",t)}this.refreshView()},this.refreshView=function(){if(this.element){this._refreshView();var e=c.$modelValue?new Date(c.$modelValue):null;c.$setValidity("date-disabled",!e||this.element&&!this.isDisabled(e))}},this.createDateObject=function(e,t){var n=c.$modelValue?new Date(c.$modelValue):null;return{date:e,label:s(e,t),selected:n&&0===this.compare(e,n),disabled:this.isDisabled(e),current:0===this.compare(e,new Date)}},this.isDisabled=function(n){return this.minDate&&this.compare(n,this.minDate)<0||this.maxDate&&this.compare(n,this.maxDate)>0||t.dateDisabled&&e.dateDisabled({date:n,mode:e.datepickerMode})},this.split=function(e,t){for(var n=[];e.length>0;)n.push(e.splice(0,t));return n},e.select=function(t){if(e.datepickerMode===l.minMode){var n=c.$modelValue?new Date(c.$modelValue):new Date(0,0,0,0,0,0,0);n.setFullYear(t.getFullYear(),t.getMonth(),t.getDate()),c.$setViewValue(n),c.$render()}else l.activeDate=t,e.datepickerMode=l.modes[l.modes.indexOf(e.datepickerMode)-1]},e.move=function(e){var t=l.activeDate.getFullYear()+e*(l.step.years||0),n=l.activeDate.getMonth()+e*(l.step.months||0);l.activeDate.setFullYear(t,n,1),l.refreshView()},e.toggleMode=function(t){t=t||1,e.datepickerMode===l.maxMode&&1===t||e.datepickerMode===l.minMode&&-1===t||(e.datepickerMode=l.modes[l.modes.indexOf(e.datepickerMode)+t])},e.keys={13:"enter",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down"};var u=function(){r(function(){l.element[0].focus()},0,!1)};e.$on("datepicker.focus",u),e.keydown=function(t){var n=e.keys[t.which];if(n&&!t.shiftKey&&!t.altKey)if(t.preventDefault(),t.stopPropagation(),"enter"===n||"space"===n){if(l.isDisabled(l.activeDate))return;e.select(l.activeDate),u()}else!t.ctrlKey||"up"!==n&&"down"!==n?(l.handleKeyDown(n,t),l.refreshView()):(e.toggleMode("up"===n?1:-1),u())}}]).directive("datepicker",function(){return{restrict:"EA",replace:!0,templateUrl:"template/datepicker/datepicker.html",scope:{datepickerMode:"=?",dateDisabled:"&"},require:["datepicker","?^ngModel"],controller:"DatepickerController",link:function(e,t,n,i){var r=i[0],a=i[1];a&&r.init(a)}}}).directive("daypicker",["dateFilter",function(e){return{restrict:"EA",replace:!0,templateUrl:"template/datepicker/day.html",require:"^datepicker",link:function(t,n,i,r){function a(e,t){return 1!==t||e%4!==0||e%100===0&&e%400!==0?l[t]:29}function s(e,t){var n=new Array(t),i=new Date(e),r=0;for(i.setHours(12);t>r;)n[r++]=new Date(i),i.setDate(i.getDate()+1);return n}function o(e){var t=new Date(e);t.setDate(t.getDate()+4-(t.getDay()||7));var n=t.getTime();return t.setMonth(0),t.setDate(1),Math.floor(Math.round((n-t)/864e5)/7)+1}t.showWeeks=r.showWeeks,r.step={months:1},r.element=n;var l=[31,28,31,30,31,30,31,31,30,31,30,31];r._refreshView=function(){var n=r.activeDate.getFullYear(),i=r.activeDate.getMonth(),a=new Date(n,i,1),l=r.startingDay-a.getDay(),c=l>0?7-l:-l,u=new Date(a);c>0&&u.setDate(-c+1);for(var d=s(u,42),h=0;42>h;h++)d[h]=angular.extend(r.createDateObject(d[h],r.formatDay),{secondary:d[h].getMonth()!==i,uid:t.uniqueId+"-"+h});t.labels=new Array(7);for(var p=0;7>p;p++)t.labels[p]={abbr:e(d[p].date,r.formatDayHeader),full:e(d[p].date,"EEEE")};if(t.title=e(r.activeDate,r.formatDayTitle),t.rows=r.split(d,7),t.showWeeks){t.weekNumbers=[];for(var f=o(t.rows[0][0].date),g=t.rows.length;t.weekNumbers.push(f++)<g;);}},r.compare=function(e,t){return new Date(e.getFullYear(),e.getMonth(),e.getDate())-new Date(t.getFullYear(),t.getMonth(),t.getDate())},r.handleKeyDown=function(e){var t=r.activeDate.getDate();if("left"===e)t-=1;else if("up"===e)t-=7;else if("right"===e)t+=1;else if("down"===e)t+=7;else if("pageup"===e||"pagedown"===e){var n=r.activeDate.getMonth()+("pageup"===e?-1:1);r.activeDate.setMonth(n,1),t=Math.min(a(r.activeDate.getFullYear(),r.activeDate.getMonth()),t)}else"home"===e?t=1:"end"===e&&(t=a(r.activeDate.getFullYear(),r.activeDate.getMonth()));r.activeDate.setDate(t)},r.refreshView()}}}]).directive("monthpicker",["dateFilter",function(e){return{restrict:"EA",replace:!0,templateUrl:"template/datepicker/month.html",require:"^datepicker",link:function(t,n,i,r){r.step={years:1},r.element=n,r._refreshView=function(){for(var n=new Array(12),i=r.activeDate.getFullYear(),a=0;12>a;a++)n[a]=angular.extend(r.createDateObject(new Date(i,a,1),r.formatMonth),{uid:t.uniqueId+"-"+a});t.title=e(r.activeDate,r.formatMonthTitle),t.rows=r.split(n,3)},r.compare=function(e,t){return new Date(e.getFullYear(),e.getMonth())-new Date(t.getFullYear(),t.getMonth())},r.handleKeyDown=function(e){var t=r.activeDate.getMonth();if("left"===e)t-=1;else if("up"===e)t-=3;else if("right"===e)t+=1;else if("down"===e)t+=3;else if("pageup"===e||"pagedown"===e){var n=r.activeDate.getFullYear()+("pageup"===e?-1:1);r.activeDate.setFullYear(n)}else"home"===e?t=0:"end"===e&&(t=11);r.activeDate.setMonth(t)},r.refreshView()}}}]).directive("yearpicker",["dateFilter",function(){return{restrict:"EA",replace:!0,templateUrl:"template/datepicker/year.html",require:"^datepicker",link:function(e,t,n,i){function r(e){return parseInt((e-1)/a,10)*a+1}var a=i.yearRange;i.step={years:a},i.element=t,i._refreshView=function(){for(var t=new Array(a),n=0,s=r(i.activeDate.getFullYear());a>n;n++)t[n]=angular.extend(i.createDateObject(new Date(s+n,0,1),i.formatYear),{uid:e.uniqueId+"-"+n});e.title=[t[0].label,t[a-1].label].join(" - "),e.rows=i.split(t,5)},i.compare=function(e,t){return e.getFullYear()-t.getFullYear()},i.handleKeyDown=function(e){var t=i.activeDate.getFullYear();"left"===e?t-=1:"up"===e?t-=5:"right"===e?t+=1:"down"===e?t+=5:"pageup"===e||"pagedown"===e?t+=("pageup"===e?-1:1)*i.step.years:"home"===e?t=r(i.activeDate.getFullYear()):"end"===e&&(t=r(i.activeDate.getFullYear())+a-1),i.activeDate.setFullYear(t)},i.refreshView()}}}]).constant("datepickerPopupConfig",{datepickerPopup:"yyyy-MM-dd",currentText:"Today",clearText:"Clear",closeText:"Done",closeOnDateSelection:!0,appendToBody:!1,showButtonBar:!0}).directive("datepickerPopup",["$compile","$parse","$document","$position","dateFilter","dateParser","datepickerPopupConfig",function(e,t,n,i,r,a,s){return{restrict:"EA",require:"ngModel",scope:{isOpen:"=?",currentText:"@",clearText:"@",closeText:"@",dateDisabled:"&"},link:function(o,l,c,u){function d(e){return e.replace(/([A-Z])/g,function(e){return"-"+e.toLowerCase()})}function h(e){if(e){if(angular.isDate(e)&&!isNaN(e))return u.$setValidity("date",!0),e;if(angular.isString(e)){var t=a.parse(e,p)||new Date(e);return isNaN(t)?void u.$setValidity("date",!1):(u.$setValidity("date",!0),t)}return void u.$setValidity("date",!1)}return u.$setValidity("date",!0),null}var p,f=angular.isDefined(c.closeOnDateSelection)?o.$parent.$eval(c.closeOnDateSelection):s.closeOnDateSelection,g=angular.isDefined(c.datepickerAppendToBody)?o.$parent.$eval(c.datepickerAppendToBody):s.appendToBody;o.showButtonBar=angular.isDefined(c.showButtonBar)?o.$parent.$eval(c.showButtonBar):s.showButtonBar,o.getText=function(e){return o[e+"Text"]||s[e+"Text"]},c.$observe("datepickerPopup",function(e){p=e||s.datepickerPopup,u.$render()});var m=angular.element("<div datepicker-popup-wrap><div datepicker></div></div>");m.attr({"ng-model":"date","ng-change":"dateSelection()"});var v=angular.element(m.children()[0]);c.datepickerOptions&&angular.forEach(o.$parent.$eval(c.datepickerOptions),function(e,t){v.attr(d(t),e)}),o.watchData={},angular.forEach(["minDate","maxDate","datepickerMode"],function(e){if(c[e]){var n=t(c[e]);if(o.$parent.$watch(n,function(t){o.watchData[e]=t}),v.attr(d(e),"watchData."+e),"datepickerMode"===e){var i=n.assign;o.$watch("watchData."+e,function(e,t){e!==t&&i(o.$parent,e)})}}}),c.dateDisabled&&v.attr("date-disabled","dateDisabled({ date: date, mode: mode })"),u.$parsers.unshift(h),o.dateSelection=function(e){angular.isDefined(e)&&(o.date=e),u.$setViewValue(o.date),u.$render(),f&&(o.isOpen=!1,l[0].focus())},l.bind("input change keyup",function(){o.$apply(function(){o.date=u.$modelValue})}),u.$render=function(){var e=u.$viewValue?r(u.$viewValue,p):"";l.val(e),o.date=h(u.$modelValue)};var _=function(e){o.isOpen&&e.target!==l[0]&&o.$apply(function(){o.isOpen=!1})},y=function(e){o.keydown(e)};l.bind("keydown",y),o.keydown=function(e){27===e.which?(e.preventDefault(),e.stopPropagation(),o.close()):40!==e.which||o.isOpen||(o.isOpen=!0)},o.$watch("isOpen",function(e){e?(o.$broadcast("datepicker.focus"),o.position=g?i.offset(l):i.position(l),o.position.top=o.position.top+l.prop("offsetHeight"),n.bind("click",_)):n.unbind("click",_)}),o.select=function(e){if("today"===e){var t=new Date;angular.isDate(u.$modelValue)?(e=new Date(u.$modelValue),e.setFullYear(t.getFullYear(),t.getMonth(),t.getDate())):e=new Date(t.setHours(0,0,0,0))}o.dateSelection(e)},o.close=function(){o.isOpen=!1,l[0].focus()};var b=e(m)(o);m.remove(),g?n.find("body").append(b):l.after(b),o.$on("$destroy",function(){b.remove(),l.unbind("keydown",y),n.unbind("click",_)})}}}]).directive("datepickerPopupWrap",function(){return{restrict:"EA",replace:!0,transclude:!0,templateUrl:"template/datepicker/popup.html",link:function(e,t){t.bind("click",function(e){e.preventDefault(),e.stopPropagation()})}}}),angular.module("ui.bootstrap.dropdown",[]).constant("dropdownConfig",{openClass:"open"}).service("dropdownService",["$document",function(e){var t=null;this.open=function(r){t||(e.bind("click",n),e.bind("keydown",i)),t&&t!==r&&(t.isOpen=!1),t=r},this.close=function(r){t===r&&(t=null,e.unbind("click",n),e.unbind("keydown",i))};var n=function(e){if(t){var n=t.getToggleElement();e&&n&&n[0].contains(e.target)||t.$apply(function(){t.isOpen=!1})}},i=function(e){27===e.which&&(t.focusToggleElement(),n())}}]).controller("DropdownController",["$scope","$attrs","$parse","dropdownConfig","dropdownService","$animate",function(e,t,n,i,r,a){var s,o=this,l=e.$new(),c=i.openClass,u=angular.noop,d=t.onToggle?n(t.onToggle):angular.noop;this.init=function(i){o.$element=i,t.isOpen&&(s=n(t.isOpen),u=s.assign,e.$watch(s,function(e){l.isOpen=!!e}))},this.toggle=function(e){return l.isOpen=arguments.length?!!e:!l.isOpen},this.isOpen=function(){return l.isOpen},l.getToggleElement=function(){return o.toggleElement},l.focusToggleElement=function(){o.toggleElement&&o.toggleElement[0].focus()},l.$watch("isOpen",function(t,n){a[t?"addClass":"removeClass"](o.$element,c),t?(l.focusToggleElement(),r.open(l)):r.close(l),u(e,t),angular.isDefined(t)&&t!==n&&d(e,{open:!!t})}),e.$on("$locationChangeSuccess",function(){l.isOpen=!1}),e.$on("$destroy",function(){l.$destroy()})}]).directive("dropdown",function(){return{controller:"DropdownController",link:function(e,t,n,i){i.init(t)}}}).directive("dropdownToggle",function(){return{require:"?^dropdown",link:function(e,t,n,i){if(i){i.toggleElement=t;var r=function(r){r.preventDefault(),t.hasClass("disabled")||n.disabled||e.$apply(function(){i.toggle()})};t.bind("click",r),t.attr({"aria-haspopup":!0,"aria-expanded":!1}),e.$watch(i.isOpen,function(e){t.attr("aria-expanded",!!e)}),e.$on("$destroy",function(){t.unbind("click",r)})}}}}),angular.module("ui.bootstrap.modal",["ui.bootstrap.transition"]).factory("$$stackedMap",function(){return{createNew:function(){var e=[];return{add:function(t,n){e.push({key:t,value:n})},get:function(t){for(var n=0;n<e.length;n++)if(t==e[n].key)return e[n]},keys:function(){for(var t=[],n=0;n<e.length;n++)t.push(e[n].key);return t},top:function(){return e[e.length-1]},remove:function(t){for(var n=-1,i=0;i<e.length;i++)if(t==e[i].key){n=i;break}return e.splice(n,1)[0]},removeTop:function(){return e.splice(e.length-1,1)[0]},length:function(){return e.length}}}}}).directive("modalBackdrop",["$timeout",function(e){return{restrict:"EA",replace:!0,templateUrl:"template/modal/backdrop.html",link:function(t,n,i){t.backdropClass=i.backdropClass||"",t.animate=!1,e(function(){t.animate=!0})}}}]).directive("modalWindow",["$modalStack","$timeout",function(e,t){return{restrict:"EA",scope:{index:"@",animate:"="},replace:!0,transclude:!0,templateUrl:function(e,t){return t.templateUrl||"template/modal/window.html"},link:function(n,i,r){i.addClass(r.windowClass||""),n.size=r.size,i.on("click",function(e){n.close(e)}),t(function(){n.animate=!0,i[0].querySelectorAll("[autofocus]").length||i[0].focus()}),n.close=function(t){var n=e.getTop();n&&n.value.backdrop&&"static"!=n.value.backdrop&&t.target===t.currentTarget&&(t.preventDefault(),t.stopPropagation(),e.dismiss(n.key,"backdrop click"))}}}}]).directive("modalTransclude",function(){return{link:function(e,t,n,i,r){r(e.$parent,function(e){t.empty(),t.append(e)})}}}).factory("$modalStack",["$transition","$timeout","$document","$compile","$rootScope","$$stackedMap",function(e,t,n,i,r,a){function s(){for(var e=-1,t=p.keys(),n=0;n<t.length;n++)p.get(t[n]).value.backdrop&&(e=n);return e}function o(e){var t=n.find("body").eq(0),i=p.get(e).value;p.remove(e),c(i.modalDomEl,i.modalScope,300,function(){i.modalScope.$destroy(),t.toggleClass(h,p.length()>0),l()})}function l(){if(u&&-1==s()){var e=d;c(u,d,150,function(){e.$destroy(),e=null}),u=void 0,d=void 0}}function c(n,i,r,a){function s(){s.done||(s.done=!0,n.remove(),a&&a())}i.animate=!1;var o=e.transitionEndEventName;if(o){var l=t(s,r);n.bind(o,function(){t.cancel(l),s(),i.$apply()})}else t(s)}var u,d,h="modal-open",p=a.createNew(),f={};return r.$watch(s,function(e){d&&(d.index=e)}),n.bind("keydown",function(e){var t;27===e.which&&(t=p.top(),t&&t.value.keyboard&&(e.preventDefault(),r.$apply(function(){f.dismiss(t.key,"escape key press")})))}),f.open=function(e,t){p.add(e,{deferred:t.deferred,modalScope:t.scope,backdrop:t.backdrop,keyboard:t.keyboard});var a=n.find("body").eq(0),o=s();if(o>=0&&!u){d=r.$new(!0),d.index=o;var l=angular.element("<div modal-backdrop></div>");l.attr("backdrop-class",t.backdropClass),u=i(l)(d),a.append(u)}var c=angular.element("<div modal-window></div>");c.attr({"template-url":t.windowTemplateUrl,"window-class":t.windowClass,size:t.size,index:p.length()-1,animate:"animate"}).html(t.content);var f=i(c)(t.scope);p.top().value.modalDomEl=f,a.append(f),a.addClass(h)},f.close=function(e,t){var n=p.get(e);n&&(n.value.deferred.resolve(t),o(e))},f.dismiss=function(e,t){var n=p.get(e);n&&(n.value.deferred.reject(t),o(e))},f.dismissAll=function(e){for(var t=this.getTop();t;)this.dismiss(t.key,e),t=this.getTop()},f.getTop=function(){return p.top()},f}]).provider("$modal",function(){var e={options:{backdrop:!0,keyboard:!0},$get:["$injector","$rootScope","$q","$http","$templateCache","$controller","$modalStack",function(t,n,i,r,a,s,o){function l(e){return e.template?i.when(e.template):r.get(angular.isFunction(e.templateUrl)?e.templateUrl():e.templateUrl,{cache:a}).then(function(e){return e.data})}function c(e){var n=[];return angular.forEach(e,function(e){(angular.isFunction(e)||angular.isArray(e))&&n.push(i.when(t.invoke(e)))}),n}var u={};return u.open=function(t){var r=i.defer(),a=i.defer(),u={result:r.promise,opened:a.promise,close:function(e){o.close(u,e)},dismiss:function(e){o.dismiss(u,e)}};if(t=angular.extend({},e.options,t),t.resolve=t.resolve||{},!t.template&&!t.templateUrl)throw new Error("One of template or templateUrl options is required.");var d=i.all([l(t)].concat(c(t.resolve)));return d.then(function(e){var i=(t.scope||n).$new();i.$close=u.close,i.$dismiss=u.dismiss;var a,l={},c=1;t.controller&&(l.$scope=i,l.$modalInstance=u,angular.forEach(t.resolve,function(t,n){l[n]=e[c++]}),a=s(t.controller,l),t.controllerAs&&(i[t.controllerAs]=a)),o.open(u,{scope:i,deferred:r,content:e[0],backdrop:t.backdrop,keyboard:t.keyboard,backdropClass:t.backdropClass,windowClass:t.windowClass,windowTemplateUrl:t.windowTemplateUrl,size:t.size})},function(e){r.reject(e)}),d.then(function(){a.resolve(!0)},function(){a.reject(!1)}),u},u}]};return e}),angular.module("ui.bootstrap.pagination",[]).controller("PaginationController",["$scope","$attrs","$parse",function(e,t,n){var i=this,r={$setViewValue:angular.noop},a=t.numPages?n(t.numPages).assign:angular.noop;this.init=function(a,s){r=a,this.config=s,r.$render=function(){i.render()},t.itemsPerPage?e.$parent.$watch(n(t.itemsPerPage),function(t){i.itemsPerPage=parseInt(t,10),e.totalPages=i.calculateTotalPages()}):this.itemsPerPage=s.itemsPerPage},this.calculateTotalPages=function(){var t=this.itemsPerPage<1?1:Math.ceil(e.totalItems/this.itemsPerPage);return Math.max(t||0,1)},this.render=function(){e.page=parseInt(r.$viewValue,10)||1},e.selectPage=function(t){e.page!==t&&t>0&&t<=e.totalPages&&(r.$setViewValue(t),r.$render())},e.getText=function(t){return e[t+"Text"]||i.config[t+"Text"]},e.noPrevious=function(){return 1===e.page},e.noNext=function(){return e.page===e.totalPages},e.$watch("totalItems",function(){e.totalPages=i.calculateTotalPages()}),e.$watch("totalPages",function(t){a(e.$parent,t),e.page>t?e.selectPage(t):r.$render()})}]).constant("paginationConfig",{itemsPerPage:10,boundaryLinks:!1,directionLinks:!0,firstText:"First",previousText:"Previous",nextText:"Next",lastText:"Last",rotate:!0}).directive("pagination",["$parse","paginationConfig",function(e,t){return{restrict:"EA",scope:{totalItems:"=",firstText:"@",previousText:"@",nextText:"@",lastText:"@"},require:["pagination","?ngModel"],controller:"PaginationController",templateUrl:"template/pagination/pagination.html",replace:!0,link:function(n,i,r,a){function s(e,t,n){return{number:e,text:t,active:n}}function o(e,t){var n=[],i=1,r=t,a=angular.isDefined(u)&&t>u;a&&(d?(i=Math.max(e-Math.floor(u/2),1),r=i+u-1,r>t&&(r=t,i=r-u+1)):(i=(Math.ceil(e/u)-1)*u+1,r=Math.min(i+u-1,t)));for(var o=i;r>=o;o++){var l=s(o,o,o===e);n.push(l)}if(a&&!d){if(i>1){var c=s(i-1,"...",!1);n.unshift(c)}if(t>r){var h=s(r+1,"...",!1);n.push(h)}}return n}var l=a[0],c=a[1];if(c){var u=angular.isDefined(r.maxSize)?n.$parent.$eval(r.maxSize):t.maxSize,d=angular.isDefined(r.rotate)?n.$parent.$eval(r.rotate):t.rotate;n.boundaryLinks=angular.isDefined(r.boundaryLinks)?n.$parent.$eval(r.boundaryLinks):t.boundaryLinks,n.directionLinks=angular.isDefined(r.directionLinks)?n.$parent.$eval(r.directionLinks):t.directionLinks,l.init(c,t),r.maxSize&&n.$parent.$watch(e(r.maxSize),function(e){u=parseInt(e,10),l.render()});var h=l.render;l.render=function(){h(),n.page>0&&n.page<=n.totalPages&&(n.pages=o(n.page,n.totalPages))}}}}}]).constant("pagerConfig",{itemsPerPage:10,previousText:"\xab Previous",nextText:"Next \xbb",align:!0}).directive("pager",["pagerConfig",function(e){return{restrict:"EA",scope:{totalItems:"=",previousText:"@",nextText:"@"},require:["pager","?ngModel"],controller:"PaginationController",templateUrl:"template/pagination/pager.html",replace:!0,link:function(t,n,i,r){var a=r[0],s=r[1];s&&(t.align=angular.isDefined(i.align)?t.$parent.$eval(i.align):e.align,a.init(s,e))}}}]),angular.module("ui.bootstrap.tooltip",["ui.bootstrap.position","ui.bootstrap.bindHtml"]).provider("$tooltip",function(){function e(e){var t=/[A-Z]/g,n="-";return e.replace(t,function(e,t){return(t?n:"")+e.toLowerCase()})}var t={placement:"top",animation:!0,popupDelay:0},n={mouseenter:"mouseleave",click:"click",focus:"blur"},i={};this.options=function(e){angular.extend(i,e)},this.setTriggers=function(e){angular.extend(n,e)},this.$get=["$window","$compile","$timeout","$document","$position","$interpolate",function(r,a,s,o,l,c){return function(r,u,d){function h(e){var t=e||p.trigger||d,i=n[t]||t;return{show:t,hide:i}}var p=angular.extend({},t,i),f=e(r),g=c.startSymbol(),m=c.endSymbol(),v="<div "+f+'-popup title="'+g+"title"+m+'" content="'+g+"content"+m+'" placement="'+g+"placement"+m+'" animation="animation" is-open="isOpen"></div>';return{restrict:"EA",compile:function(){var e=a(v);return function(t,n,i){function a(){D.isOpen?d():c()}function c(){(!P||t.$eval(i[u+"Enable"]))&&(_(),D.popupDelay?C||(C=s(f,D.popupDelay,!1),C.then(function(e){e()})):f()())}function d(){t.$apply(function(){g()})}function f(){return C=null,S&&(s.cancel(S),S=null),D.content?(m(),k.css({top:0,left:0,display:"block"}),$?o.find("body").append(k):n.after(k),M(),D.isOpen=!0,D.$digest(),M):angular.noop}function g(){D.isOpen=!1,s.cancel(C),C=null,D.animation?S||(S=s(v,500)):v()}function m(){k&&v(),x=D.$new(),k=e(x,angular.noop)}function v(){S=null,k&&(k.remove(),k=null),x&&(x.$destroy(),x=null)}function _(){y(),b()}function y(){var e=i[u+"Placement"];D.placement=angular.isDefined(e)?e:p.placement}function b(){var e=i[u+"PopupDelay"],t=parseInt(e,10);D.popupDelay=isNaN(t)?p.popupDelay:t}function w(){var e=i[u+"Trigger"];E(),T=h(e),T.show===T.hide?n.bind(T.show,a):(n.bind(T.show,c),n.bind(T.hide,d))}var k,x,S,C,$=angular.isDefined(p.appendToBody)?p.appendToBody:!1,T=h(void 0),P=angular.isDefined(i[u+"Enable"]),D=t.$new(!0),M=function(){var e=l.positionElements(n,k,D.placement,$);e.top+="px",e.left+="px",k.css(e)};D.isOpen=!1,i.$observe(r,function(e){D.content=e,!e&&D.isOpen&&g()}),i.$observe("disabled",function(e){e&&D.isOpen&&g()}),i.$observe(u+"Title",function(e){D.title=e});var E=function(){n.unbind(T.show,c),n.unbind(T.hide,d)};w();var I=t.$eval(i[u+"Animation"]);D.animation=angular.isDefined(I)?!!I:p.animation;var O=t.$eval(i[u+"AppendToBody"]);$=angular.isDefined(O)?O:$,$&&t.$on("$locationChangeSuccess",function(){D.isOpen&&g()}),t.$on("$destroy",function(){s.cancel(S),s.cancel(C),E(),v(),D=null})}}}}}]}).directive("tooltipPopup",function(){return{restrict:"EA",replace:!0,scope:{content:"@",placement:"@",animation:"&",isOpen:"&"},templateUrl:"template/tooltip/tooltip-popup.html"}}).directive("tooltip",["$tooltip",function(e){return e("tooltip","tooltip","mouseenter")}]).directive("tooltipHtmlUnsafePopup",function(){return{restrict:"EA",replace:!0,scope:{content:"@",placement:"@",animation:"&",isOpen:"&"},templateUrl:"template/tooltip/tooltip-html-unsafe-popup.html"}}).directive("tooltipHtmlUnsafe",["$tooltip",function(e){return e("tooltipHtmlUnsafe","tooltip","mouseenter")}]),angular.module("ui.bootstrap.popover",["ui.bootstrap.tooltip"]).directive("popoverPopup",function(){return{restrict:"EA",replace:!0,scope:{title:"@",content:"@",placement:"@",animation:"&",isOpen:"&"},templateUrl:"template/popover/popover.html"}}).directive("popover",["$tooltip",function(e){return e("popover","popover","click")}]),angular.module("ui.bootstrap.progressbar",[]).constant("progressConfig",{animate:!0,max:100}).controller("ProgressController",["$scope","$attrs","progressConfig",function(e,t,n){var i=this,r=angular.isDefined(t.animate)?e.$parent.$eval(t.animate):n.animate;this.bars=[],e.max=angular.isDefined(t.max)?e.$parent.$eval(t.max):n.max,this.addBar=function(t,n){r||n.css({transition:"none"}),this.bars.push(t),t.$watch("value",function(n){t.percent=+(100*n/e.max).toFixed(2)}),t.$on("$destroy",function(){n=null,i.removeBar(t)})},this.removeBar=function(e){this.bars.splice(this.bars.indexOf(e),1)}}]).directive("progress",function(){return{restrict:"EA",replace:!0,transclude:!0,controller:"ProgressController",require:"progress",scope:{},templateUrl:"template/progressbar/progress.html"}}).directive("bar",function(){return{restrict:"EA",replace:!0,transclude:!0,require:"^progress",scope:{value:"=",type:"@"},templateUrl:"template/progressbar/bar.html",link:function(e,t,n,i){i.addBar(e,t)}}}).directive("progressbar",function(){return{restrict:"EA",replace:!0,transclude:!0,controller:"ProgressController",scope:{value:"=",type:"@"},templateUrl:"template/progressbar/progressbar.html",link:function(e,t,n,i){i.addBar(e,angular.element(t.children()[0]))}}}),angular.module("ui.bootstrap.rating",[]).constant("ratingConfig",{max:5,stateOn:null,stateOff:null}).controller("RatingController",["$scope","$attrs","ratingConfig",function(e,t,n){var i={$setViewValue:angular.noop};this.init=function(r){i=r,i.$render=this.render,this.stateOn=angular.isDefined(t.stateOn)?e.$parent.$eval(t.stateOn):n.stateOn,this.stateOff=angular.isDefined(t.stateOff)?e.$parent.$eval(t.stateOff):n.stateOff;var a=angular.isDefined(t.ratingStates)?e.$parent.$eval(t.ratingStates):new Array(angular.isDefined(t.max)?e.$parent.$eval(t.max):n.max);e.range=this.buildTemplateObjects(a)},this.buildTemplateObjects=function(e){for(var t=0,n=e.length;n>t;t++)e[t]=angular.extend({index:t},{stateOn:this.stateOn,stateOff:this.stateOff},e[t]);return e},e.rate=function(t){!e.readonly&&t>=0&&t<=e.range.length&&(i.$setViewValue(t),i.$render())},e.enter=function(t){e.readonly||(e.value=t),e.onHover({value:t})},e.reset=function(){e.value=i.$viewValue,e.onLeave()},e.onKeydown=function(t){/(37|38|39|40)/.test(t.which)&&(t.preventDefault(),t.stopPropagation(),e.rate(e.value+(38===t.which||39===t.which?1:-1)))},this.render=function(){e.value=i.$viewValue}}]).directive("rating",function(){return{restrict:"EA",require:["rating","ngModel"],scope:{readonly:"=?",onHover:"&",onLeave:"&"},controller:"RatingController",templateUrl:"template/rating/rating.html",replace:!0,link:function(e,t,n,i){var r=i[0],a=i[1];a&&r.init(a)}}}),angular.module("ui.bootstrap.tabs",[]).controller("TabsetController",["$scope",function(e){var t=this,n=t.tabs=e.tabs=[];t.select=function(e){angular.forEach(n,function(t){t.active&&t!==e&&(t.active=!1,t.onDeselect())}),e.active=!0,e.onSelect()},t.addTab=function(e){n.push(e),1===n.length?e.active=!0:e.active&&t.select(e)},t.removeTab=function(e){var r=n.indexOf(e);if(e.active&&n.length>1&&!i){var a=r==n.length-1?r-1:r+1;t.select(n[a])}n.splice(r,1)};var i;e.$on("$destroy",function(){i=!0})}]).directive("tabset",function(){return{restrict:"EA",transclude:!0,replace:!0,scope:{type:"@"},controller:"TabsetController",templateUrl:"template/tabs/tabset.html",link:function(e,t,n){e.vertical=angular.isDefined(n.vertical)?e.$parent.$eval(n.vertical):!1,e.justified=angular.isDefined(n.justified)?e.$parent.$eval(n.justified):!1}}}).directive("tab",["$parse",function(e){return{require:"^tabset",restrict:"EA",replace:!0,templateUrl:"template/tabs/tab.html",transclude:!0,scope:{active:"=?",heading:"@",onSelect:"&select",onDeselect:"&deselect"},controller:function(){},compile:function(t,n,i){return function(t,n,r,a){t.$watch("active",function(e){e&&a.select(t)}),t.disabled=!1,r.disabled&&t.$parent.$watch(e(r.disabled),function(e){t.disabled=!!e}),t.select=function(){t.disabled||(t.active=!0)},a.addTab(t),t.$on("$destroy",function(){a.removeTab(t)}),t.$transcludeFn=i}}}}]).directive("tabHeadingTransclude",[function(){return{restrict:"A",require:"^tab",link:function(e,t){e.$watch("headingElement",function(e){e&&(t.html(""),t.append(e))})}}}]).directive("tabContentTransclude",function(){function e(e){return e.tagName&&(e.hasAttribute("tab-heading")||e.hasAttribute("data-tab-heading")||"tab-heading"===e.tagName.toLowerCase()||"data-tab-heading"===e.tagName.toLowerCase())}return{restrict:"A",require:"^tabset",link:function(t,n,i){var r=t.$eval(i.tabContentTransclude);r.$transcludeFn(r.$parent,function(t){angular.forEach(t,function(t){e(t)?r.headingElement=t:n.append(t)})})}}}),angular.module("ui.bootstrap.timepicker",[]).constant("timepickerConfig",{hourStep:1,minuteStep:1,showMeridian:!0,meridians:null,readonlyInput:!1,mousewheel:!0}).controller("TimepickerController",["$scope","$attrs","$parse","$log","$locale","timepickerConfig",function(e,t,n,i,r,a){function s(){var t=parseInt(e.hours,10),n=e.showMeridian?t>0&&13>t:t>=0&&24>t;return n?(e.showMeridian&&(12===t&&(t=0),e.meridian===g[1]&&(t+=12)),t):void 0}function o(){var t=parseInt(e.minutes,10);return t>=0&&60>t?t:void 0}function l(e){return angular.isDefined(e)&&e.toString().length<2?"0"+e:e}function c(e){u(),f.$setViewValue(new Date(p)),d(e)}function u(){f.$setValidity("time",!0),e.invalidHours=!1,e.invalidMinutes=!1}function d(t){var n=p.getHours(),i=p.getMinutes();e.showMeridian&&(n=0===n||12===n?12:n%12),e.hours="h"===t?n:l(n),e.minutes="m"===t?i:l(i),e.meridian=p.getHours()<12?g[0]:g[1]}function h(e){var t=new Date(p.getTime()+6e4*e);p.setHours(t.getHours(),t.getMinutes()),c()}var p=new Date,f={$setViewValue:angular.noop},g=angular.isDefined(t.meridians)?e.$parent.$eval(t.meridians):a.meridians||r.DATETIME_FORMATS.AMPMS;this.init=function(n,i){f=n,f.$render=this.render;var r=i.eq(0),s=i.eq(1),o=angular.isDefined(t.mousewheel)?e.$parent.$eval(t.mousewheel):a.mousewheel;o&&this.setupMousewheelEvents(r,s),e.readonlyInput=angular.isDefined(t.readonlyInput)?e.$parent.$eval(t.readonlyInput):a.readonlyInput,
this.setupInputEvents(r,s)};var m=a.hourStep;t.hourStep&&e.$parent.$watch(n(t.hourStep),function(e){m=parseInt(e,10)});var v=a.minuteStep;t.minuteStep&&e.$parent.$watch(n(t.minuteStep),function(e){v=parseInt(e,10)}),e.showMeridian=a.showMeridian,t.showMeridian&&e.$parent.$watch(n(t.showMeridian),function(t){if(e.showMeridian=!!t,f.$error.time){var n=s(),i=o();angular.isDefined(n)&&angular.isDefined(i)&&(p.setHours(n),c())}else d()}),this.setupMousewheelEvents=function(t,n){var i=function(e){e.originalEvent&&(e=e.originalEvent);var t=e.wheelDelta?e.wheelDelta:-e.deltaY;return e.detail||t>0};t.bind("mousewheel wheel",function(t){e.$apply(i(t)?e.incrementHours():e.decrementHours()),t.preventDefault()}),n.bind("mousewheel wheel",function(t){e.$apply(i(t)?e.incrementMinutes():e.decrementMinutes()),t.preventDefault()})},this.setupInputEvents=function(t,n){if(e.readonlyInput)return e.updateHours=angular.noop,void(e.updateMinutes=angular.noop);var i=function(t,n){f.$setViewValue(null),f.$setValidity("time",!1),angular.isDefined(t)&&(e.invalidHours=t),angular.isDefined(n)&&(e.invalidMinutes=n)};e.updateHours=function(){var e=s();angular.isDefined(e)?(p.setHours(e),c("h")):i(!0)},t.bind("blur",function(){!e.invalidHours&&e.hours<10&&e.$apply(function(){e.hours=l(e.hours)})}),e.updateMinutes=function(){var e=o();angular.isDefined(e)?(p.setMinutes(e),c("m")):i(void 0,!0)},n.bind("blur",function(){!e.invalidMinutes&&e.minutes<10&&e.$apply(function(){e.minutes=l(e.minutes)})})},this.render=function(){var e=f.$modelValue?new Date(f.$modelValue):null;isNaN(e)?(f.$setValidity("time",!1),i.error('Timepicker directive: "ng-model" value must be a Date object, a number of milliseconds since 01.01.1970 or a string representing an RFC2822 or ISO 8601 date.')):(e&&(p=e),u(),d())},e.incrementHours=function(){h(60*m)},e.decrementHours=function(){h(60*-m)},e.incrementMinutes=function(){h(v)},e.decrementMinutes=function(){h(-v)},e.toggleMeridian=function(){h(720*(p.getHours()<12?1:-1))}}]).directive("timepicker",function(){return{restrict:"EA",require:["timepicker","?^ngModel"],controller:"TimepickerController",replace:!0,scope:{},templateUrl:"template/timepicker/timepicker.html",link:function(e,t,n,i){var r=i[0],a=i[1];a&&r.init(a,t.find("input"))}}}),angular.module("ui.bootstrap.typeahead",["ui.bootstrap.position","ui.bootstrap.bindHtml"]).factory("typeaheadParser",["$parse",function(e){var t=/^\s*([\s\S]+?)(?:\s+as\s+([\s\S]+?))?\s+for\s+(?:([\$\w][\$\w\d]*))\s+in\s+([\s\S]+?)$/;return{parse:function(n){var i=n.match(t);if(!i)throw new Error('Expected typeahead specification in form of "_modelValue_ (as _label_)? for _item_ in _collection_" but got "'+n+'".');return{itemName:i[3],source:e(i[4]),viewMapper:e(i[2]||i[1]),modelMapper:e(i[1])}}}}]).directive("typeahead",["$compile","$parse","$q","$timeout","$document","$position","typeaheadParser",function(e,t,n,i,r,a,s){var o=[9,13,27,38,40];return{require:"ngModel",link:function(l,c,u,d){var h,p=l.$eval(u.typeaheadMinLength)||1,f=l.$eval(u.typeaheadWaitMs)||0,g=l.$eval(u.typeaheadEditable)!==!1,m=t(u.typeaheadLoading).assign||angular.noop,v=t(u.typeaheadOnSelect),_=u.typeaheadInputFormatter?t(u.typeaheadInputFormatter):void 0,y=u.typeaheadAppendToBody?l.$eval(u.typeaheadAppendToBody):!1,b=l.$eval(u.typeaheadFocusFirst)!==!1,w=t(u.ngModel).assign,k=s.parse(u.typeahead),x=l.$new();l.$on("$destroy",function(){x.$destroy()});var S="typeahead-"+x.$id+"-"+Math.floor(1e4*Math.random());c.attr({"aria-autocomplete":"list","aria-expanded":!1,"aria-owns":S});var C=angular.element("<div typeahead-popup></div>");C.attr({id:S,matches:"matches",active:"activeIdx",select:"select(activeIdx)",query:"query",position:"position"}),angular.isDefined(u.typeaheadTemplateUrl)&&C.attr("template-url",u.typeaheadTemplateUrl);var $=function(){x.matches=[],x.activeIdx=-1,c.attr("aria-expanded",!1)},T=function(e){return S+"-option-"+e};x.$watch("activeIdx",function(e){0>e?c.removeAttr("aria-activedescendant"):c.attr("aria-activedescendant",T(e))});var P=function(e){var t={$viewValue:e};m(l,!0),n.when(k.source(l,t)).then(function(n){var i=e===d.$viewValue;if(i&&h)if(n.length>0){x.activeIdx=b?0:-1,x.matches.length=0;for(var r=0;r<n.length;r++)t[k.itemName]=n[r],x.matches.push({id:T(r),label:k.viewMapper(x,t),model:n[r]});x.query=e,x.position=y?a.offset(c):a.position(c),x.position.top=x.position.top+c.prop("offsetHeight"),c.attr("aria-expanded",!0)}else $();i&&m(l,!1)},function(){$(),m(l,!1)})};$(),x.query=void 0;var D,M=function(e){D=i(function(){P(e)},f)},E=function(){D&&i.cancel(D)};d.$parsers.unshift(function(e){return h=!0,e&&e.length>=p?f>0?(E(),M(e)):P(e):(m(l,!1),E(),$()),g?e:e?void d.$setValidity("editable",!1):(d.$setValidity("editable",!0),e)}),d.$formatters.push(function(e){var t,n,i={};return _?(i.$model=e,_(l,i)):(i[k.itemName]=e,t=k.viewMapper(l,i),i[k.itemName]=void 0,n=k.viewMapper(l,i),t!==n?t:e)}),x.select=function(e){var t,n,r={};r[k.itemName]=n=x.matches[e].model,t=k.modelMapper(l,r),w(l,t),d.$setValidity("editable",!0),v(l,{$item:n,$model:t,$label:k.viewMapper(l,r)}),$(),i(function(){c[0].focus()},0,!1)},c.bind("keydown",function(e){0!==x.matches.length&&-1!==o.indexOf(e.which)&&(-1!=x.activeIdx||13!==e.which&&9!==e.which)&&(e.preventDefault(),40===e.which?(x.activeIdx=(x.activeIdx+1)%x.matches.length,x.$digest()):38===e.which?(x.activeIdx=(x.activeIdx>0?x.activeIdx:x.matches.length)-1,x.$digest()):13===e.which||9===e.which?x.$apply(function(){x.select(x.activeIdx)}):27===e.which&&(e.stopPropagation(),$(),x.$digest()))}),c.bind("blur",function(){h=!1});var I=function(e){c[0]!==e.target&&($(),x.$digest())};r.bind("click",I),l.$on("$destroy",function(){r.unbind("click",I),y&&O.remove()});var O=e(C)(x);y?r.find("body").append(O):c.after(O)}}}]).directive("typeaheadPopup",function(){return{restrict:"EA",scope:{matches:"=",query:"=",active:"=",position:"=",select:"&"},replace:!0,templateUrl:"template/typeahead/typeahead-popup.html",link:function(e,t,n){e.templateUrl=n.templateUrl,e.isOpen=function(){return e.matches.length>0},e.isActive=function(t){return e.active==t},e.selectActive=function(t){e.active=t},e.selectMatch=function(t){e.select({activeIdx:t})}}}}).directive("typeaheadMatch",["$http","$templateCache","$compile","$parse",function(e,t,n,i){return{restrict:"EA",scope:{index:"=",match:"=",query:"="},link:function(r,a,s){var o=i(s.templateUrl)(r.$parent)||"template/typeahead/typeahead-match.html";e.get(o,{cache:t}).success(function(e){a.replaceWith(n(e.trim())(r))})}}}]).filter("typeaheadHighlight",function(){function e(e){return e.replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")}return function(t,n){return n?(""+t).replace(new RegExp(e(n),"gi"),"<strong>$&</strong>"):t}}),angular.module("template/accordion/accordion-group.html",[]).run(["$templateCache",function(e){e.put("template/accordion/accordion-group.html",'<div class="panel panel-default">\n  <div class="panel-heading">\n    <h4 class="panel-title">\n      <a href class="accordion-toggle" ng-click="toggleOpen()" accordion-transclude="heading"><span ng-class="{\'text-muted\': isDisabled}">{{heading}}</span></a>\n    </h4>\n  </div>\n  <div class="panel-collapse" collapse="!isOpen">\n	  <div class="panel-body" ng-transclude></div>\n  </div>\n</div>\n')}]),angular.module("template/accordion/accordion.html",[]).run(["$templateCache",function(e){e.put("template/accordion/accordion.html",'<div class="panel-group" ng-transclude></div>')}]),angular.module("template/alert/alert.html",[]).run(["$templateCache",function(e){e.put("template/alert/alert.html",'<div class="alert" ng-class="[\'alert-\' + (type || \'warning\'), closeable ? \'alert-dismissable\' : null]" role="alert">\n    <button ng-show="closeable" type="button" class="close" ng-click="close()">\n        <span aria-hidden="true">&times;</span>\n        <span class="sr-only">Close</span>\n    </button>\n    <div ng-transclude></div>\n</div>\n')}]),angular.module("template/carousel/carousel.html",[]).run(["$templateCache",function(e){e.put("template/carousel/carousel.html",'<div ng-mouseenter="pause()" ng-mouseleave="play()" class="carousel" ng-swipe-right="prev()" ng-swipe-left="next()">\n    <ol class="carousel-indicators" ng-show="slides.length > 1">\n        <li ng-repeat="slide in slides track by $index" ng-class="{active: isActive(slide)}" ng-click="select(slide)"></li>\n    </ol>\n    <div class="carousel-inner" ng-transclude></div>\n    <a class="left carousel-control" ng-click="prev()" ng-show="slides.length > 1"><span class="glyphicon glyphicon-chevron-left"></span></a>\n    <a class="right carousel-control" ng-click="next()" ng-show="slides.length > 1"><span class="glyphicon glyphicon-chevron-right"></span></a>\n</div>\n')}]),angular.module("template/carousel/slide.html",[]).run(["$templateCache",function(e){e.put("template/carousel/slide.html","<div ng-class=\"{\n    'active': leaving || (active && !entering),\n    'prev': (next || active) && direction=='prev',\n    'next': (next || active) && direction=='next',\n    'right': direction=='prev',\n    'left': direction=='next'\n  }\" class=\"item text-center\" ng-transclude></div>\n")}]),angular.module("template/datepicker/datepicker.html",[]).run(["$templateCache",function(e){e.put("template/datepicker/datepicker.html",'<div ng-switch="datepickerMode" role="application" ng-keydown="keydown($event)">\n  <daypicker ng-switch-when="day" tabindex="0"></daypicker>\n  <monthpicker ng-switch-when="month" tabindex="0"></monthpicker>\n  <yearpicker ng-switch-when="year" tabindex="0"></yearpicker>\n</div>')}]),angular.module("template/datepicker/day.html",[]).run(["$templateCache",function(e){e.put("template/datepicker/day.html",'<table role="grid" aria-labelledby="{{uniqueId}}-title" aria-activedescendant="{{activeDateId}}">\n  <thead>\n    <tr>\n      <th><button type="button" class="btn btn-default btn-sm pull-left" ng-click="move(-1)" tabindex="-1"><i class="glyphicon glyphicon-chevron-left"></i></button></th>\n      <th colspan="{{5 + showWeeks}}"><button id="{{uniqueId}}-title" role="heading" aria-live="assertive" aria-atomic="true" type="button" class="btn btn-default btn-sm" ng-click="toggleMode()" tabindex="-1" style="width:100%;"><strong>{{title}}</strong></button></th>\n      <th><button type="button" class="btn btn-default btn-sm pull-right" ng-click="move(1)" tabindex="-1"><i class="glyphicon glyphicon-chevron-right"></i></button></th>\n    </tr>\n    <tr>\n      <th ng-show="showWeeks" class="text-center"></th>\n      <th ng-repeat="label in labels track by $index" class="text-center"><small aria-label="{{label.full}}">{{label.abbr}}</small></th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr ng-repeat="row in rows track by $index">\n      <td ng-show="showWeeks" class="text-center h6"><em>{{ weekNumbers[$index] }}</em></td>\n      <td ng-repeat="dt in row track by dt.date" class="text-center" role="gridcell" id="{{dt.uid}}" aria-disabled="{{!!dt.disabled}}">\n        <button type="button" style="width:100%;" class="btn btn-default btn-sm" ng-class="{\'btn-info\': dt.selected, active: isActive(dt)}" ng-click="select(dt.date)" ng-disabled="dt.disabled" tabindex="-1"><span ng-class="{\'text-muted\': dt.secondary, \'text-info\': dt.current}">{{dt.label}}</span></button>\n      </td>\n    </tr>\n  </tbody>\n</table>\n')}]),angular.module("template/datepicker/month.html",[]).run(["$templateCache",function(e){e.put("template/datepicker/month.html",'<table role="grid" aria-labelledby="{{uniqueId}}-title" aria-activedescendant="{{activeDateId}}">\n  <thead>\n    <tr>\n      <th><button type="button" class="btn btn-default btn-sm pull-left" ng-click="move(-1)" tabindex="-1"><i class="glyphicon glyphicon-chevron-left"></i></button></th>\n      <th><button id="{{uniqueId}}-title" role="heading" aria-live="assertive" aria-atomic="true" type="button" class="btn btn-default btn-sm" ng-click="toggleMode()" tabindex="-1" style="width:100%;"><strong>{{title}}</strong></button></th>\n      <th><button type="button" class="btn btn-default btn-sm pull-right" ng-click="move(1)" tabindex="-1"><i class="glyphicon glyphicon-chevron-right"></i></button></th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr ng-repeat="row in rows track by $index">\n      <td ng-repeat="dt in row track by dt.date" class="text-center" role="gridcell" id="{{dt.uid}}" aria-disabled="{{!!dt.disabled}}">\n        <button type="button" style="width:100%;" class="btn btn-default" ng-class="{\'btn-info\': dt.selected, active: isActive(dt)}" ng-click="select(dt.date)" ng-disabled="dt.disabled" tabindex="-1"><span ng-class="{\'text-info\': dt.current}">{{dt.label}}</span></button>\n      </td>\n    </tr>\n  </tbody>\n</table>\n')}]),angular.module("template/datepicker/popup.html",[]).run(["$templateCache",function(e){e.put("template/datepicker/popup.html",'<ul class="dropdown-menu" ng-style="{display: (isOpen && \'block\') || \'none\', top: position.top+\'px\', left: position.left+\'px\'}" ng-keydown="keydown($event)">\n	<li ng-transclude></li>\n	<li ng-if="showButtonBar" style="padding:10px 9px 2px">\n		<span class="btn-group pull-left">\n			<button type="button" class="btn btn-sm btn-info" ng-click="select(\'today\')">{{ getText(\'current\') }}</button>\n			<button type="button" class="btn btn-sm btn-danger" ng-click="select(null)">{{ getText(\'clear\') }}</button>\n		</span>\n		<button type="button" class="btn btn-sm btn-success pull-right" ng-click="close()">{{ getText(\'close\') }}</button>\n	</li>\n</ul>\n')}]),angular.module("template/datepicker/year.html",[]).run(["$templateCache",function(e){e.put("template/datepicker/year.html",'<table role="grid" aria-labelledby="{{uniqueId}}-title" aria-activedescendant="{{activeDateId}}">\n  <thead>\n    <tr>\n      <th><button type="button" class="btn btn-default btn-sm pull-left" ng-click="move(-1)" tabindex="-1"><i class="glyphicon glyphicon-chevron-left"></i></button></th>\n      <th colspan="3"><button id="{{uniqueId}}-title" role="heading" aria-live="assertive" aria-atomic="true" type="button" class="btn btn-default btn-sm" ng-click="toggleMode()" tabindex="-1" style="width:100%;"><strong>{{title}}</strong></button></th>\n      <th><button type="button" class="btn btn-default btn-sm pull-right" ng-click="move(1)" tabindex="-1"><i class="glyphicon glyphicon-chevron-right"></i></button></th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr ng-repeat="row in rows track by $index">\n      <td ng-repeat="dt in row track by dt.date" class="text-center" role="gridcell" id="{{dt.uid}}" aria-disabled="{{!!dt.disabled}}">\n        <button type="button" style="width:100%;" class="btn btn-default" ng-class="{\'btn-info\': dt.selected, active: isActive(dt)}" ng-click="select(dt.date)" ng-disabled="dt.disabled" tabindex="-1"><span ng-class="{\'text-info\': dt.current}">{{dt.label}}</span></button>\n      </td>\n    </tr>\n  </tbody>\n</table>\n')}]),angular.module("template/modal/backdrop.html",[]).run(["$templateCache",function(e){e.put("template/modal/backdrop.html",'<div class="modal-backdrop fade {{ backdropClass }}"\n     ng-class="{in: animate}"\n     ng-style="{\'z-index\': 1040 + (index && 1 || 0) + index*10}"\n></div>\n')}]),angular.module("template/modal/window.html",[]).run(["$templateCache",function(e){e.put("template/modal/window.html",'<div tabindex="-1" role="dialog" class="modal fade" ng-class="{in: animate}" ng-style="{\'z-index\': 1050 + index*10, display: \'block\'}">\n    <div class="modal-dialog" ng-class="{\'modal-sm\': size == \'sm\', \'modal-lg\': size == \'lg\'}"><div class="modal-content" modal-transclude></div></div>\n</div>')}]),angular.module("template/pagination/pager.html",[]).run(["$templateCache",function(e){e.put("template/pagination/pager.html",'<ul class="pager">\n  <li ng-class="{disabled: noPrevious(), previous: align}"><a href ng-click="selectPage(page - 1)">{{getText(\'previous\')}}</a></li>\n  <li ng-class="{disabled: noNext(), next: align}"><a href ng-click="selectPage(page + 1)">{{getText(\'next\')}}</a></li>\n</ul>')}]),angular.module("template/pagination/pagination.html",[]).run(["$templateCache",function(e){e.put("template/pagination/pagination.html",'<ul class="pagination">\n  <li ng-if="boundaryLinks" ng-class="{disabled: noPrevious()}"><a href ng-click="selectPage(1)">{{getText(\'first\')}}</a></li>\n  <li ng-if="directionLinks" ng-class="{disabled: noPrevious()}"><a href ng-click="selectPage(page - 1)">{{getText(\'previous\')}}</a></li>\n  <li ng-repeat="page in pages track by $index" ng-class="{active: page.active}"><a href ng-click="selectPage(page.number)">{{page.text}}</a></li>\n  <li ng-if="directionLinks" ng-class="{disabled: noNext()}"><a href ng-click="selectPage(page + 1)">{{getText(\'next\')}}</a></li>\n  <li ng-if="boundaryLinks" ng-class="{disabled: noNext()}"><a href ng-click="selectPage(totalPages)">{{getText(\'last\')}}</a></li>\n</ul>')}]),angular.module("template/tooltip/tooltip-html-unsafe-popup.html",[]).run(["$templateCache",function(e){e.put("template/tooltip/tooltip-html-unsafe-popup.html",'<div class="tooltip {{placement}}" ng-class="{ in: isOpen(), fade: animation() }">\n  <div class="tooltip-arrow"></div>\n  <div class="tooltip-inner" bind-html-unsafe="content"></div>\n</div>\n')}]),angular.module("template/tooltip/tooltip-popup.html",[]).run(["$templateCache",function(e){e.put("template/tooltip/tooltip-popup.html",'<div class="tooltip {{placement}}" ng-class="{ in: isOpen(), fade: animation() }">\n  <div class="tooltip-arrow"></div>\n  <div class="tooltip-inner" ng-bind="content"></div>\n</div>\n')}]),angular.module("template/popover/popover.html",[]).run(["$templateCache",function(e){e.put("template/popover/popover.html",'<div class="popover {{placement}}" ng-class="{ in: isOpen(), fade: animation() }">\n  <div class="arrow"></div>\n\n  <div class="popover-inner">\n      <h3 class="popover-title" ng-bind="title" ng-show="title"></h3>\n      <div class="popover-content" ng-bind="content"></div>\n  </div>\n</div>\n')}]),angular.module("template/progressbar/bar.html",[]).run(["$templateCache",function(e){e.put("template/progressbar/bar.html",'<div class="progress-bar" ng-class="type && \'progress-bar-\' + type" role="progressbar" aria-valuenow="{{value}}" aria-valuemin="0" aria-valuemax="{{max}}" ng-style="{width: percent + \'%\'}" aria-valuetext="{{percent | number:0}}%" ng-transclude></div>')}]),angular.module("template/progressbar/progress.html",[]).run(["$templateCache",function(e){e.put("template/progressbar/progress.html",'<div class="progress" ng-transclude></div>')}]),angular.module("template/progressbar/progressbar.html",[]).run(["$templateCache",function(e){e.put("template/progressbar/progressbar.html",'<div class="progress">\n  <div class="progress-bar" ng-class="type && \'progress-bar-\' + type" role="progressbar" aria-valuenow="{{value}}" aria-valuemin="0" aria-valuemax="{{max}}" ng-style="{width: percent + \'%\'}" aria-valuetext="{{percent | number:0}}%" ng-transclude></div>\n</div>')}]),angular.module("template/rating/rating.html",[]).run(["$templateCache",function(e){e.put("template/rating/rating.html",'<span ng-mouseleave="reset()" ng-keydown="onKeydown($event)" tabindex="0" role="slider" aria-valuemin="0" aria-valuemax="{{range.length}}" aria-valuenow="{{value}}">\n    <i ng-repeat="r in range track by $index" ng-mouseenter="enter($index + 1)" ng-click="rate($index + 1)" class="glyphicon" ng-class="$index < value && (r.stateOn || \'glyphicon-star\') || (r.stateOff || \'glyphicon-star-empty\')">\n        <span class="sr-only">({{ $index < value ? \'*\' : \' \' }})</span>\n    </i>\n</span>')}]),angular.module("template/tabs/tab.html",[]).run(["$templateCache",function(e){e.put("template/tabs/tab.html",'<li ng-class="{active: active, disabled: disabled}">\n  <a href ng-click="select()" tab-heading-transclude>{{heading}}</a>\n</li>\n')}]),angular.module("template/tabs/tabset.html",[]).run(["$templateCache",function(e){e.put("template/tabs/tabset.html",'<div>\n  <ul class="nav nav-{{type || \'tabs\'}}" ng-class="{\'nav-stacked\': vertical, \'nav-justified\': justified}" ng-transclude></ul>\n  <div class="tab-content">\n    <div class="tab-pane" \n         ng-repeat="tab in tabs" \n         ng-class="{active: tab.active}"\n         tab-content-transclude="tab">\n    </div>\n  </div>\n</div>\n')}]),angular.module("template/timepicker/timepicker.html",[]).run(["$templateCache",function(e){e.put("template/timepicker/timepicker.html",'<table>\n	<tbody>\n		<tr class="text-center">\n			<td><a ng-click="incrementHours()" class="btn btn-link"><span class="glyphicon glyphicon-chevron-up"></span></a></td>\n			<td>&nbsp;</td>\n			<td><a ng-click="incrementMinutes()" class="btn btn-link"><span class="glyphicon glyphicon-chevron-up"></span></a></td>\n			<td ng-show="showMeridian"></td>\n		</tr>\n		<tr>\n			<td style="width:50px;" class="form-group" ng-class="{\'has-error\': invalidHours}">\n				<input type="text" ng-model="hours" ng-change="updateHours()" class="form-control text-center" ng-mousewheel="incrementHours()" ng-readonly="readonlyInput" maxlength="2">\n			</td>\n			<td>:</td>\n			<td style="width:50px;" class="form-group" ng-class="{\'has-error\': invalidMinutes}">\n				<input type="text" ng-model="minutes" ng-change="updateMinutes()" class="form-control text-center" ng-readonly="readonlyInput" maxlength="2">\n			</td>\n			<td ng-show="showMeridian"><button type="button" class="btn btn-default text-center" ng-click="toggleMeridian()">{{meridian}}</button></td>\n		</tr>\n		<tr class="text-center">\n			<td><a ng-click="decrementHours()" class="btn btn-link"><span class="glyphicon glyphicon-chevron-down"></span></a></td>\n			<td>&nbsp;</td>\n			<td><a ng-click="decrementMinutes()" class="btn btn-link"><span class="glyphicon glyphicon-chevron-down"></span></a></td>\n			<td ng-show="showMeridian"></td>\n		</tr>\n	</tbody>\n</table>\n')}]),angular.module("template/typeahead/typeahead-match.html",[]).run(["$templateCache",function(e){e.put("template/typeahead/typeahead-match.html",'<a tabindex="-1" bind-html-unsafe="match.label | typeaheadHighlight:query"></a>')}]),angular.module("template/typeahead/typeahead-popup.html",[]).run(["$templateCache",function(e){e.put("template/typeahead/typeahead-popup.html",'<ul class="dropdown-menu" ng-show="isOpen()" ng-style="{top: position.top+\'px\', left: position.left+\'px\'}" style="display: block;" role="listbox" aria-hidden="{{!isOpen()}}">\n    <li ng-repeat="match in matches track by $index" ng-class="{active: isActive($index) }" ng-mouseenter="selectActive($index)" ng-click="selectMatch($index)" role="option" id="{{match.id}}">\n        <div typeahead-match index="$index" match="match" query="query" template-url="templateUrl"></div>\n    </li>\n</ul>\n')}])},60:function(e,t,n){n(129),n(130),n(55),angular.module("rpmPagination",["ui.bootstrap.pagination","RPMPagination.Directives","PaginationFilters"]),e.exports={paginator:function(e){var t=this;t.totalItems=0,t.itemsPerPage=50,t.numPages=0,t.currentPage=1,t.maxSize=10,t.itemType=e}}},61:function(e){var t=function(e,t){function n(){var e,n=[].slice.call(arguments);if(e=_.isObject(n[0])?n[0][t]:n[0],!_.isString(e)&&!_.isNumber(e)&&!this.findByAttributes)throw new Error("Invalid id for collection item: "+e);var i=this.findByAttributes?this.findByAttributes.apply(this,arguments):this.find(e);return i}var i,r=[],a={},s={};return t||(t="id"),i={findOrCreate:function(){var e=[].slice.call(arguments),t=n.apply(this,arguments),i=!!t;return t||(t=this.create.apply(this,arguments)),this.triggerEvent("findOrCreate",{item:t,args:e,existed:i}),t},create:function(){var n=[].slice.call(arguments),i=this.constructor.apply(this,n);return a[i[t]]&&console.log(e.type+" "+i[t]+" duplicated"),a[i[t]]={index:r.length,canDelete:!1},r.push(i),this.triggerEvent("create",{item:i,args:arguments}),i},find:function(e){return a[e]?(this.triggerEvent("find",{id:e,item:r[a[e].index]||null}),r[a[e].index]):void 0},createOrUpdate:function(){var e=[].slice.call(arguments),i=n.apply(this,arguments),r=!!i;return i?i.update.apply(i,arguments):i=this.create.apply(this,arguments),a[i[t]].canDelete=!1,this.triggerEvent("createOrUpdate",{item:i,args:e,existed:r}),i},exists:function(e){return!!this.find(e)},findAll:function(e){for(var t=[],n=0,i=e.length;i>n;n++){var s=a[e[n]];s&&r[s.index]&&t.push(r[s.index])}return t},list:function(){return r},length:function(){return r.length},forEach:function(e,n){for(var i=0,a=r.length;a>i;i++)e.call(n,r[i],r[i][t],this)},remove:function(e){if(a[e]&&a[e].index>=0){var t,n=a[e].index;t=r[n],this.triggerEvent("remove",{id:e,item:t}),r.splice(n,1),delete a[e];for(var i in a)a.hasOwnProperty(i)&&a[i].index>n&&a[i].index--;return t}},reset:function(){this.triggerEvent("reset"),r=[],a={}},removeStale:function(){for(var e in a)if(a.hasOwnProperty(e)){var t=a[e];t.canDelete?this.remove(e):t.canDelete=!0}},on:function(e,t){s[e]||(s[e]=[]),s[e].push(t)},extend:function(e){for(var t in e)this[t]=e[t];return this},constructor:function(){var t=[].slice.call(arguments);t.unshift(e);var n=e.bind.apply(e,t);return new n},triggerEvent:function(e,t){if(s[e])for(var n=0,r=s[e].length;r>n;n++)s[e][n].call(i,t)}}};e.exports=t;try{angular.module("CollectionModule",[]).value("Collection",t)}catch(n){}},66:function(){!function(e,t,n){"use strict";t.module("ngResource",["ng"]).factory("$resource",["$http","$parse",function(e,i){function r(e){return a(e,!0).replace(/%26/gi,"&").replace(/%3D/gi,"=").replace(/%2B/gi,"+")}function a(e,t){return encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,t?"%20":"+")}function s(e,t){this.template=e+="#",this.defaults=t||{},this.urlParams={}}function o(i,r,a){function g(e,t){var n={};return t=d({},r,t),u(t,function(t,i){p(t)&&(t=t()),n[i]=t.charAt&&"@"==t.charAt(0)?f(e,t.substr(1)):t}),n}function m(e){h(e||{},this)}var v=new s(i);return a=d({},l,a),u(a,function(i,r){i.method=t.uppercase(i.method);var a="POST"==i.method||"PUT"==i.method||"PATCH"==i.method;m[r]=function(t,n,r,s){function o(){w.$resolved=!0}var l,f,_={},y=c,b=null;switch(arguments.length){case 4:b=s,y=r;case 3:case 2:if(!p(n)){_=t,l=n,y=r;break}if(p(t)){y=t,b=n;break}y=n,b=r;case 1:p(t)?y=t:a?l=t:_=t;break;case 0:break;default:throw"Expected between 0-4 arguments [params, data, success, error], got "+arguments.length+" arguments."}var f,w=this instanceof m?this:i.isArray?[]:new m(l),k={};return u(i,function(e,t){"params"!=t&&"isArray"!=t&&(k[t]=h(e))}),k.data=l,v.setUrlParams(k,d({},g(l,i.params||{}),_),i.url),f=e(k),w.$resolved=!1,f.then(o,o),w.$then=f.then(function(e){var t=e.data,n=w.$then,r=w.$resolved;return t&&(i.isArray?(w.length=0,u(t,function(e){w.push(new m(e))})):(h(t,w),w.$then=n,w.$resolved=r)),(y||c)(w,e.headers),e.resource=w,e},b).then,w},m.prototype["$"+r]=function(e,t,i){var s,o=g(this),l=c;switch(arguments.length){case 3:o=e,l=t,s=i;break;case 2:case 1:p(e)?(l=e,s=t):(o=e,l=t||c);case 0:break;default:throw"Expected between 1-3 arguments [params, success, error], got "+arguments.length+" arguments."}var u=a?this:n;m[r].call(this,o,u,l,s)}}),m.bind=function(e){return o(i,d({},r,e),a)},m}var l={get:{method:"GET"},save:{method:"POST"},query:{method:"GET",isArray:!0},remove:{method:"DELETE"},"delete":{method:"DELETE"}},c=t.noop,u=t.forEach,d=t.extend,h=t.copy,p=t.isFunction,f=function(e,t){return i(t)(e)};return s.prototype={setUrlParams:function(e,n,i){var a,s,o=this,l=i||o.template,c=o.urlParams={};u(l.split(/\W/),function(e){e&&new RegExp("(^|[^\\\\]):"+e+"(\\W|$)").test(l)&&(c[e]=!0)}),l=l.replace(/\\:/g,":"),n=n||{},u(o.urlParams,function(e,i){a=n.hasOwnProperty(i)?n[i]:o.defaults[i],t.isDefined(a)&&null!==a?(s=r(a),l=l.replace(new RegExp(":"+i+"(\\W|$)","g"),s+"$1")):l=l.replace(new RegExp("(/?):"+i+"(\\W|$)","g"),function(e,t,n){return"/"==n.charAt(0)?n:t+n})}),e.url=l.replace(/\/?#$/,"").replace(/\/*$/,""),u(n,function(t,n){o.urlParams[n]||(e.params=e.params||{},e.params[n]=t)})}},o}])}(window,window.angular)},67:function(e,t,n){var i=n(61);angular.module("BatchServices",[]).factory("BatchDatastoreV2",["$q","$http","$rootScope","BatchRunner","Pager","ServiceAvailability",function(e,t,n,r,a,s){var o=function(t){function o(e,t){return S=e||{},null!=t&&u(t),P.trigger()}function l(){return T.reset(),h(),$.promise}function c(){$.reject()}function u(e){d(e),p(e),n.$emit("batchDatastore/seedSuccess/"+m.type)}function d(e){var t=k(e);T.receivePage({totalCount:parseInt(t.total_items,10),totalPages:parseInt(t.last_page,10)})}function h(){P.active()&&T.hasNext()&&(v(S,T.nextPage()).success(function(e){C--,null!=e&&(d(e),p(e)),D.setAsAvailable(),$.notify(),T.completed()?(b&&M.removeStale(),$.resolve()):T.hasNext()&&h()}).error(function(e,t){C--,D.updateOnFailure({status:t}),$.reject({status:t})}),T.incrementPage(),C++,y>C&&h())}function p(e){for(var t=w(e),n=t.length-1;n>=0;n--)M.createOrUpdate(t[n])}function f(e){var t=e[m.type];if(t)return t;throw new Error("Define responseItems to extract items from the response")}function g(e){if(!e.meta)throw new Error("Define responseMeta to extract meta data from the response");return e.meta}var m=t.resourceType,v=t.fetch,_=t.primaryKey||"id",y=t.maxConcurrentRequests||1,b=void 0===t.autoDeleteStale?!0:t.autoDeleteStale,w=t.responseItems||f,k=t.responseMeta||g,x=void 0===t.scheduler?r:t.scheduler,S={},C=0,$=e.defer();if(!m.type||!m.prototype.type||m.type!==m.prototype.type)throw new Error('The resourceType constructor function must have a type property defined, such as Applications.type = Applications.prototype.type = "applications"');var T=new a,P=new x({interval:t.requestCycleInterval,autoSchedule:t.autoUpdate,start:l,type:m.type,timeout:t.timeout}),D=new s({maxAttempts:t.maxAttempts}),M=new i(m,_).extend({load:o,abortFetchCycle:function(){return c()},disableUpdating:function(){return P.disableAuto()},enableUpdating:function(){return P.enableAuto()},fetchScheduled:function(){return P.scheduled()},loadedCount:function(){return M.length()},totalCount:function(){return T.totalCount()},totalPages:function(){return T.totalPages()},isAvailable:function(){return D.available()},isUnavailable:function(){return!D.available()},options:function(){return{autoDeleteStale:b,autoUpdate:P.autoScheduleEnabled(),fetch:v,loadParams:S,maxAttempts:D.maxAttempts(),maxConcurrentRequests:y,primaryKey:_,resourceType:m,responseItems:w,responseMeta:k,requestCycleInterval:P.interval()}}});return M};return o}]).factory("ServiceAvailability",function(){return function(e){e=e||{};var t=e.maxAttempts||2,n=!0,i=0,r=!0;this.setAsAvailable=function(){i=0,r=!0,n=!1},this.updateOnFailure=function(e){503===e.status&&(n||++i>t)&&(r=!1)},this.available=function(){return r}}}).factory("BatchRunner",["$timeout","$rootScope",function(e,t){var n=function(n){function i(){u=!1,s&&p.scheduleNext()}var r=n.interval||3e5,a=n.date||Date,s=void 0===n.autoSchedule?!0:n.autoSchedule,o=n.start,l=n.type||"",c=0,u=!1,d=null,h=n.timeout||e,p=this;this.trigger=function(){c=(new a).getTime(),u=!0,o().then(function(){t.$emit("batchDatastore/completedCycle/"+l),i()},function(e){t.$emit("batchDatastore/httpError/"+l,e),p.abort()},function(){t.$emit("batchDatastore/fetchSuccess/"+l)})},this.scheduleNext=function(){if(!this.scheduled()){var e=r-((new a).getTime()-c);d=h(function(){d=null,p.trigger()},e)}},this.abort=function(){h.cancel(d),u=!1,s&&this.scheduleNext()},this.active=function(){return u},this.enableAuto=function(){s=!0},this.disableAuto=function(){s=!1},this.autoScheduleEnabled=function(){return s},this.scheduled=function(){return!!d},this.interval=function(){return r}};return n}]).factory("Pager",function(){function e(){var e=0,t=1,n=0,i=1;this.nextPage=function(){return i},this.incrementPage=function(){i++},this.receivePage=function(i){e=i.totalCount,t=i.totalPages<=1?1:i.totalPages,n++},this.hasNext=function(){return t>=i},this.completed=function(){return n>=t},this.reset=function(){n=0,i=1},this.totalCount=function(){return e},this.totalPages=function(){return t},this.pagesReceived=function(){return n}}return e}).factory("BatchDatastore",["$q",function(e){function t(t){var n=e.defer(),i={},r=void 0===t?[]:new Array(t),a=0,s=t||0,o=0,l=0,c=void 0;this.startTime=function(){return c},this.loadedCount=function(){return a},this.totalCount=function(){return s},this.pagesReceived=function(){return l},this.notify=function(){var e=s>0?Math.ceil(a/s*100):0;n.notify(e)},this.promise=function(){return n.promise},this.start=function(){c=(new Date).getTime(),l=0},this.pageReceivedWithTotal=function(e){s=e,l++},this.all=function(){return _.filter(r,function(e){return void 0!==e})},this.find=function(e){return this.exists(e)?r[i[e].index]:void 0},this.findByIds=function(e){for(var t,n=new Array(e.length),i=0,r=0,a=e.length;a>r;r++)t=this.find(e[r]),
t&&(n[r]=t,i++);return n.length=i,n},this.exists=function(e){return void 0!==i[e]},this.add=function(e){i[e.id()]={index:o++,canDelete:!1},r[i[e.id()].index]=e,a++},this.remove=function(e){if(this.exists(e)){var t=i[e];r[t.index]=void 0,delete i[e],a--}},this.update=function(e,t){t=void 0===t?e.id:t;var n=i[t].index;void 0!==n&&(r[n].update(e),i[t].canDelete=!1)},this.clearStale=function(){for(var e in i)if(i.hasOwnProperty(e)){var t=i[e];t.canDelete?this.remove(e):t.canDelete=!0}return r}}return t}])},102:function(e){e.exports=function(){return function(e){return function(){var e;return e=[],e.push("<div class='pager'>\n  <span class='previous' ng-class='{ disabled: noPrevious(), previous: align }' ng-click='selectPage(page - 1)'>&lt;</span>\n  <span class='next' ng-class='{disabled: noNext(), next: align}' ng-click='selectPage(page + 1)'>&gt;</span>\n</div>"),e.join("\n").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(e)}}.call(this)},103:function(e){e.exports=function(){return function(e){return function(){var e;return e=[],e.push("<div class='ng-pagination'>\n  <div class='caption'>\n    <span class='hidden_count' ng-show='paginator.itemType == \"Servers\" && paginator.hiddenItems > 0'>\n      (\n      <a href='?showHidden=true' target='_self' title='{{paginator.itemType}} are automatically hidden when they are no longer reporting.  Click here to unhide them.'>\n        {{paginator.hiddenItems}} hidden\n      </a>\n      )\n    </span>\n    <span class='hidden_count' ng-show='paginator.itemType == \"Servers\" && paginator.showHidden'>\n      (\n      <a href='?' target='_self' title='{{paginator.itemType}} that are inactive are currently visible.  Click here to hide them.'>\n        Hide inactive {{paginator.itemType | lowercase}}\n      </a>\n      )\n    </span>\n  </div>\n  <div class='load-info'>\n    {{firstShowing()}} - {{lastShowing()}} of {{paginator.visibleItems}}\n    <span class='loading_progress' ng-show='paginator.loadedItems < paginator.totalItems'>\n      ({{paginator.loadedItems}} loaded)\n    </span>\n  </div>\n  <pager ng-model='paginator.currentPage' total-items='paginator.visibleItems' items-per-page='paginator.itemsPerPage'></pager>\n</div>"),e.join("\n").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(e)}}.call(this)},104:function(e){e.exports=function(){return function(e){return function(){var e;return e=[],e.push("<div class='health-status-tooltip interactive-tooltip'>\n  <div class='tooltip-container {{entity.healthStatus()}}' data-tip-position='right'>\n    <div class='content'>\n      <div class='header'>\n        <div class='title'>\n          <a href='{{entity.detailURL()}}' target='_self'>\n            <h3>\n              {{entity.name}}\n            </h3>\n          </a>\n        </div>\n        <!-- visual alert summary -->\n        <div class='right violation-counts' ng-if='displayViolationCounts()'>\n          <!-- critical count -->\n          <div class='column' ng-class='{critical: violationSummary().criticalCount()}'>\n            <span class='number'>{{violationSummary().criticalCount()}}</span>\n            <div class='light small uppercase'>Critical</div>\n          </div>\n          <!-- warning count -->\n          <div class='column' ng-class='{warning: violationSummary().warningCount()}'>\n            <span class='number'>{{violationSummary().warningCount()}}</span>\n            <div class='light small uppercase'>Warning</div>\n          </div>\n        </div>\n      </div>\n      <div class='body'>\n        <!-- not reporting -->\n        <div class='not-reporting' ng-hide='entity.reporting'>\n          <span>No data being reported.</span>\n        </div>\n        <!-- no policy -->\n        <div class='no-hawthorne-policy' ng-if='displayNotTargeted()'>\n          <span>Not being targeted by any alert conditions.</span>\n        </div>\n        <!-- not available -->\n        <div class='hawthorne-unavailable' ng-if='isUnavailable()'>\n          <h3>(\u256f\xb0\u25a1\xb0\uff09\u256f\ufe35&nbsp;&nbsp;\u253b\u2501\u253b</h3>\n          <span>Health status is temporarily unavailable.</span>\n        </div>\n        <!-- 1+ alerts -->\n        <div class='problems' ng-if='displayRecentViolations()'>\n          <span class='light small uppercase'>Most Recent</span>\n          <div class='container'>\n            <div class='details small'>\n              <div class='column' ng-class='violationSummary().severity()'>\n                <div class='detail' ng-if=\"violationSummary().severity() === 'critical'\">\n                  <span class='light uppercase'>Critical violation</span>\n                </div>\n                <div class='detail' ng-if=\"violationSummary().severity() === 'warning'\">\n                  <span class='light uppercase'>Warning violation</span>\n                </div>\n              </div>\n              <div class='column right'>\n                <span>Opened at {{violationSummary().date() | formattedDate }}</span>\n              </div>\n            </div>\n            <strong>{{violationSummary().message()}}</strong>\n          </div>\n        </div>\n        <!-- alerts but still loading -->\n        <div class='loading' ng-if='displayLoading()'>\n          <span>Loading violation details...</span>\n        </div>\n      </div>\n    </div>\n    <!-- view violations link -->\n    <div class='footer' ng-show='entity.hawthornePolicy() && entity.reporting'>\n      <div class='content'>\n        <div class='column right'>\n          <a ng-href='{{entity.violationsLink()}}'>View all violations</a>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>"),e.join("\n").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(e)}}.call(this)},127:function(e,t,n){n(66)},129:function(e,t,n){var i={fragment:n(103),pager:n(102)};angular.module("RPMPagination.Templates",[]).run(["$templateCache",function(e){e.put("template/pagination/pager.html",i.pager())}]),angular.module("RPMPagination.Directives",["RPMPagination.Templates"]).directive("paginationFragment",function(){return{restrict:"C",template:i.fragment(),replace:!0,scope:{paginator:"="},controller:["$scope",function(e){e.numPages=function(){return Math.ceil(e.paginator.visibleItems/e.paginator.itemsPerPage)},e.firstShowing=function(){return(e.paginator.currentPage-1)*e.paginator.itemsPerPage+1},e.lastShowing=function(){return e.paginator.currentPage===e.numPages()?e.paginator.visibleItems:e.paginator.currentPage*e.paginator.itemsPerPage}}]}})},130:function(){angular.module("PaginationFilters",[]).filter("paginate",function(){return function(e,t){if(void 0!==t){var n=(t.currentPage-1)*t.itemsPerPage,i=t.itemsPerPage*t.currentPage;return e.slice(n,i)}return e}})},133:function(e,t,n){n(9);var i={healthStatus:n(104)};angular.module("healthStatusDirective",["StringFormatFilters"]).directive("healthStatusTooltip",function(){return{restrict:"E",template:i.healthStatus,replace:!0,scope:{entity:"=",loading:"="},link:function(e,t){t.siblings("a").bind("mouseenter",function(){$(".health-status-tooltip").hide(),t.show()}),t.bind("mouseleave",function(){t.hide()}),e.displayRecentViolations=function(){return e.entity.reporting&&e.entity.violationSummary()&&!e.isUnavailable()&&"green"!==e.entity.healthStatus()},e.displayViolationCounts=function(){return e.entity.reporting&&e.entity.violationSummary()&&!e.isUnavailable()},e.displayLoading=function(){return e.loading.violationSummaries&&e.entity.reporting&&!(e.entity.violationSummary()||"unknown"===e.entity.healthStatus())},e.displayNotTargeted=function(){return"unknown"===e.entity.healthStatus()},e.isUnavailable=function(){return"unavailable"===e.entity.healthStatus()},e.violationSummary=function(){return e.entity.violationSummary()}}}})},194:function(){!function(e){"undefined"==typeof e.fn.each2&&e.fn.extend({each2:function(t){for(var n=e([0]),i=-1,r=this.length;++i<r&&(n.context=n[0]=this[i])&&t.call(n[0],i,n)!==!1;);return this}})}(jQuery),function(e,t){"use strict";function n(e,t){for(var n=0,i=t.length;i>n;n+=1)if(r(e,t[n]))return n;return-1}function i(){var t=e(N);t.appendTo("body");var n={width:t.width()-t[0].clientWidth,height:t.height()-t[0].clientHeight};return t.remove(),n}function r(e,n){return e===n?!0:e===t||n===t?!1:null===e||null===n?!1:e.constructor===String?e+""==n+"":n.constructor===String?n+""==e+"":!1}function a(t,n){var i,r,a;if(null===t||t.length<1)return[];for(i=t.split(n),r=0,a=i.length;a>r;r+=1)i[r]=e.trim(i[r]);return i}function s(e){return e.outerWidth(!1)-e.width()}function o(n){var i="keyup-change-value";n.on("keydown",function(){e.data(n,i)===t&&e.data(n,i,n.val())}),n.on("keyup",function(){var r=e.data(n,i);r!==t&&n.val()!==r&&(e.removeData(n,i),n.trigger("keyup-change"))})}function l(n){n.on("mousemove",function(n){var i=O;i!==t&&i.x===n.pageX&&i.y===n.pageY||e(n.target).trigger("mousemove-filtered",n)})}function c(e,n,i){i=i||t;var r;return function(){var t=arguments;window.clearTimeout(r),r=window.setTimeout(function(){n.apply(i,t)},e)}}function u(e){var t,n=!1;return function(){return n===!1&&(t=e(),n=!0),t}}function d(e,t){var i=c(e,function(e){t.trigger("scroll-debounced",e)});t.on("scroll",function(e){n(e.target,t.get())>=0&&i(e)})}function h(e){e[0]!==document.activeElement&&window.setTimeout(function(){var t,n=e[0],i=e.val().length;e.focus(),e.is(":visible")&&n===document.activeElement&&(n.setSelectionRange?n.setSelectionRange(i,i):n.createTextRange&&(t=n.createTextRange(),t.collapse(!1),t.select()))},0)}function p(t){t=e(t)[0];var n=0,i=0;if("selectionStart"in t)n=t.selectionStart,i=t.selectionEnd-n;else if("selection"in document){t.focus();var r=document.selection.createRange();i=document.selection.createRange().text.length,r.moveStart("character",-t.value.length),n=r.text.length-i}return{offset:n,length:i}}function f(e){e.preventDefault(),e.stopPropagation()}function g(e){e.preventDefault(),e.stopImmediatePropagation()}function m(t){if(!I){var n=t[0].currentStyle||window.getComputedStyle(t[0],null);I=e(document.createElement("div")).css({position:"absolute",left:"-10000px",top:"-10000px",display:"none",fontSize:n.fontSize,fontFamily:n.fontFamily,fontStyle:n.fontStyle,fontWeight:n.fontWeight,letterSpacing:n.letterSpacing,textTransform:n.textTransform,whiteSpace:"nowrap"}),I.attr("class","select2-sizer"),e("body").append(I)}return I.text(t.val()),I.width()}function v(t,n,i){var r,a,s=[];r=t.attr("class"),r&&(r=""+r,e(r.split(" ")).each2(function(){0===this.indexOf("select2-")&&s.push(this)})),r=n.attr("class"),r&&(r=""+r,e(r.split(" ")).each2(function(){0!==this.indexOf("select2-")&&(a=i(this),a&&s.push(this))})),t.attr("class",s.join(" "))}function _(e,t,n,i){var r=e.toUpperCase().indexOf(t.toUpperCase()),a=t.length;return 0>r?void n.push(i(e)):(n.push(i(e.substring(0,r))),n.push("<span class='select2-match'>"),n.push(i(e.substring(r,r+a))),n.push("</span>"),void n.push(i(e.substring(r+a,e.length))))}function y(n){var i,r=0,a=null,s=n.quietMillis||100,o=n.url,l=this;return function(c){window.clearTimeout(i),i=window.setTimeout(function(){r+=1;var i=r,s=n.data,u=o,d=n.transport||e.fn.select2.ajaxDefaults.transport,h={type:n.type||"GET",cache:n.cache||!1,jsonpCallback:n.jsonpCallback||t,dataType:n.dataType||"json"},p=e.extend({},e.fn.select2.ajaxDefaults.params,h);s=s?s.call(l,c.term,c.page,c.context):null,u="function"==typeof u?u.call(l,c.term,c.page,c.context):u,null!==a&&a.abort(),n.params&&(e.isFunction(n.params)?e.extend(p,n.params.call(l)):e.extend(p,n.params)),e.extend(p,{url:u,dataType:n.dataType,data:s,success:function(e){if(!(r>i)){var t=n.results(e,c.page);c.callback(t)}}}),a=d.call(l,p)},s)}}function b(t){var n,i,r=t,a=function(e){return""+e.text};e.isArray(r)&&(i=r,r={results:i}),e.isFunction(r)===!1&&(i=r,r=function(){return i});var s=r();return s.text&&(a=s.text,e.isFunction(a)||(n=s.text,a=function(e){return e[n]})),function(t){var n,i=t.term,s={results:[]};return""===i?void t.callback(r()):(n=function(r,s){var o,l;if(r=r[0],r.children){o={};for(l in r)r.hasOwnProperty(l)&&(o[l]=r[l]);o.children=[],e(r.children).each2(function(e,t){n(t,o.children)}),(o.children.length||t.matcher(i,a(o),r))&&s.push(o)}else t.matcher(i,a(r),r)&&s.push(r)},e(r().results).each2(function(e,t){n(t,s.results)}),void t.callback(s))}}function w(n){var i=e.isFunction(n);return function(r){var a=r.term,s={results:[]};e(i?n():n).each(function(){var e=this.text!==t,n=e?this.text:this;(""===a||r.matcher(a,n))&&s.results.push(e?this:{id:this,text:this})}),r.callback(s)}}function k(t){if(e.isFunction(t))return!0;if(!t)return!1;throw new Error("formatterName must be a function or a falsy value")}function x(t){return e.isFunction(t)?t():t}function S(t){var n=0;return e.each(t,function(e,t){t.children?n+=S(t.children):n++}),n}function C(e,n,i,a){var s,o,l,c,u,d=e,h=!1;if(!a.createSearchChoice||!a.tokenSeparators||a.tokenSeparators.length<1)return t;for(;;){for(o=-1,l=0,c=a.tokenSeparators.length;c>l&&(u=a.tokenSeparators[l],o=e.indexOf(u),!(o>=0));l++);if(0>o)break;if(s=e.substring(0,o),e=e.substring(o+u.length),s.length>0&&(s=a.createSearchChoice(s,n),s!==t&&null!==s&&a.id(s)!==t&&null!==a.id(s))){for(h=!1,l=0,c=n.length;c>l;l++)if(r(a.id(s),a.id(n[l]))){h=!0;break}h||i(s)}}return d!==e?e:void 0}function $(t,n){var i=function(){};return i.prototype=new t,i.prototype.constructor=i,i.prototype.parent=t.prototype,i.prototype=e.extend(i.prototype,n),i}if(window.Select2===t){var T,P,D,M,E,I,O,A,R,T={TAB:9,ENTER:13,ESC:27,SPACE:32,LEFT:37,UP:38,RIGHT:39,DOWN:40,SHIFT:16,CTRL:17,ALT:18,PAGE_UP:33,PAGE_DOWN:34,HOME:36,END:35,BACKSPACE:8,DELETE:46,isArrow:function(e){switch(e=e.which?e.which:e){case T.LEFT:case T.RIGHT:case T.UP:case T.DOWN:return!0}return!1},isControl:function(e){var t=e.which;switch(t){case T.SHIFT:case T.CTRL:case T.ALT:return!0}return!!e.metaKey},isFunctionKey:function(e){return e=e.which?e.which:e,e>=112&&123>=e}},N="<div class='select2-measure-scrollbar'></div>";A=e(document),E=function(){var e=1;return function(){return e++}}(),A.on("mousemove",function(e){O={x:e.pageX,y:e.pageY}}),P=$(Object,{bind:function(e){var t=this;return function(){e.apply(t,arguments)}},init:function(n){var r,a,s,c,h=".select2-results";this.opts=n=this.prepareOpts(n),this.id=n.id,n.element.data("select2")!==t&&null!==n.element.data("select2")&&this.destroy(),this.container=this.createContainer(),this.containerId="s2id_"+(n.element.attr("id")||"autogen"+E()),this.containerSelector="#"+this.containerId.replace(/([;&,\.\+\*\~':"\!\^#$%@\[\]\(\)=>\|])/g,"\\$1"),this.container.attr("id",this.containerId),this.body=u(function(){return n.element.closest("body")}),v(this.container,this.opts.element,this.opts.adaptContainerCssClass),this.container.css(x(n.containerCss)),this.container.addClass(x(n.containerCssClass)),this.elementTabIndex=this.opts.element.attr("tabindex"),this.opts.element.data("select2",this).attr("tabindex","-1").before(this.container),this.container.data("select2",this),this.dropdown=this.container.find(".select2-drop"),this.dropdown.addClass(x(n.dropdownCssClass)),this.dropdown.data("select2",this),this.results=r=this.container.find(h),this.search=a=this.container.find("input.select2-input"),this.resultsPage=0,this.context=null,this.initContainer(),l(this.results),this.dropdown.on("mousemove-filtered touchstart touchmove touchend",h,this.bind(this.highlightUnderEvent)),d(80,this.results),this.dropdown.on("scroll-debounced",h,this.bind(this.loadMoreIfNeeded)),e(this.container).on("change",".select2-input",function(e){e.stopPropagation()}),e(this.dropdown).on("change",".select2-input",function(e){e.stopPropagation()}),e.fn.mousewheel&&r.mousewheel(function(e,t,n,i){var a=r.scrollTop();i>0&&0>=a-i?(r.scrollTop(0),f(e)):0>i&&r.get(0).scrollHeight-r.scrollTop()+i<=r.height()&&(r.scrollTop(r.get(0).scrollHeight-r.height()),f(e))}),o(a),a.on("keyup-change input paste",this.bind(this.updateResults)),a.on("focus",function(){a.addClass("select2-focused")}),a.on("blur",function(){a.removeClass("select2-focused")}),this.dropdown.on("mouseup",h,this.bind(function(t){e(t.target).closest(".select2-result-selectable").length>0&&(this.highlightUnderEvent(t),this.selectHighlighted(t))})),this.dropdown.on("click mouseup mousedown",function(e){e.stopPropagation()}),e.isFunction(this.opts.initSelection)&&(this.initSelection(),this.monitorSource()),null!==n.maximumInputLength&&this.search.attr("maxlength",n.maximumInputLength);var s=n.element.prop("disabled");s===t&&(s=!1),this.enable(!s);var c=n.element.prop("readonly");c===t&&(c=!1),this.readonly(c),R=R||i(),this.autofocus=n.element.prop("autofocus"),n.element.prop("autofocus",!1),this.autofocus&&this.focus()},destroy:function(){var e=this.opts.element.data("select2");this.propertyObserver&&(delete this.propertyObserver,this.propertyObserver=null),e!==t&&(e.container.remove(),e.dropdown.remove(),e.opts.element.removeClass("select2-offscreen").removeData("select2").off(".select2").attr({tabindex:this.elementTabIndex}).prop("autofocus",this.autofocus||!1).show())},optionToData:function(e){return e.is("option")?{id:e.prop("value"),text:e.text(),element:e.get(),css:e.attr("class"),disabled:e.prop("disabled"),locked:r(e.attr("locked"),"locked")}:e.is("optgroup")?{text:e.attr("label"),children:[],element:e.get(),css:e.attr("class")}:void 0},prepareOpts:function(n){var i,s,o,l,c=this;if(i=n.element,"select"===i.get(0).tagName.toLowerCase()&&(this.select=s=n.element),s&&e.each(["id","multiple","ajax","query","createSearchChoice","initSelection","data","tags"],function(){if(this in n)throw new Error("Option '"+this+"' is not allowed for Select2 when attached to a <select> element.")}),n=e.extend({},{populateResults:function(i,r,a){var s,o=this.opts.id;(s=function(i,r,l){var u,d,h,p,f,g,m,v,_,y;for(i=n.sortResults(i,r,a),u=0,d=i.length;d>u;u+=1)h=i[u],f=h.disabled===!0,p=!f&&o(h)!==t,g=h.children&&h.children.length>0,m=e("<li></li>"),m.addClass("select2-results-dept-"+l),m.addClass("select2-result"),m.addClass(p?"select2-result-selectable":"select2-result-unselectable"),f&&m.addClass("select2-disabled"),g&&m.addClass("select2-result-with-children"),m.addClass(c.opts.formatResultCssClass(h)),v=e(document.createElement("div")),v.addClass("select2-result-label"),y=n.formatResult(h,v,a,c.opts.escapeMarkup),y!==t&&v.html(y),m.append(v),g&&(_=e("<ul></ul>"),_.addClass("select2-result-sub"),s(h.children,_,l+1),m.append(_)),m.data("select2-data",h),r.append(m)})(r,i,0)}},e.fn.select2.defaults,n),"function"!=typeof n.id&&(o=n.id,n.id=function(e){return e[o]}),e.isArray(n.element.data("select2Tags"))){if("tags"in n)throw"tags specified as both an attribute 'data-select2-tags' and in options of Select2 "+n.element.attr("id");n.tags=n.element.data("select2Tags")}if(s?(n.query=this.bind(function(n){var r,a,s,o={results:[],more:!1},l=n.term;s=function(e,t){var i;e.is("option")?n.matcher(l,e.text(),e)&&t.push(c.optionToData(e)):e.is("optgroup")&&(i=c.optionToData(e),e.children().each2(function(e,t){s(t,i.children)}),i.children.length>0&&t.push(i))},r=i.children(),this.getPlaceholder()!==t&&r.length>0&&(a=r[0],""===e(a).text()&&(r=r.not(a))),r.each2(function(e,t){s(t,o.results)}),n.callback(o)}),n.id=function(e){return e.id},n.formatResultCssClass=function(e){return e.css}):"query"in n||("ajax"in n?(l=n.element.data("ajax-url"),l&&l.length>0&&(n.ajax.url=l),n.query=y.call(n.element,n.ajax)):"data"in n?n.query=b(n.data):"tags"in n&&(n.query=w(n.tags),n.createSearchChoice===t&&(n.createSearchChoice=function(e){return{id:e,text:e}}),n.initSelection===t&&(n.initSelection=function(t,i){var s=[];e(a(t.val(),n.separator)).each(function(){var t=this,i=this,a=n.tags;e.isFunction(a)&&(a=a()),e(a).each(function(){return r(this.id,t)?(i=this.text,!1):void 0}),s.push({id:t,text:i})}),i(s)}))),"function"!=typeof n.query)throw"query function not defined for Select2 "+n.element.attr("id");return n},monitorSource:function(){var e,n=this.opts.element;n.on("change.select2",this.bind(function(){this.opts.element.data("select2-change-triggered")!==!0&&this.initSelection()})),e=this.bind(function(){var e,i=n.prop("disabled");i===t&&(i=!1),this.enable(!i);var e=n.prop("readonly");e===t&&(e=!1),this.readonly(e),v(this.container,this.opts.element,this.opts.adaptContainerCssClass),this.container.addClass(x(this.opts.containerCssClass)),v(this.dropdown,this.opts.element,this.opts.adaptDropdownCssClass),this.dropdown.addClass(x(this.opts.dropdownCssClass))}),n.on("propertychange.select2 DOMAttrModified.select2",e),this.mutationCallback===t&&(this.mutationCallback=function(t){t.forEach(e)}),"undefined"!=typeof WebKitMutationObserver&&(this.propertyObserver&&(delete this.propertyObserver,this.propertyObserver=null),this.propertyObserver=new WebKitMutationObserver(this.mutationCallback),this.propertyObserver.observe(n.get(0),{attributes:!0,subtree:!1}))},triggerSelect:function(t){var n=e.Event("select2-selecting",{val:this.id(t),object:t});return this.opts.element.trigger(n),!n.isDefaultPrevented()},triggerChange:function(t){t=t||{},t=e.extend({},t,{type:"change",val:this.val()}),this.opts.element.data("select2-change-triggered",!0),this.opts.element.trigger(t),this.opts.element.data("select2-change-triggered",!1),this.opts.element.click(),this.opts.blurOnChange&&this.opts.element.blur()},isInterfaceEnabled:function(){return this.enabledInterface===!0},enableInterface:function(){var e=this._enabled&&!this._readonly,t=!e;return e===this.enabledInterface?!1:(this.container.toggleClass("select2-container-disabled",t),this.close(),this.enabledInterface=e,!0)},enable:function(e){return e===t&&(e=!0),this._enabled===e?!1:(this._enabled=e,this.opts.element.prop("disabled",!e),this.enableInterface(),!0)},readonly:function(e){return e===t&&(e=!1),this._readonly===e?!1:(this._readonly=e,this.opts.element.prop("readonly",e),this.enableInterface(),!0)},opened:function(){return this.container.hasClass("select2-dropdown-open")},positionDropdown:function(){var t,n,i,r,a=this.dropdown,s=this.container.offset(),o=this.container.outerHeight(!1),l=this.container.outerWidth(!1),c=a.outerHeight(!1),u=e(window).scrollLeft()+e(window).width(),d=e(window).scrollTop()+e(window).height(),h=s.top+o,p=s.left,f=d>=h+c,g=s.top-c>=this.body().scrollTop(),m=a.outerWidth(!1),v=u>=p+m,_=a.hasClass("select2-drop-above");this.opts.dropdownAutoWidth?(r=e(".select2-results",a)[0],a.addClass("select2-drop-auto-width"),a.css("width",""),m=a.outerWidth(!1)+(r.scrollHeight===r.clientHeight?0:R.width),m>l?l=m:m=l,v=u>=p+m):this.container.removeClass("select2-drop-auto-width"),"static"!==this.body().css("position")&&(t=this.body().offset(),h-=t.top,p-=t.left),_?(n=!0,!g&&f&&(n=!1)):(n=!1,!f&&g&&(n=!0)),v||(p=s.left+l-m),n?(h=s.top-c,this.container.addClass("select2-drop-above"),a.addClass("select2-drop-above")):(this.container.removeClass("select2-drop-above"),a.removeClass("select2-drop-above")),i=e.extend({top:h,left:p,width:l},x(this.opts.dropdownCss)),a.css(i)},shouldOpen:function(){var t;return this.opened()?!1:this._enabled===!1||this._readonly===!0?!1:(t=e.Event("select2-opening"),this.opts.element.trigger(t),!t.isDefaultPrevented())},clearDropdownAlignmentPreference:function(){this.container.removeClass("select2-drop-above"),this.dropdown.removeClass("select2-drop-above")},open:function(){return this.shouldOpen()?(this.opening(),!0):!1},opening:function(){function t(){return{width:Math.max(document.documentElement.scrollWidth,e(window).width()),height:Math.max(document.documentElement.scrollHeight,e(window).height())}}var n,i=this.containerId,r="scroll."+i,a="resize."+i,s="orientationchange."+i;this.container.addClass("select2-dropdown-open").addClass("select2-container-active"),this.clearDropdownAlignmentPreference(),this.dropdown[0]!==this.body().children().last()[0]&&this.dropdown.detach().appendTo(this.body()),n=e("#select2-drop-mask"),0==n.length&&(n=e(document.createElement("div")),n.attr("id","select2-drop-mask").attr("class","select2-drop-mask"),n.hide(),n.appendTo(this.body()),n.on("mousedown touchstart",function(t){var n,i=e("#select2-drop");i.length>0&&(n=i.data("select2"),n.opts.selectOnBlur&&n.selectHighlighted({noFocus:!0}),n.close(),t.preventDefault(),t.stopPropagation())})),this.dropdown.prev()[0]!==n[0]&&this.dropdown.before(n),e("#select2-drop").removeAttr("id"),this.dropdown.attr("id","select2-drop"),n.css(t()),n.show(),this.dropdown.show(),this.positionDropdown(),this.dropdown.addClass("select2-drop-active"),this.ensureHighlightVisible();var o=this;this.container.parents().add(window).each(function(){e(this).on(a+" "+r+" "+s,function(){e("#select2-drop-mask").css(t()),o.positionDropdown()})})},close:function(){if(this.opened()){var t=this.containerId,n="scroll."+t,i="resize."+t,r="orientationchange."+t;this.container.parents().add(window).each(function(){e(this).off(n).off(i).off(r)}),this.clearDropdownAlignmentPreference(),e("#select2-drop-mask").hide(),this.dropdown.removeAttr("id"),this.dropdown.hide(),this.container.removeClass("select2-dropdown-open"),this.results.empty(),this.clearSearch(),this.search.removeClass("select2-active"),this.opts.element.trigger(e.Event("select2-close"))}},clearSearch:function(){},getMaximumSelectionSize:function(){return x(this.opts.maximumSelectionSize)},ensureHighlightVisible:function(){var t,n,i,r,a,s,o,l=this.results;if(n=this.highlight(),!(0>n)){if(0==n)return void l.scrollTop(0);t=this.findHighlightableChoices().find(".select2-result-label"),i=e(t[n]),r=i.offset().top+i.outerHeight(!0),n===t.length-1&&(o=l.find("li.select2-more-results"),o.length>0&&(r=o.offset().top+o.outerHeight(!0))),a=l.offset().top+l.outerHeight(!0),r>a&&l.scrollTop(l.scrollTop()+(r-a)),s=i.offset().top-l.offset().top,0>s&&"none"!=i.css("display")&&l.scrollTop(l.scrollTop()+s)}},findHighlightableChoices:function(){return this.results.find(".select2-result-selectable:not(.select2-selected):not(.select2-disabled)")},moveHighlight:function(t){for(var n=this.findHighlightableChoices(),i=this.highlight();i>-1&&i<n.length;){i+=t;var r=e(n[i]);if(r.hasClass("select2-result-selectable")&&!r.hasClass("select2-disabled")&&!r.hasClass("select2-selected")){this.highlight(i);break}}},highlight:function(t){var i,r,a=this.findHighlightableChoices();return 0===arguments.length?n(a.filter(".select2-highlighted")[0],a.get()):(t>=a.length&&(t=a.length-1),0>t&&(t=0),this.results.find(".select2-highlighted").removeClass("select2-highlighted"),i=e(a[t]),i.addClass("select2-highlighted"),this.ensureHighlightVisible(),r=i.data("select2-data"),void(r&&this.opts.element.trigger({type:"select2-highlight",val:this.id(r),choice:r})))},countSelectableResults:function(){return this.findHighlightableChoices().length},highlightUnderEvent:function(t){var n=e(t.target).closest(".select2-result-selectable");if(n.length>0&&!n.is(".select2-highlighted")){var i=this.findHighlightableChoices();this.highlight(i.index(n))}else 0==n.length&&this.results.find(".select2-highlighted").removeClass("select2-highlighted")},loadMoreIfNeeded:function(){var e,t=this.results,n=t.find("li.select2-more-results"),i=this.resultsPage+1,r=this,a=this.search.val(),s=this.context;0!==n.length&&(e=n.offset().top-t.offset().top-t.height(),e<=this.opts.loadMorePadding&&(n.addClass("select2-active"),this.opts.query({element:this.opts.element,term:a,page:i,context:s,matcher:this.opts.matcher,callback:this.bind(function(e){r.opened()&&(r.opts.populateResults.call(this,t,e.results,{term:a,page:i,context:s}),r.postprocessResults(e,!1,!1),e.more===!0?(n.detach().appendTo(t).text(r.opts.formatLoadMore(i+1)),window.setTimeout(function(){r.loadMoreIfNeeded()},10)):n.remove(),r.positionDropdown(),r.resultsPage=i,r.context=e.context)})})))},tokenize:function(){},updateResults:function(n){function i(){c.scrollTop(0),l.removeClass("select2-active"),d.positionDropdown()}function a(e){c.html(e),i()}var s,o,l=this.search,c=this.results,u=this.opts,d=this,h=l.val(),p=e.data(this.container,"select2-last-term");if((n===!0||!p||!r(h,p))&&(e.data(this.container,"select2-last-term",h),n===!0||this.showSearchInput!==!1&&this.opened())){var f=this.getMaximumSelectionSize();if(f>=1&&(s=this.data(),e.isArray(s)&&s.length>=f&&k(u.formatSelectionTooBig,"formatSelectionTooBig")))return void a("<li class='select2-selection-limit'>"+u.formatSelectionTooBig(f)+"</li>");if(l.val().length<u.minimumInputLength)return a(k(u.formatInputTooShort,"formatInputTooShort")?"<li class='select2-no-results'>"+u.formatInputTooShort(l.val(),u.minimumInputLength)+"</li>":""),void(n&&this.showSearch(!0));if(u.maximumInputLength&&l.val().length>u.maximumInputLength)return void a(k(u.formatInputTooLong,"formatInputTooLong")?"<li class='select2-no-results'>"+u.formatInputTooLong(l.val(),u.maximumInputLength)+"</li>":"");u.formatSearching&&0===this.findHighlightableChoices().length&&a("<li class='select2-searching'>"+u.formatSearching()+"</li>"),l.addClass("select2-active"),o=this.tokenize(),o!=t&&null!=o&&l.val(o),this.resultsPage=1,u.query({element:u.element,term:l.val(),page:this.resultsPage,context:null,matcher:u.matcher,callback:this.bind(function(s){var o;return this.opened()?(this.context=s.context===t?null:s.context,this.opts.createSearchChoice&&""!==l.val()&&(o=this.opts.createSearchChoice.call(null,l.val(),s.results),o!==t&&null!==o&&d.id(o)!==t&&null!==d.id(o)&&0===e(s.results).filter(function(){return r(d.id(this),d.id(o))}).length&&s.results.unshift(o)),0===s.results.length&&k(u.formatNoMatches,"formatNoMatches")?void a("<li class='select2-no-results'>"+u.formatNoMatches(l.val())+"</li>"):(c.empty(),d.opts.populateResults.call(this,c,s.results,{term:l.val(),page:this.resultsPage,context:null}),s.more===!0&&k(u.formatLoadMore,"formatLoadMore")&&(c.append("<li class='select2-more-results'>"+d.opts.escapeMarkup(u.formatLoadMore(this.resultsPage))+"</li>"),window.setTimeout(function(){d.loadMoreIfNeeded()},10)),this.postprocessResults(s,n),i(),void this.opts.element.trigger({type:"select2-loaded",data:s}))):void this.search.removeClass("select2-active")})})}},cancel:function(){this.close()},blur:function(){this.opts.selectOnBlur&&this.selectHighlighted({noFocus:!0}),this.close(),this.container.removeClass("select2-container-active"),this.search[0]===document.activeElement&&this.search.blur(),this.clearSearch(),this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus")},focusSearch:function(){h(this.search)},selectHighlighted:function(e){var t=this.highlight(),n=this.results.find(".select2-highlighted"),i=n.closest(".select2-result").data("select2-data");i&&(this.highlight(t),this.onSelect(i,e))},getPlaceholder:function(){return this.opts.element.attr("placeholder")||this.opts.element.attr("data-placeholder")||this.opts.element.data("placeholder")||this.opts.placeholder},initContainerWidth:function(){function n(){var n,i,r,a,s;if("off"===this.opts.width)return null;if("element"===this.opts.width)return 0===this.opts.element.outerWidth(!1)?"auto":this.opts.element.outerWidth(!1)+"px";if("copy"===this.opts.width||"resolve"===this.opts.width){if(n=this.opts.element.attr("style"),n!==t)for(i=n.split(";"),a=0,s=i.length;s>a;a+=1)if(r=i[a].replace(/\s/g,"").match(/width:(([-+]?([0-9]*\.)?[0-9]+)(px|em|ex|%|in|cm|mm|pt|pc))/i),null!==r&&r.length>=1)return r[1];return n=this.opts.element.css("width"),n&&n.length>0?n:"resolve"===this.opts.width?0===this.opts.element.outerWidth(!1)?"auto":this.opts.element.outerWidth(!1)+"px":null}return e.isFunction(this.opts.width)?this.opts.width():this.opts.width}var i=n.call(this);null!==i&&this.container.css("width",i)}}),D=$(P,{createContainer:function(){var t=e(document.createElement("div")).attr({"class":"select2-container"}).html(["<a href='javascript:void(0)' onclick='return false;' class='select2-choice' tabindex='-1'>","   <span>&nbsp;</span><abbr class='select2-search-choice-close'></abbr>","   <div><b></b></div>","</a>","<input class='select2-focusser select2-offscreen' type='text'/>","<div class='select2-drop select2-display-none'>","   <div class='select2-search'>","       <input type='text' autocomplete='off' autocorrect='off' autocapitilize='off' spellcheck='false' class='select2-input'/>","   </div>","   <ul class='select2-results'>","   </ul>","</div>"].join(""));return t},enableInterface:function(){this.parent.enableInterface.apply(this,arguments)&&this.focusser.prop("disabled",!this.isInterfaceEnabled())},opening:function(){var t,n;this.parent.opening.apply(this,arguments),this.showSearchInput!==!1&&this.search.val(this.focusser.val()),this.search.focus(),t=this.search.get(0),t.createTextRange&&(n=t.createTextRange(),n.collapse(!1),n.select()),this.focusser.prop("disabled",!0).val(""),this.updateResults(!0),this.opts.element.trigger(e.Event("select2-open"))},close:function(){this.opened()&&(this.parent.close.apply(this,arguments),
this.focusser.removeAttr("disabled"),this.focusser.focus())},focus:function(){this.opened()?this.close():(this.focusser.removeAttr("disabled"),this.focusser.focus())},isFocused:function(){return this.container.hasClass("select2-container-active")},cancel:function(){this.parent.cancel.apply(this,arguments),this.focusser.removeAttr("disabled"),this.focusser.focus()},initContainer:function(){var t,n=this.container,i=this.dropdown;this.showSearch(!1),this.selection=t=n.find(".select2-choice"),this.focusser=n.find(".select2-focusser"),this.focusser.attr("id","s2id_autogen"+E()),e("label[for='"+this.opts.element.attr("id")+"']").attr("for",this.focusser.attr("id")),this.focusser.attr("tabindex",this.elementTabIndex),this.search.on("keydown",this.bind(function(e){if(this.isInterfaceEnabled()){if(e.which===T.PAGE_UP||e.which===T.PAGE_DOWN)return void f(e);switch(e.which){case T.UP:case T.DOWN:return this.moveHighlight(e.which===T.UP?-1:1),void f(e);case T.ENTER:return this.selectHighlighted(),void f(e);case T.TAB:return void this.selectHighlighted({noFocus:!0});case T.ESC:return this.cancel(e),void f(e)}}})),this.search.on("blur",this.bind(function(){document.activeElement===this.body().get(0)&&window.setTimeout(this.bind(function(){this.search.focus()}),0)})),this.focusser.on("keydown",this.bind(function(e){return!this.isInterfaceEnabled()||e.which===T.TAB||T.isControl(e)||T.isFunctionKey(e)||e.which===T.ESC?void 0:this.opts.openOnEnter===!1&&e.which===T.ENTER?void f(e):e.which==T.DOWN||e.which==T.UP||e.which==T.ENTER&&this.opts.openOnEnter?(this.open(),void f(e)):e.which==T.DELETE||e.which==T.BACKSPACE?(this.opts.allowClear&&this.clear(),void f(e)):void 0})),o(this.focusser),this.focusser.on("keyup-change input",this.bind(function(e){e.stopPropagation(),this.opened()||this.open()})),t.on("mousedown","abbr",this.bind(function(e){this.isInterfaceEnabled()&&(this.clear(),g(e),this.close(),this.selection.focus())})),t.on("mousedown",this.bind(function(t){this.container.hasClass("select2-container-active")||this.opts.element.trigger(e.Event("select2-focus")),this.opened()?this.close():this.isInterfaceEnabled()&&this.open(),f(t)})),i.on("mousedown",this.bind(function(){this.search.focus()})),t.on("focus",this.bind(function(e){f(e)})),this.focusser.on("focus",this.bind(function(){this.container.hasClass("select2-container-active")||this.opts.element.trigger(e.Event("select2-focus")),this.container.addClass("select2-container-active")})).on("blur",this.bind(function(){this.opened()||(this.container.removeClass("select2-container-active"),this.opts.element.trigger(e.Event("select2-blur")))})),this.search.on("focus",this.bind(function(){this.container.hasClass("select2-container-active")||this.opts.element.trigger(e.Event("select2-focus")),this.container.addClass("select2-container-active")})),this.initContainerWidth(),this.opts.element.addClass("select2-offscreen"),this.setPlaceholder()},clear:function(e){var t=this.selection.data("select2-data");t&&(this.opts.element.val(""),this.selection.find("span").empty(),this.selection.removeData("select2-data"),this.setPlaceholder(),e!==!1&&(this.opts.element.trigger({type:"select2-removed",val:this.id(t),choice:t}),this.triggerChange({removed:t})))},initSelection:function(){if(""===this.opts.element.val()&&""===this.opts.element.text())this.updateSelection([]),this.close(),this.setPlaceholder();else{var e=this;this.opts.initSelection.call(null,this.opts.element,function(n){n!==t&&null!==n&&(e.updateSelection(n),e.close(),e.setPlaceholder())})}},prepareOpts:function(){var t=this.parent.prepareOpts.apply(this,arguments),n=this;return"select"===t.element.get(0).tagName.toLowerCase()?t.initSelection=function(e,t){var i=e.find(":selected");t(n.optionToData(i))}:"data"in t&&(t.initSelection=t.initSelection||function(n,i){var a=n.val(),s=null;t.query({matcher:function(e,n,i){var o=r(a,t.id(i));return o&&(s=i),o},callback:e.isFunction(i)?function(){i(s)}:e.noop})}),t},getPlaceholder:function(){return this.select&&""!==this.select.find("option").first().text()?t:this.parent.getPlaceholder.apply(this,arguments)},setPlaceholder:function(){var e=this.getPlaceholder();if(""===this.opts.element.val()&&e!==t){if(this.select&&""!==this.select.find("option:first").text())return;this.selection.find("span").html(this.opts.escapeMarkup(e)),this.selection.addClass("select2-default"),this.container.removeClass("select2-allowclear")}},postprocessResults:function(e,t,n){var i=0,a=this;if(this.findHighlightableChoices().each2(function(e,t){return r(a.id(t.data("select2-data")),a.opts.element.val())?(i=e,!1):void 0}),n!==!1&&this.highlight(i),t===!0&&this.showSearchInput===!1){var s=this.opts.minimumResultsForSearch;s>=0&&this.showSearch(S(e.results)>=s)}},showSearch:function(t){this.showSearchInput=t,this.dropdown.find(".select2-search").toggleClass("select2-search-hidden",!t),this.dropdown.find(".select2-search").toggleClass("select2-offscreen",!t),e(this.dropdown,this.container).toggleClass("select2-with-searchbox",t)},onSelect:function(e,t){if(this.triggerSelect(e)){var n=this.opts.element.val(),i=this.data();this.opts.element.val(this.id(e)),this.updateSelection(e),this.opts.element.trigger({type:"select2-selected",val:this.id(e),choice:e}),this.close(),t&&t.noFocus||this.selection.focus(),r(n,this.id(e))||this.triggerChange({added:e,removed:i})}},updateSelection:function(e){var n,i=this.selection.find("span");this.selection.data("select2-data",e),i.empty(),n=this.opts.formatSelection(e,i),n!==t&&i.append(this.opts.escapeMarkup(n)),this.selection.removeClass("select2-default"),this.opts.allowClear&&this.getPlaceholder()!==t&&this.container.addClass("select2-allowclear")},val:function(){var e,n=!1,i=null,r=this,a=this.data();if(0===arguments.length)return this.opts.element.val();if(e=arguments[0],arguments.length>1&&(n=arguments[1]),this.select)this.select.val(e).find(":selected").each2(function(e,t){return i=r.optionToData(t),!1}),this.updateSelection(i),this.setPlaceholder(),n&&this.triggerChange({added:i,removed:a});else{if(this.opts.initSelection===t)throw new Error("cannot call val() if initSelection() is not defined");if(!e&&0!==e)return void this.clear(n);this.opts.element.val(e),this.opts.initSelection(this.opts.element,function(e){r.opts.element.val(e?r.id(e):""),r.updateSelection(e),r.setPlaceholder(),n&&r.triggerChange({added:e,removed:a})})}},clearSearch:function(){this.search.val(""),this.focusser.val("")},data:function(e,n){var i;return 0===arguments.length?(i=this.selection.data("select2-data"),i==t&&(i=null),i):void(e&&""!==e?(i=this.data(),this.opts.element.val(e?this.id(e):""),this.updateSelection(e),n&&this.triggerChange({added:e,removed:i})):this.clear(n))}}),M=$(P,{createContainer:function(){var t=e(document.createElement("div")).attr({"class":"select2-container select2-container-multi"}).html(["    <ul class='select2-choices'>","  <li class='select2-search-field'>","    <input type='text' autocomplete='off' autocorrect='off' autocapitilize='off' spellcheck='false' class='select2-input'>","  </li>","</ul>","<div class='select2-drop select2-drop-multi select2-display-none'>","   <ul class='select2-results'>","   </ul>","</div>"].join(""));return t},prepareOpts:function(){var t=this.parent.prepareOpts.apply(this,arguments),n=this;return"select"===t.element.get(0).tagName.toLowerCase()?t.initSelection=function(e,t){var i=[];e.find(":selected").each2(function(e,t){i.push(n.optionToData(t))}),t(i)}:"data"in t&&(t.initSelection=t.initSelection||function(n,i){var s=a(n.val(),t.separator),o=[];t.query({matcher:function(n,i,a){var l=e.grep(s,function(e){return r(e,t.id(a))}).length;return l&&o.push(a),l},callback:e.isFunction(i)?function(){for(var e=[],n=0;n<s.length;n++)for(var a=s[n],l=0;l<o.length;l++){var c=o[l];if(r(a,t.id(c))){e.push(c),o.splice(l,1);break}}i(e)}:e.noop})}),t},selectChoice:function(e){var t=this.container.find(".select2-search-choice-focus");t.length&&e&&e[0]==t[0]||(t.length&&this.opts.element.trigger("choice-deselected",t),t.removeClass("select2-search-choice-focus"),e&&e.length&&(this.close(),e.addClass("select2-search-choice-focus"),this.opts.element.trigger("choice-selected",e)))},initContainer:function(){var t,n=".select2-choices";this.searchContainer=this.container.find(".select2-search-field"),this.selection=t=this.container.find(n);var i=this;this.selection.on("mousedown",".select2-search-choice",function(){i.search[0].focus(),i.selectChoice(e(this))}),this.search.attr("id","s2id_autogen"+E()),e("label[for='"+this.opts.element.attr("id")+"']").attr("for",this.search.attr("id")),this.search.on("input paste",this.bind(function(){this.isInterfaceEnabled()&&(this.opened()||this.open())})),this.search.attr("tabindex",this.elementTabIndex),this.keydowns=0,this.search.on("keydown",this.bind(function(e){if(this.isInterfaceEnabled()){++this.keydowns;var n=t.find(".select2-search-choice-focus"),i=n.prev(".select2-search-choice:not(.select2-locked)"),r=n.next(".select2-search-choice:not(.select2-locked)"),a=p(this.search);if(n.length&&(e.which==T.LEFT||e.which==T.RIGHT||e.which==T.BACKSPACE||e.which==T.DELETE||e.which==T.ENTER)){var s=n;return e.which==T.LEFT&&i.length?s=i:e.which==T.RIGHT?s=r.length?r:null:e.which===T.BACKSPACE?(this.unselect(n.first()),this.search.width(10),s=i.length?i:r):e.which==T.DELETE?(this.unselect(n.first()),this.search.width(10),s=r.length?r:null):e.which==T.ENTER&&(s=null),this.selectChoice(s),f(e),void(s&&s.length||this.open())}if((e.which===T.BACKSPACE&&1==this.keydowns||e.which==T.LEFT)&&0==a.offset&&!a.length)return this.selectChoice(t.find(".select2-search-choice:not(.select2-locked)").last()),void f(e);if(this.selectChoice(null),this.opened())switch(e.which){case T.UP:case T.DOWN:return this.moveHighlight(e.which===T.UP?-1:1),void f(e);case T.ENTER:return this.selectHighlighted(),void f(e);case T.TAB:return void this.selectHighlighted({noFocus:!0});case T.ESC:return this.cancel(e),void f(e)}if(e.which!==T.TAB&&!T.isControl(e)&&!T.isFunctionKey(e)&&e.which!==T.BACKSPACE&&e.which!==T.ESC){if(e.which===T.ENTER){if(this.opts.openOnEnter===!1)return;if(e.altKey||e.ctrlKey||e.shiftKey||e.metaKey)return}this.open(),e.which!==T.PAGE_UP&&e.which!==T.PAGE_DOWN||f(e),e.which===T.ENTER&&f(e)}}})),this.search.on("keyup",this.bind(function(){this.keydowns=0,this.resizeSearch()})),this.search.on("blur",this.bind(function(t){this.container.removeClass("select2-container-active"),this.search.removeClass("select2-focused"),this.selectChoice(null),this.opened()||this.clearSearch(),t.stopImmediatePropagation(),this.opts.element.trigger(e.Event("select2-blur"))})),this.container.on("mousedown",n,this.bind(function(t){this.isInterfaceEnabled()&&(e(t.target).closest(".select2-search-choice").length>0||(this.selectChoice(null),this.clearPlaceholder(),this.container.hasClass("select2-container-active")||this.opts.element.trigger(e.Event("select2-focus")),this.open(),this.focusSearch(),t.preventDefault()))})),this.container.on("focus",n,this.bind(function(){this.isInterfaceEnabled()&&(this.container.hasClass("select2-container-active")||this.opts.element.trigger(e.Event("select2-focus")),this.container.addClass("select2-container-active"),this.dropdown.addClass("select2-drop-active"),this.clearPlaceholder())})),this.initContainerWidth(),this.opts.element.addClass("select2-offscreen"),this.clearSearch()},enableInterface:function(){this.parent.enableInterface.apply(this,arguments)&&this.search.prop("disabled",!this.isInterfaceEnabled())},initSelection:function(){if(""===this.opts.element.val()&&""===this.opts.element.text()&&(this.updateSelection([]),this.close(),this.clearSearch()),this.select||""!==this.opts.element.val()){var e=this;this.opts.initSelection.call(null,this.opts.element,function(n){n!==t&&null!==n&&(e.updateSelection(n),e.close(),e.clearSearch())})}},clearSearch:function(){var e=this.getPlaceholder(),n=this.getMaxSearchWidth();e!==t&&0===this.getVal().length&&this.search.hasClass("select2-focused")===!1?(this.search.val(e).addClass("select2-default"),this.search.width(n>0?n:this.container.css("width"))):this.search.val("").width(10)},clearPlaceholder:function(){this.search.hasClass("select2-default")&&this.search.val("").removeClass("select2-default")},opening:function(){this.clearPlaceholder(),this.resizeSearch(),this.parent.opening.apply(this,arguments),this.focusSearch(),this.updateResults(!0),this.search.focus(),this.opts.element.trigger(e.Event("select2-open"))},close:function(){this.opened()&&this.parent.close.apply(this,arguments)},focus:function(){this.close(),this.search.focus()},isFocused:function(){return this.search.hasClass("select2-focused")},updateSelection:function(t){var i=[],r=[],a=this;e(t).each(function(){n(a.id(this),i)<0&&(i.push(a.id(this)),r.push(this))}),t=r,this.selection.find(".select2-search-choice").remove(),e(t).each(function(){a.addSelectedChoice(this)}),a.postprocessResults()},tokenize:function(){var e=this.search.val();e=this.opts.tokenizer(e,this.data(),this.bind(this.onSelect),this.opts),null!=e&&e!=t&&(this.search.val(e),e.length>0&&this.open())},onSelect:function(e,t){this.triggerSelect(e)&&(this.addSelectedChoice(e),this.opts.element.trigger({type:"selected",val:this.id(e),choice:e}),!this.select&&this.opts.closeOnSelect||this.postprocessResults(),this.opts.closeOnSelect?(this.close(),this.search.width(10)):this.countSelectableResults()>0?(this.search.width(10),this.resizeSearch(),this.getMaximumSelectionSize()>0&&this.val().length>=this.getMaximumSelectionSize()&&this.updateResults(!0),this.positionDropdown()):(this.close(),this.search.width(10)),this.triggerChange({added:e}),t&&t.noFocus||this.focusSearch())},cancel:function(){this.close(),this.focusSearch()},addSelectedChoice:function(n){var i,r=!n.locked,a=e("<li class='select2-search-choice'>    <div></div>    <a href='#' onclick='return false;' class='select2-search-choice-close' tabindex='-1'></a></li>"),s=e("<li class='select2-search-choice select2-locked'><div></div></li>"),o=r?a:s,l=this.id(n),c=this.getVal();i=this.opts.formatSelection(n,o.find("div")),i!=t&&o.find("div").replaceWith("<div title='"+this.opts.escapeMarkup(i)+"'>"+this.opts.escapeMarkup(i)+"</div>"),r&&o.find(".select2-search-choice-close").on("mousedown",f).on("click dblclick",this.bind(function(t){this.isInterfaceEnabled()&&(e(t.target).closest(".select2-search-choice").fadeOut("fast",this.bind(function(){this.unselect(e(t.target)),this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus"),this.close(),this.focusSearch()})).dequeue(),f(t))})).on("focus",this.bind(function(){this.isInterfaceEnabled()&&(this.container.addClass("select2-container-active"),this.dropdown.addClass("select2-drop-active"))})),o.data("select2-data",n),o.insertBefore(this.searchContainer),c.push(l),this.setVal(c)},unselect:function(e){var t,i,r=this.getVal();if(e=e.closest(".select2-search-choice"),0===e.length)throw"Invalid argument: "+e+". Must be .select2-search-choice";t=e.data("select2-data"),t&&(i=n(this.id(t),r),i>=0&&(r.splice(i,1),this.setVal(r),this.select&&this.postprocessResults()),e.remove(),this.opts.element.trigger({type:"removed",val:this.id(t),choice:t}),this.triggerChange({removed:t}))},postprocessResults:function(e,t,i){var r=this.getVal(),a=this.results.find(".select2-result"),s=this.results.find(".select2-result-with-children"),o=this;a.each2(function(e,t){var i=o.id(t.data("select2-data"));n(i,r)>=0&&(t.addClass("select2-selected"),t.find(".select2-result-selectable").addClass("select2-selected"))}),s.each2(function(e,t){t.is(".select2-result-selectable")||0!==t.find(".select2-result-selectable:not(.select2-selected)").length||t.addClass("select2-selected")}),-1==this.highlight()&&i!==!1&&o.highlight(0),!this.opts.createSearchChoice&&!a.filter(".select2-result:not(.select2-selected)").length>0&&this.results.append("<li class='select2-no-results'>"+o.opts.formatNoMatches(o.search.val())+"</li>")},getMaxSearchWidth:function(){return this.selection.width()-s(this.search)},resizeSearch:function(){var e,t,n,i,r,a=s(this.search);e=m(this.search)+10,t=this.search.offset().left,n=this.selection.width(),i=this.selection.offset().left,r=n-(t-i)-a,e>r&&(r=n-a),40>r&&(r=n-a),0>=r&&(r=e),this.search.width(r)},getVal:function(){var e;return this.select?(e=this.select.val(),null===e?[]:e):(e=this.opts.element.val(),a(e,this.opts.separator))},setVal:function(t){var i;this.select?this.select.val(t):(i=[],e(t).each(function(){n(this,i)<0&&i.push(this)}),this.opts.element.val(0===i.length?"":i.join(this.opts.separator)))},buildChangeDetails:function(e,t){for(var t=t.slice(0),e=e.slice(0),n=0;n<t.length;n++)for(var i=0;i<e.length;i++)r(this.opts.id(t[n]),this.opts.id(e[i]))&&(t.splice(n,1),n--,e.splice(i,1),i--);return{added:t,removed:e}},val:function(n,i){var r,a=this;if(0===arguments.length)return this.getVal();if(r=this.data(),r.length||(r=[]),!n&&0!==n)return this.opts.element.val(""),this.updateSelection([]),this.clearSearch(),void(i&&this.triggerChange({added:this.data(),removed:r}));if(this.setVal(n),this.select)this.opts.initSelection(this.select,this.bind(this.updateSelection)),i&&this.triggerChange(this.buildChangeDetails(r,this.data()));else{if(this.opts.initSelection===t)throw new Error("val() cannot be called if initSelection() is not defined");this.opts.initSelection(this.opts.element,function(t){var n=e(t).map(a.id);a.setVal(n),a.updateSelection(t),a.clearSearch(),i&&a.triggerChange(this.buildChangeDetails(r,this.data()))})}this.clearSearch()},onSortStart:function(){if(this.select)throw new Error("Sorting of elements is not supported when attached to <select>. Attach to <input type='hidden'/> instead.");this.search.width(0),this.searchContainer.hide()},onSortEnd:function(){var t=[],n=this;this.searchContainer.show(),this.searchContainer.appendTo(this.searchContainer.parent()),this.resizeSearch(),this.selection.find(".select2-search-choice").each(function(){t.push(n.opts.id(e(this).data("select2-data")))}),this.setVal(t),this.triggerChange()},data:function(t,n){var i,r,a=this;return 0===arguments.length?this.selection.find(".select2-search-choice").map(function(){return e(this).data("select2-data")}).get():(r=this.data(),t||(t=[]),i=e.map(t,function(e){return a.opts.id(e)}),this.setVal(i),this.updateSelection(t),this.clearSearch(),n&&this.triggerChange(this.buildChangeDetails(r,this.data())),void 0)}}),e.fn.select2=function(){var i,r,a,s,o=Array.prototype.slice.call(arguments,0),l=["val","destroy","opened","open","close","focus","isFocused","container","onSortStart","onSortEnd","enable","readonly","positionDropdown","data"],c=["val","opened","isFocused","container","data"];return this.each(function(){if(0===o.length||"object"==typeof o[0])i=0===o.length?{}:e.extend({},o[0]),i.element=e(this),"select"===i.element.get(0).tagName.toLowerCase()?s=i.element.prop("multiple"):(s=i.multiple||!1,"tags"in i&&(i.multiple=s=!0)),r=s?new M:new D,r.init(i);else{if("string"!=typeof o[0])throw"Invalid arguments to select2 plugin: "+o;if(n(o[0],l)<0)throw"Unknown method: "+o[0];if(a=t,r=e(this).data("select2"),r===t)return;if(a="container"===o[0]?r.container:r[o[0]].apply(r,o.slice(1)),n(o[0],c)>=0)return!1}}),a===t?this:a},e.fn.select2.defaults={width:"copy",loadMorePadding:0,closeOnSelect:!0,openOnEnter:!0,containerCss:{},dropdownCss:{},containerCssClass:"",dropdownCssClass:"",formatResult:function(e,t,n,i){var r=[];return _(e.text,n.term,r,i),r.join("")},formatSelection:function(e){return e?e.text:t},sortResults:function(e){return e},formatResultCssClass:function(){return t},formatNoMatches:function(){return"No matches found"},formatInputTooShort:function(e,t){var n=t-e.length;return"Please enter "+n+" more character"+(1==n?"":"s")},formatInputTooLong:function(e,t){var n=e.length-t;return"Please delete "+n+" character"+(1==n?"":"s")},formatSelectionTooBig:function(e){return"You can only select "+e+" item"+(1==e?"":"s")},formatLoadMore:function(){return"Loading more results..."},formatSearching:function(){return"Searching..."},minimumResultsForSearch:0,minimumInputLength:0,maximumInputLength:null,maximumSelectionSize:0,id:function(e){return e.id},matcher:function(e,t){return(""+t).toUpperCase().indexOf((""+e).toUpperCase())>=0},separator:",",tokenSeparators:[],tokenizer:C,escapeMarkup:function(e){var t={"\\":"&#92;","&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#47;"};return String(e).replace(/[&<>"'\/\\]/g,function(e){return t[e]})},blurOnChange:!1,selectOnBlur:!1,adaptContainerCssClass:function(e){return e},adaptDropdownCssClass:function(){return null}},e.fn.select2.ajaxDefaults={transport:e.ajax,params:{type:"GET",cache:!1,dataType:"json"}},window.Select2={query:{ajax:y,local:b,tags:w},util:{debounce:c,markMatch:_},"class":{"abstract":P,single:D,multi:M}}}}(jQuery)},195:function(e,t,n){n(196),n(49);var i=n(484);angular.module("ServerAgentRollupFilters",["ServerAgentPropertiesServices","ArrayUtilsService"]).filter("identifySortedCommonServers",function(){return function(e){if(e.length){if(1===e.length)return e[0].unfilteredServerIds;var t=e.sort(function(e,t){return e.unfilteredServerIds.length-t.unfilteredServerIds.length}),n=t.map(function(e){return e.unfilteredServerIds});return i.intersection.apply(null,n)}return[]}}).filter("labelServerIntersection",["$filter","arrayUtils",function(e){var t=function(e,t,n){return t.includes(e)||0===n.intersection(e.unfilteredServerIds,!0).length};return function(n,i){for(var r=e("identifySortedCommonServers")(i),a=0;a<n.length;a++){var s=n[a];s.hasServers()?i.length>0?s.hidden=t(s,i,r):s.hidden=!1:s.hidden=!0}return n}}]).filter("rollups",["arrayUtils","$filter",function(e,t){return function(e,n){for(var i=t("identifySortedCommonServers")(n),r=0;r<e.length;r++){var a=e[r],s=a.server_health_status;n.length>0?a.filteredServers={green:i.intersection(s.green,!0),orange:i.intersection(s.orange,!0),red:i.intersection(s.red,!0),gray:i.intersection(s.gray,!0),all:i.intersection(a.unfilteredServerIds,!0)}:a.filteredServers={green:s.green,orange:s.orange,red:s.red,gray:s.gray,all:a.unfilteredServerIds},a.hidden=0===a.filteredServers.all.length}return e}}]).filter("categoryFilter",function(){return function(e,t){return e.filter(function(e){return!e.hidden&&e.category==t})}})},196:function(e,t,n){n(16),n(195),n(49),angular.module("ServerAgentPropertiesServices",["ServerAgentServices","ngResource","rpmConstants","ServerAgentRollupFilters","ArrayUtilsService"]).factory("Label",["$resource",function(){function e(e){angular.extend(this,e)}return e.prototype.filteredServers={all:[],green:[],orange:[],red:[],gray:[]},e.prototype.hidden=!1,e.prototype.unfilteredServerIds=[],e.prototype.hasServers=function(){return!!this.unfilteredServerIds.length},e.prototype.status_count=function(e,t){if("undefined"==typeof t)return this.server_health_status[e].length;for(var n=0,i=0;i<t.length;i++)"undefined"!=typeof t[i]&&t[i].health_status==e&&n++;return n},e.prototype.forAllServers=!1,e}]).service("LabelService",["$q","$filter","features","arrayUtils","Label",function(e,t,n,i,r){var a=e.defer(),s=[],o=0,l=[],c={};this.setSelectedLabels=function(e){var t=[];if(s.length>0)for(var n=e.length,i=0;n>i;i++){var r=e[i];label=s[c[r]],label&&label.hasServers()&&(t[i]=label,label.hidden=!0)}return t},this.all=function(){return s},this.forServer=function(e){for(var t=0,n=0,i=s.length,r=e.id,a=[];i>t;)s[t].unfilteredServerIds.includes(r)&&(a[n]=s[t],n++),t++;return a},this.categories=function(){return l},this.addOrUpdateLabel=function(e){d([e]),p(),a.notify(s)},this.addOrUpdateLabels=function(e){d(e),p(),a.notify(s)},this.applySelectedLabels=function(e){t("labelServerIntersection")(s,e)};var u=function(e){for(var t=[],n={},i=0;i<e.length;i++){var r=e[i];n[r]!==!0&&(t.push(r),n[r]=!0)}return t},d=function(e){for(var t,n,i=e.length,l=void 0===s[o]?o:i,u=0;i>u;u++)if(t=e[u],h(t),t.hidden=!t.unfilteredServerIds.length,n=c[t.key],void 0!==n){var d=s[n];for(attribute in t)if("unfilteredServerIds"==attribute){for(var p=[],f=0;f<t.unfilteredServerIds.length;f++){var g=t.unfilteredServerIds[f];d.unfilteredServerIdsMap[g]!==!0&&(p.push(g),d.unfilteredServerIdsMap[g]=!0)}d.unfilteredServerIds=d.unfilteredServerIds.concat(p)}else d[attribute]=t[attribute]}else{o++,t=new r(t),t.origins&&(t.unfilteredServerIds=t.origins.apm,t.links.servers=t.origins.apm),t.unfilteredServerIdsMap={};for(var m=0;m<t.unfilteredServerIds.length;m++)currentServerId=t.unfilteredServerIds[m],t.unfilteredServerIdsMap[currentServerId]=!0;s[l]=t,c[t.key]=l++}a.notify(s)},h=function(e){e.unfilteredServerIds=u(e.links.servers),void 0!=e.origins&&e.unfilteredServerIds.push(e.origins.apm)},p=function(){l=[];for(var e=0;e<s.length;e++)label=s[e],l.includes(label.category)||label.hidden||(l[l.length]=label.category)}}])},198:function(){!function(){"use strict";var e=angular.module("pasvaz.bindonce",[]);e.directive("bindonce",function(){var e=function(e){if(e&&0!==e.length){var t=angular.lowercase(""+e);e=!("f"===t||"0"===t||"false"===t||"no"===t||"n"===t||"[]"===t)}else e=!1;return e},t=parseInt((/msie (\d+)/.exec(angular.lowercase(navigator.userAgent))||[])[1],10);isNaN(t)&&(t=parseInt((/trident\/.*; rv:(\d+)/.exec(angular.lowercase(navigator.userAgent))||[])[1],10));var n={restrict:"AM",controller:["$scope","$element","$attrs","$interpolate",function(n,i,r,a){var s=function(t,n,i){var r="show"===n?"":"none",a="hide"===n?"":"none";t.css("display",e(i)?r:a)},o=function(e,t){if(angular.isObject(t)&&!angular.isArray(t)){var n=[];angular.forEach(t,function(e,t){e&&n.push(t)}),t=n}t&&e.addClass(angular.isArray(t)?t.join(" "):t)},l=function(e,t){e.transclude(t,function(t){var n=e.element.parent(),i=e.element&&e.element[e.element.length-1],r=n&&n[0]||i&&i.parentNode,a=i&&i.nextSibling||null;angular.forEach(t,function(e){r.insertBefore(e,a)})})},c={watcherRemover:void 0,binders:[],group:r.boName,element:i,ran:!1,addBinder:function(e){this.binders.push(e),this.ran&&this.runBinders()},setupWatcher:function(e){var t=this;this.watcherRemover=n.$watch(e,function(e){void 0!==e&&(t.removeWatcher(),t.checkBindonce(e))},!0)},checkBindonce:function(e){var t=this,n=e.$promise?e.$promise.then:e.then;"function"==typeof n?n(function(){t.runBinders()}):t.runBinders()},removeWatcher:function(){void 0!==this.watcherRemover&&(this.watcherRemover(),this.watcherRemover=void 0)},runBinders:function(){for(;this.binders.length>0;){var n=this.binders.shift();if(!this.group||this.group==n.group){var i=n.scope.$eval(n.interpolate?a(n.value):n.value);switch(n.attr){case"boIf":e(i)&&l(n,n.scope.$new());break;case"boSwitch":var r,c=n.controller[0];(r=c.cases["!"+i]||c.cases["?"])&&(n.scope.$eval(n.attrs.change),angular.forEach(r,function(e){l(e,n.scope.$new())}));break;case"boSwitchWhen":var u=n.controller[0];u.cases["!"+n.attrs.boSwitchWhen]=u.cases["!"+n.attrs.boSwitchWhen]||[],u.cases["!"+n.attrs.boSwitchWhen].push({transclude:n.transclude,element:n.element});break;case"boSwitchDefault":var u=n.controller[0];u.cases["?"]=u.cases["?"]||[],u.cases["?"].push({transclude:n.transclude,element:n.element});break;case"hide":case"show":s(n.element,n.attr,i);break;case"class":o(n.element,i);break;case"text":n.element.text(i);break;case"html":n.element.html(i);break;case"style":n.element.css(i);break;case"src":n.element.attr(n.attr,i),t&&n.element.prop("src",i);break;case"attr":angular.forEach(n.attrs,function(e,t){var i,r;t.match(/^boAttr./)&&n.attrs[t]&&(i=t.replace(/^boAttr/,"").replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),r=n.scope.$eval(n.attrs[t]),n.element.attr(i,r))});break;case"href":case"alt":case"title":case"id":case"value":n.element.attr(n.attr,i)}}}this.ran=!0}};return c}],link:function(e,t,n,i){var r=n.bindonce&&e.$eval(n.bindonce);void 0!==r?i.checkBindonce(r):(i.setupWatcher(n.bindonce),t.bind("$destroy",i.removeWatcher))}};return n}),angular.forEach([{directiveName:"boShow",attribute:"show"},{directiveName:"boHide",attribute:"hide"},{directiveName:"boClass",attribute:"class"},{directiveName:"boText",attribute:"text"},{directiveName:"boBind",attribute:"text"},{directiveName:"boHtml",attribute:"html"},{directiveName:"boSrcI",attribute:"src",interpolate:!0},{directiveName:"boSrc",attribute:"src"},{directiveName:"boHrefI",attribute:"href",interpolate:!0},{directiveName:"boHref",attribute:"href"},{directiveName:"boAlt",attribute:"alt"},{directiveName:"boTitle",attribute:"title"},{directiveName:"boId",attribute:"id"},{directiveName:"boStyle",attribute:"style"},{directiveName:"boValue",attribute:"value"},{directiveName:"boAttr",attribute:"attr"},{directiveName:"boIf",transclude:"element",terminal:!0,priority:1e3},{directiveName:"boSwitch",require:"boSwitch",controller:function(){this.cases={}}},{directiveName:"boSwitchWhen",transclude:"element",priority:800,require:"^boSwitch"},{directiveName:"boSwitchDefault",transclude:"element",priority:800,require:"^boSwitch"}],function(t){var n=200;return e.directive(t.directiveName,function(){var e={priority:t.priority||n,transclude:t.transclude||!1,terminal:t.terminal||!1,require:["^bindonce"].concat(t.require||[]),controller:t.controller,compile:function(e,n,i){return function(e,n,r,a){var s=a[0],o=r.boParent;if(o&&s.group!==o){var l=s.element.parent();s=void 0;for(var c;9!==l[0].nodeType&&l.length;){if((c=l.data("$bindonceController"))&&c.group===o){s=c;break}l=l.parent()}if(!s)throw new Error("No bindonce controller: "+o)}s.addBinder({element:n,attr:t.attribute||t.directiveName,attrs:r,value:r[t.directiveName],interpolate:t.interpolate,group:o,transclude:i,controller:a.slice(1),scope:e})}}};return e})})}()},199:function(){angular.module("ui.select2",[]).value("uiSelect2Config",{}).directive("uiSelect2",["uiSelect2Config","$timeout",function(e,t){var n={};return e&&angular.extend(n,e),{require:"ngModel",priority:1,compile:function(e,i){var r,a,s,o=e.is("select"),l=angular.isDefined(i.multiple);return e.is("select")&&(a=e.find("optgroup[ng-repeat], optgroup[data-ng-repeat], option[ng-repeat], option[data-ng-repeat]"),a.length&&(s=a.attr("ng-repeat")||a.attr("data-ng-repeat"),r=jQuery.trim(s.split("|")[0]).split(" ").pop())),function(e,a,s,c){var u=angular.extend({},n,e.$eval(s.uiSelect2)),d=function(e){var t;return u.simple_tags?(t=[],angular.forEach(e,function(e){t.push(e.id)})):t=e,t},h=function(e){var t=[];return e?(u.simple_tags?(t=[],angular.forEach(e,function(e){t.push({id:e,text:e})})):t=e,t):t};if(o?(delete u.multiple,delete u.initSelection):l&&(u.multiple=!0),c&&(e.$watch(i.ngModel,function(e,t){e&&e!==t&&c.$render()},!0),c.$render=function(){if(o)a.select2("val",c.$viewValue);else if(u.multiple){var e=c.$viewValue;angular.isString(e)&&(e=e.split(",")),a.select2("data",h(e))}else angular.isObject(c.$viewValue)?a.select2("data",c.$viewValue):c.$viewValue?a.select2("val",c.$viewValue):a.select2("data",null)},r&&e.$watch(r,function(e,n){angular.equals(e,n)||t(function(){a.select2("val",c.$viewValue),a.trigger("change"),e&&!n&&c.$setPristine&&c.$setPristine(!0)})}),c.$parsers.push(function(e){var t=a.prev();return t.toggleClass("ng-invalid",!c.$valid).toggleClass("ng-valid",c.$valid).toggleClass("ng-invalid-required",!c.$valid).toggleClass("ng-valid-required",c.$valid).toggleClass("ng-dirty",c.$dirty).toggleClass("ng-pristine",c.$pristine),e}),!o&&l&&(a.bind("change",function(t){t.stopImmediatePropagation(),e.$$phase||e.$root.$$phase||e.$apply(function(){c.$setViewValue(d(a.select2("data")))})}),u.initSelection))){var p=u.initSelection;u.initSelection=function(e,t){p(e,function(e){var n=c.$pristine;c.$setViewValue(d(e)),t(e),n&&c.$setPristine(),a.prev().toggleClass("ng-pristine",c.$pristine)})}}a.bind("$destroy",function(){a.select2("destroy")}),s.$observe("disabled",function(e){a.select2("enable",!e)}),s.$observe("readonly",function(e){a.select2("readonly",!!e)}),s.ngMultiple&&e.$watch(s.ngMultiple,function(e){s.$set("multiple",!!e),a.select2(u)}),t(function(){if(a.select2(u),a.select2("data",c.$modelValue),c.$render(),!u.initSelection&&!o){var e=c.$pristine;c.$setViewValue(d(a.select2("data"))),e&&c.$setPristine(),a.prev().toggleClass("ng-pristine",c.$pristine)}})}}}}])},200:function(e,t,n){n(194),n(199)},207:function(){angular.module("AlertServices",[]).service("SeverityService",function(){this.problems=function(t,n){var i,r=e(t);return i=n.map(function(e){return e.type===r?e.severity:void 0}),i.length&&i.includes("error")?"error":i.length&&i.includes("warning")?"warning":""};var e=function(e){return"apdex"===e?"application_apdex_problem":"throughput"===e?"application_throughput_problem":"error"===e?"application_error_rate_problem":"response_time"===e?"browser_apdex_problem":void 0}})},210:function(){angular.module("RequestParamsService",[]).factory("requestParams",["$location",function(e){var t=function(e){
return(angular.isString(e)||angular.isNumber(e))&&(e=[e]),e};return{get:function(n){var i=[];if(void 0===n){i=e.search();for(var r in i)i[r]=t(i[r])}else void 0!==e.search()[n]&&(i=t(e.search()[n]));return i},set:function(t){e.search(t)}}}])},211:function(){angular.module("nrSwitchDirective",[]).directive("nrSwitch",function(){function e(e,t){e.displayClass=e.enabled?"state-on":"",t.on("click",function(){e.$evalAsync(function(){void 0!==e.clickCallback()||(e.enabled=!e.enabled),e.displayClass=e.enabled?"state-on":""})}),e.$watch("enabled",function(){e.displayClass=e.enabled?"state-on":""})}return{restrict:"E",replace:!0,template:'<div class="nr_switch {{displayClass}}"><toggle-text></toggle-text><toggle/></div>',scope:{enabled:"=",clickCallback:"&"},link:e}})},281:function(e,t,n){n(66),n(195),n(16),n(196),n(207),n(54),angular.module("ServerAgentServices",["ngResource","ServerAgentRollupFilters","rpmConstants","ServerAgentPropertiesServices","AlertServices","HawthorneServices"]).factory("Servers",["$resource","$parse","$http","account","features","LabelService","SeverityService","HealthStatusService","ViolationSummaryService",function(e,t,n,i,r,a,s,o,l){var c=e("/accounts/:accountId/servers.json",{accountId:i.id});return c.prototype.healthStatus=function(){return this.reporting?r.hawthorne_integration?this.violationSummary()?o.trafficLight(this.violationSummary().statusCode()):"unknown":this.health_status:"gray"},c.prototype.hawthornePolicy=function(){return"unknown"!==this.healthStatus()},c.prototype.violationSummary=function(){return l.find(i.id,"SERVERS","servers",this.id)},c.prototype.violationsLink=function(){return RPM.config.alerts_domain+"/accounts/"+i.id+"/events/violations/page/0?searchText="+this.name+"&sortBy=openedAt&direction=desc"},c.prototype.detailURL=function(){var e="";return r.aws_monitoring&&(e=this.is_ec2_instance&&!this.has_server_agent?"/aws?instance_id="+this.host:""),"/accounts/"+i.id+"/servers/"+this.id+e},c.prototype["delete"]=function(){return n["delete"]("/accounts/"+i.id+"/servers/"+this.id)},c.prototype.updateAlertPolicy=function(e){return n.put("/accounts/"+i.id+"/servers/update_alert_policy.json",{host_id:this.id,alertable_setting:{alert_policy_id:e}})},c.prototype.updateName=function(e){return n.put("/accounts/"+i.id+"/servers/"+this.id+"/update_name.json",{host:{name:e}})},c.prototype.addLabel=function(e){return n({url:"/accounts/"+i.id+"/label_entities.json",method:"POST",params:{entity_id:this.id,entity_type:"servers",label_key:e}})},c.prototype.removeLabel=function(e){return n({url:"/accounts/"+i.id+"/label_entities/delete.json",method:"DELETE",params:{entity_id:this.id,entity_type:"servers",label_key:e}})},c.prototype.labels=function(){return a.forServer(this)},c.prototype.hidden=!1,c.prototype.deleted=!1,c.prototype.updated=!1,c.prototype.tooltipText=function(){return this.language+" server"},c.prototype.normalize=function(e,n){var i=t(n),r=i(e);return void 0===r?0:r},c.prototype.generateNormalizedValues=function(){var e=this;e.summary={cpuUsage:e.normalize(e,"summary.cpu"),diskio:e.normalize(e,"summary.disk_io"),memoryUsage:e.normalize(e,"summary.memory"),memoryUsedBytes:e.normalize(e,"summary.memory_used"),memoryTotalBytes:e.normalize(e,"summary.memory_total"),fullestDisk:e.normalize(e,"summary.fullest_disk"),fullestDiskFree:e.normalize(e,"summary.fullest_disk_free")}},c}]).factory("HttpServer",["$http","account",function(e,t){return{get:function(n){return e.get("/accounts/"+t.id+"/servers.json",{params:n})}}}]).factory("EC2HttpServer",["$http","account",function(e,t){return{get:function(n){return e.get("/accounts/"+t.id+"/servers/ec2_instances.json",{params:n})}}}]).service("ServerBatchService",["$q","$filter","$timeout","$window","account","Servers","HttpServer","EC2HttpServer","LabelService","$rootScope","features",function(e,t,n,i,r,a,s,o,l,c,u){var d,h,p,f=e.defer(),g={},m=[],v=[],_=[],y=3,b=0,w=0,k=0,x=0,S=!0,C=!1,$=!1,T=!1;this.load=function(e){return n(function(){if(e){var t=e.meta;y=t.last_page<3?1:3}R()},0),f.promise},this.getForIds=function(e){for(var t=new Array(e.length),n=0,i=e.length;i>n;n++){var r=g[e[n]];t[n]=m[r]}return t},this.loadedCount=function(){return k},this.totalCount=function(){return b},this.filter=function(e,t){e=e||[],v=e,d=t,M()},this.hiddenCount=function(){return w},this.showHidden=function(){return window.location.search.indexOf("showHidden=true")>-1},this.ec2InstancesLoaded=function(){return T},this.all=function(){return _};var P=function(){i.location.href="/accounts/"+r.id+"/servers/get_started"},D=function(){if(m){var e=m.length-_.length;e>0&&_.splice.apply(_,[_.length,0].concat(Array(e)))}},M=function(){if(m&&m.length){var e=0;D();for(var t=0;t<m.length;t++){var n=m[t];n&&E(n)&&I(n)&&(_[e]=n,e++)}_.splice(e)}f.notify(k/b*100)},E=function(e){return!e.deleted&&!v.length||v.includes(e.id)},I=function(e){return void 0===d||e.name.toUpperCase().indexOf(d.toUpperCase())>=0},O=function(e){b=e},A=function(e){b+=e},R=function(){h=(new Date).getTime(),p=0;for(var e=1;y>=e;e++)N(e)},N=function(e){var t={page:e};window.location.search.indexOf("showHidden=true")>-1&&(t.showHidden=!0),s.get(t).success(function(e){L(e)}).error(function(){n(function(){N(e)},3e4)})},j=function(){o.get().success(function(e){F(e)}).error(function(){n(function(){j()},3e4)})};this.setBatchRefreshMode=function(e){S=e};var L=function(e){e.meta.page>e.meta.last_page&&(u.aws_monitoring?j():P()),w=e.meta.total_items_hidden,e.meta.total_items>0&&(C=!0);var t=parseInt(e.meta.last_page,10),n=parseInt(e.meta.page,10)+y;p++;for(var i=0;i<e.servers.length;i++)e.servers[i].has_server_agent=!0;O(e.meta.total_items),H(e.servers),M(),void 0!=e.services&&1==e.services.labels.available&&l.addOrUpdateLabels(e.labels),p>=t?(B(),u.aws_monitoring?j():f.resolve(),S&&z()):t>=n&&N(n)},F=function(e){if(e.meta.total_items>0&&($=!0),C||$||P(),!u.hawthorne_integration)for(var t=0;t<e.servers.length;t++)e.servers[t].health_status="green";A(e.meta.total_items),H(e.servers),M(),1==e.services.labels.available&&l.addOrUpdateLabels(e.labels),T=!0,f.resolve()},H=function(e){for(var t=void 0===m[x]?x:serversLength,n=0,i=e.length;i>n;n++)newServer=e[n],existingLocation=g[newServer.id],void 0!==existingLocation?U(newServer,existingLocation):(V(newServer,t),g[newServer.id]=t++)},U=function(e,t){for(var n in e)u.hawthorne_integration&&"health_status"===n||(m[t][n]=e[n]);m[t].generateNormalizedValues(),m[t].updated=!0},V=function(e,t){k++,x++,e=new a(e),e.generateNormalizedValues(),e.updated=!0,m[t]=e},B=function(){for(var e=0;e<m.length;e++){var t=m[e];t&&(t.updated?t.updated=!1:(t.deleted=!0,k--))}},z=function(){var e=6e4-((new Date).getTime()-h);n(R,e)}}])},463:function(e){e.exports=function(){return function(e){return function(){var e;return e=[],e.push("<ul class='rollup-bar-chart'>\n  <li class='error-status-bar' style='width: {{calculate_width(rollup.status_count(\"red\", servers))}}%;'></li>\n  <li class='warning-status-bar' style='width: {{calculate_width(rollup.status_count(\"orange\", servers))}}%;'></li>\n  <li class='okay-status-bar' style='width: {{calculate_width(rollup.status_count(\"green\", servers))}}%;'></li>\n</ul>"),e.join("\n").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(e)}}.call(this)},464:function(e){e.exports=function(){return function(e){return function(){var e;return e=[],e.push("<div class='rollup'>\n  <div class='rollup-summary' ng-class=\"{'collapsed': !serversVisible, 'expanded': serversVisible}\">\n    <div class='rollup-label'>\n      <div class='name'>\n        <a ng-click='chooseLabel({labelKey: label.key})'>{{label.name}}</a>\n      </div>\n    </div>\n    <ul class='rollup-data'>\n      <li class='number_block smaller total-count'>\n        <span class='value' ng-bind='servers.length'></span>\n        <span class='unit'>\n          <ng-pluralize count='servers.length' when=\"{1: 'Server', other: 'Servers'}\"></ng-pluralize>\n        </span>\n      </li>\n      <li class='error number_block smaller status'>\n        <span class='traffic-light'></span>\n        <span class='value'>{{label.status_count(\"red\", servers)}}</span>\n      </li>\n      <li class='number_block smaller status warning'>\n        <span class='traffic-light'></span>\n        <span class='value'>{{label.status_count(\"orange\", servers)}}</span>\n      </li>\n      <li class='number_block okay smaller status'>\n        <span class='traffic-light'></span>\n        <span class='value'>{{label.status_count(\"green\", servers)}}</span>\n      </li>\n    </ul>\n    <a class='rollup-toggle' ng-click='toggleServers()' ng-class=\"{'collapsed': !serversVisible, 'expanded': serversVisible}\"></a>\n  </div>\n  <bar-chart rollup='label' servers='servers' ng-hide='serversVisible'></bar-chart>\n  <div class='rollup-agents-container' ng-if='serversVisible'>\n    <div class='rollup-agents'>\n      <agent-summary-table servers='servers' show-settings='false' paginator='paginator'></agent-summary-table>\n      <div class='pagination-fragment' paginator='paginator'></div>\n    </div>\n  </div>\n</div>"),e.join("\n").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(e)}}.call(this)},465:function(e){e.exports=function(){return function(e){return function(){var e;return e=[],e.push("<div class='agent_summary_container' ng-hide='servers.length === 0'>\n  <table class='agent_summary_table tablesorter' id='server_summary_table'>\n    <thead>\n      <tr class='column_names'>\n        <th class='header' ng-click=\"sortByColumn('trafficLight')\" ng-class=\"sortClass('trafficLight')\"></th>\n        <th class='header' ng-click=\"sortByColumn('name')\" ng-class=\"sortClass('name')\">\n          Name\n        </th>\n        <th class='end_user header numeric' ng-click=\"sortByColumn('cpuUsage')\" ng-class=\"sortClass('cpuUsage')\">\n          CPU\n        </th>\n        <th class='header justify_left numeric page_views' ng-click=\"sortByColumn('diskio')\" ng-class=\"sortClass('diskio')\">\n          Disk IO\n        </th>\n        <th class='app_server header numeric' ng-click=\"sortByColumn('memoryUsage')\" ng-class=\"sortClass('memoryUsage')\">\n          Memory\n        </th>\n        <th class='header numeric throughput' ng-click=\"sortByColumn('fullestDisk')\" ng-class=\"sortClass('fullestDisk')\">\n          Fullest disk\n        </th>\n        <th class='actions header' ng-show='showSettings'></th>\n      </tr>\n    </thead>\n    <tbody>\n      <tr ng-repeat-start='server in servers | serverSorter:sortColumn:sortOrder | paginate:paginator track by server.id' ng-if='!server.deleted'>\n        <td rowspan=\"{{showInlineLabels ? '2' : '1'}}\">\n          <a class='health-status {{server.healthStatus()}}' href='/accounts/{{accountId}}/servers/{{server.id}}' target='_self'>\n            <div class='unknown-indicator' ng-hide='server.hawthornePolicy()'>-</div>\n          </a>\n          <health-status-tooltip entity='server' loading='loading' ng-if='features.hawthorne_integration'></health-status-tooltip>\n        </td>\n        <td class='app_name'>\n          <a href='/accounts/{{accountId}}/servers/{{server.id}}' target='_self' ng-hide='(editingServerNameFor == server)'>\n            {{server.name}}\n          </a>\n          <input ng-model='server.newName' ng-if='showSettings' ng-show='(editingServerNameFor == server)' nr-blur-on-enter ng-blur='updateServerName()' maxlength='32'>\n          <div class='actions renaming' ng-if='showSettings'>\n            <div class='container'>\n              <div class='icon rename trigger' ng-click='toggleEditNameInput()'></div>\n            </div>\n          </div>\n          <related_app_list></related_app_list>\n        </td>\n        <td class='cpu_col numeric' ng-if='server.reporting'>\n          <div>\n            <a href='/accounts/{{accountId}}/servers/{{server.id}}' target='_self' ng-bind='server.summary.cpuUsage | formatPercentage'></a>\n          </div>\n        </td>\n        <td class='io_col numeric' ng-if='server.reporting'>\n          <div>\n            <a href='/accounts/{{accountId}}/servers/{{server.id}}' target='_self' ng-bind='server.summary.diskio | formatPercentage'></a>\n          </div>\n        </td>\n        <td class='mem_col numeric' ng-if='server.reporting'>\n          <div>\n            <a href='/accounts/{{accountId}}/servers/{{server.id}}' target='_self' ng-bind='server.summary.memoryUsage | formatPercentage'></a>\n            <span class='deemphasize_value small'>\n              <span ng-bind='server.summary.memoryUsedBytes | formatBytes'></span>\n              /\n              <span ng-bind='server.summary.memoryTotalBytes | formatBytes'></span>\n            </span>\n          </div>\n        </td>\n        <td class='full_disk_col numeric' ng-if='server.reporting'>\n          <div>\n            <a href='/accounts/{{accountId}}/servers/{{server.id}}' target='_self' ng-bind='server.summary.fullestDisk | formatPercentage'></a>\n            <span class='deemphasize_value small' ng-bind=\"server.summary.fullestDiskFree | formatBytes | append:'free'\"></span>\n          </div>\n        </td>\n        <td class='no_data' ng-if='!server.reporting' colspan='4'>\n          <p>\n            No data reporting for this server since {{ formatDate(server.last_reported_at) | date:'MMM d, y h:mm a' }}.  (\n            <a href='http://docs.newrelic.com/docs/general/i-am-not-seeing-any-data' title='I am not seeing any data / Troubleshooting / FAQs - New Relic Support'>troubleshoot</a>\n            )\n          </p>\n        </td>\n        <td class='actions alert_policy' ng-if='showSettings'>\n          <agent-settings-dropdown server='server' loading='loading' alert-policies='alertPolicies'></agent-settings-dropdown>\n        </td>\n      </tr>\n      <tr class='labels-row' ng-repeat-end='' ng-if='showInlineLabels'>\n        <td class='labels' colspan='8'>\n          <div class='label' ng-repeat=\"label in server.labels() | orderBy: 'key'\" ng-click='removeLabel(label.key)'>\n            <div class='category' ng-bind='label.category'></div>\n            <div class='name' ng-bind='label.name'>\n              Staging\n            </div>\n          </div>\n          <i class='add icon' ng-click='showInlineLabelSelector()' ng-hide='(addingInlineLabelFor == server)'></i>\n          <input ui-select2='select2options' ng-model='addLabelInput' ng-attr-id=\"{{'inlineLabelSelect' + addingInlineLabelFor.id}}\" ng-cloak='ngCloak' ng-if='(addingInlineLabelFor == server)' ng-blur='hideInlineLabelSelector()'>\n        </td>\n      </tr>\n    </tbody>\n  </table>\n</div>"),e.join("\n").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(e)}}.call(this)},466:function(e){e.exports=function(){return function(e){return function(){var e;return e=[],e.push("<div class='agent_summary_container'>\n  <table class='agent_summary_table aws tablesorter' id='server_summary_table' ng-hide='servers.length === 0'>\n    <thead>\n      <tr class='column_names'>\n        <th class='header' ng-click=\"sortByColumn('trafficLight')\" ng-class=\"sortClass('trafficLight')\"></th>\n        <th class='header' ng-click=\"sortByColumn('name')\" ng-class=\"sortClass('name')\">\n          Name\n        </th>\n        <th class='end_user header numeric' ng-click=\"sortByColumn('cpuUsage')\" ng-class=\"sortClass('cpuUsage')\">\n          CPU\n        </th>\n        <th class='header justify_left numeric page_views' ng-click=\"sortByColumn('diskio')\" ng-class=\"sortClass('diskio')\">\n          Disk IO\n        </th>\n        <th class='app_server header numeric' ng-click=\"sortByColumn('memoryUsage')\" ng-class=\"sortClass('memoryUsage')\">\n          Memory\n        </th>\n        <th class='header numeric throughput' ng-click=\"sortByColumn('fullestDisk')\" ng-class=\"sortClass('fullestDisk')\">\n          Fullest disk\n        </th>\n        <th class='actions header' ng-show='showSettings'></th>\n      </tr>\n    </thead>\n    <tbody>\n      <tr ng-repeat-start='server in servers | serverSorter:sortColumn:sortOrder | paginate:paginator track by server.id' ng-if='!server.deleted'>\n        <td rowspan=\"{{showInlineLabels ? '2' : '1'}}\">\n          <a class='health-status {{server.healthStatus()}}' href=\"/accounts/{{accountId}}/servers/{{server.id}}{{(server.has_server_agent) ? '' : '/aws?instance_id='+server.host }}\" target='_self'>\n            <div class='unknown-indicator' ng-hide='server.hawthornePolicy()'>-</div>\n          </a>\n          <health-status-tooltip entity='server' loading='loading' ng-if='features.hawthorne_integration'></health-status-tooltip>\n        </td>\n        <td class='app_name'>\n          <a href=\"/accounts/{{accountId}}/servers/{{server.id}}{{(server.has_server_agent) ? '' : '/aws?instance_id='+server.host }}\" target='_self' ng-hide='(editingServerNameFor == server)'>\n            {{server.name}}\n          </a>\n          <input ng-model='server.newName' ng-if='showSettings' ng-show='(editingServerNameFor == server)' nr-blur-on-enter ng-blur='updateServerName()' maxlength='32'>\n          <div class='actions renaming' ng-if='showSettings && server.has_server_agent'>\n            <div class='container'>\n              <div class='icon rename trigger' ng-click='toggleEditNameInput()'></div>\n            </div>\n          </div>\n          <related_app_list></related_app_list>\n        </td>\n        <td class='cpu_col numeric' ng-if='server.reporting && server.has_server_agent'>\n          <div>\n            <a href='/accounts/{{accountId}}/servers/{{server.id}}' target='_self' ng-bind='server.summary.cpuUsage | formatPercentage'></a>\n          </div>\n        </td>\n        <td class='io_col numeric' ng-if='server.reporting && server.has_server_agent'>\n          <div>\n            <a href='/accounts/{{accountId}}/servers/{{server.id}}' target='_self' ng-bind='server.summary.diskio | formatPercentage'></a>\n          </div>\n        </td>\n        <td class='mem_col numeric' ng-if='server.reporting && server.has_server_agent'>\n          <div>\n            <a href='/accounts/{{accountId}}/servers/{{server.id}}' target='_self' ng-bind='server.summary.memoryUsage | formatPercentage'></a>\n            <span class='deemphasize_value small'>\n              <span ng-bind='server.summary.memoryUsedBytes | formatBytes'></span>\n              /\n              <span ng-bind='server.summary.memoryTotalBytes | formatBytes'></span>\n            </span>\n          </div>\n        </td>\n        <td class='full_disk_col numeric' ng-if='server.reporting && server.has_server_agent'>\n          <div>\n            <a href='/accounts/{{accountId}}/servers/{{server.id}}' target='_self' ng-bind='server.summary.fullestDisk | formatPercentage'></a>\n            <span class='deemphasize_value small' ng-bind=\"server.summary.fullestDiskFree | formatBytes | append:'free'\"></span>\n          </div>\n        </td>\n        <td class='meta' ng-if='server.reporting && !server.has_server_agent && server.is_ec2_instance' colspan='4'>\n          <p>\n            This EC2 Instance is\n            <span class='aws-health {{ awsStateColor(server.status) }}' data-tip=\"<p>System Status <strong><span class='right_aligned {{ awsStatusColor(server.system_status) }}'>{{server.system_status}}</span></strong><br />Instance Status <strong><span class='right_aligned {{ awsStatusColor(server.instance_status) }}'>{{server.instance_status}}</span></strong></p>\" data-tip-position='bottom-right'>\n              {{server.status}}\n            </span>\n            <span class='hide_meta right_aligned'>\n              <a href='/accounts/{{accountId}}/servers/get_started' target='_self'>\n                Enable server monitoring\n              </a>\n            </span>\n          </p>\n        </td>\n        <td class='no_data' ng-if='!server.reporting' colspan='4'>\n          <p>\n            No data reporting for this server since {{ formatDate(server.last_reported_at) | date:'MMM d, y h:mm a' }}.  (\n            <a href='http://docs.newrelic.com/docs/general/i-am-not-seeing-any-data' title='I am not seeing any data / Troubleshooting / FAQs - New Relic Support'>troubleshoot</a>\n            )\n          </p>\n        </td>\n        <td class='actions alert_policy' ng-if='showSettings'>\n          <agent-settings-dropdown ng-if='server.has_server_agent' server='server' loading='loading' alert-policies='alertPolicies'></agent-settings-dropdown>\n        </td>\n      </tr>\n      <tr class='labels-row' ng-repeat-end='' ng-if='showInlineLabels'>\n        <td class='labels' colspan='8'>\n          <div class='label {{ determineLabelType(label.category) }}' ng-repeat=\"label in server.labels() | orderBy: 'key'\" ng-click='removeLabel(label.key)'>\n            <div class='category' ng-bind='label.category'></div>\n            <div class='name' ng-bind='label.name'>\n              Staging\n            </div>\n          </div>\n          <i class='add icon' ng-click='showInlineLabelSelector()' ng-hide='(addingInlineLabelFor == server)'></i>\n          <input ui-select2='select2options' ng-model='addLabelInput' ng-attr-id=\"{{'inlineLabelSelect' + addingInlineLabelFor.id}}\" ng-cloak='ngCloak' ng-if='(addingInlineLabelFor == server)' ng-blur='hideInlineLabelSelector()'>\n        </td>\n      </tr>\n    </tbody>\n  </table>\n</div>"),e.join("\n").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(e)}}.call(this)},467:function(e){e.exports=function(){return function(e){return function(){var e,t;return t=function(e){return e.replace(/\n/g,"&#x000A;")},e=[],e.push("<ul class='related_app_list' ng-init='show_hidden = false'>\n  <li ng-repeat='app in server.related_apps.visible'>\n    <a href='/accounts/{{accountId}}/applications/{{app.id}}' target='_self' ng-bind='app.name + ((!$last || server.related_apps.hidden.length > 0) ? \",\" :\"\")'></a>\n  </li>\n  <li ng-if='server.related_apps.hidden.length > 0' ng-hide='show_hidden'>\n    <a href='javascript:void(0)' ng-bind='server.related_apps.hidden.length + \" more ...\"' ng-click='$parent.show_hidden = true'></a>\n  </li>\n  <li ng-repeat='app in server.related_apps.hidden' ng-show='show_hidden'>\n    <a href='/accounts/{{accountId}}/applications/{{app.id}}' target='_self' ng-bind='app.name + (!$last ? \",\" :\"\")'></a>\n  </li>\n</ul>"),e.join("\n").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(e)}}.call(this)},468:function(e){e.exports=function(){return function(e){return function(){var e,t,n;return e=function(e){return(""+e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#39;").replace(/\//g,"&#47;").replace(/"/g,"&quot;")},n=function(e){return e.replace(/\n/g,"&#x000A;")},t=[],t.push("<div class='dropdown dropdown_wrapper'>\n  <a class='dropdown_trigger icon settings trigger' ng-if='!features.hawthorne_integration'></a>\n  <a class='dropdown_trigger icon-nr-more trigger' ng-if='features.hawthorne_integration'></a>\n  <ul class='action_bar dropdown-menu dropdown_content vertical'>\n    <li class='server_alert_policy'>\n      <h4 ng-if='!features.hawthorne_integration'>{{ server.name }}</h4>\n      <div class='busy icon' ng-show='loading.policies' ng-if='!features.hawthorne_integration'></div>\n      <form class='horizontal small' ng-submit='updateAlertPolicy($event)' ng-show='alertPolicies.length' ng-if='!features.hawthorne_integration'>\n        <label>Policy</label>\n        <select ng-model='selectedPolicy' ng-click='$event.preventDefault(); $event.stopPropagation();' ng-change='selectPolicy(selectedPolicy)' ng-options='policy as policy.name for policy in alertPolicies'></select>\n        <button ng-disabled='deleting || $parent.selectedPolicy.id === server.links.alert_policy' type='submit' ng-click='$event.stopPropagation()' ng-if='!status.updatingAlertPolicy'>\n          Move\n        </button>\n        <div class='busy icon' ng-if='status.updatingAlertPolicy'></div>\n      </form>\n      <a class='icon pencil' href='/accounts/{{accountId}}/server_alert_policies?policy_id={{selectedPolicy.id}}' ng-if='!features.hawthorne_integration && alertPolicies.length' target='_self'>Manage alert policy</a>\n      <a ng-href='{{alerting_url}}' ng-show='features.hawthorne_integration' target='_self'>Manage alert policies</a>\n    </li>\n    <li ng-if='!server.reporting && currentUser.isAccountAdmin'>\n      <img class='busy icon' ng-if='scope.deleting'>\n      <a class='delete delete_link icon' ng-click='delete($event)' href='#' ng-if='!scope.deleting' ng-show='!features.hawthorne_integration'>Delete server</a>\n      <a class='delete_link' ng-click='delete($event)' href='#' ng-if='!scope.deleting' ng-show='features.hawthorne_integration'>Delete server</a>\n    </li>\n  </ul>\n</div>"),t.join("\n").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(e)}}.call(this)},484:function(e,t){(function(){function n(e,t){if(e!==t){var n=null===e,i=e===S,r=e===e,a=null===t,s=t===S,o=t===t;if(e>t&&!a||!r||n&&!s&&o||i&&o)return 1;if(t>e&&!n||!o||a&&!i&&r||s&&r)return-1}return 0}function i(e,t,n){for(var i=e.length,r=n?i:-1;n?r--:++r<i;)if(t(e[r],r,e))return r;return-1}function r(e,t,n){if(t!==t)return g(e,n);for(var i=n-1,r=e.length;++i<r;)if(e[i]===t)return i;return-1}function a(e){return"function"==typeof e||!1}function s(e){return null==e?"":e+""}function o(e,t){for(var n=-1,i=e.length;++n<i&&t.indexOf(e.charAt(n))>-1;);return n}function l(e,t){for(var n=e.length;n--&&t.indexOf(e.charAt(n))>-1;);return n}function c(e,t){return n(e.criteria,t.criteria)||e.index-t.index}function u(e,t,i){for(var r=-1,a=e.criteria,s=t.criteria,o=a.length,l=i.length;++r<o;){var c=n(a[r],s[r]);if(c){if(r>=l)return c;var u=i[r];return c*("asc"===u||u===!0?1:-1)}}return e.index-t.index}function d(e){return Be[e]}function h(e){return ze[e]}function p(e,t,n){return t?e=qe[e]:n&&(e=Je[e]),"\\"+e}function f(e){return"\\"+Je[e]}function g(e,t,n){for(var i=e.length,r=t+(n?0:-1);n?r--:++r<i;){var a=e[r];if(a!==a)return r}return-1}function m(e){return!!e&&"object"==typeof e}function v(e){return 160>=e&&e>=9&&13>=e||32==e||160==e||5760==e||6158==e||e>=8192&&(8202>=e||8232==e||8233==e||8239==e||8287==e||12288==e||65279==e)}function _(e,t){for(var n=-1,i=e.length,r=-1,a=[];++n<i;)e[n]===t&&(e[n]=B,a[++r]=n);return a}function y(e,t){for(var n,i=-1,r=e.length,a=-1,s=[];++i<r;){var o=e[i],l=t?t(o,i,e):o;i&&n===l||(n=l,s[++a]=o)}return s}function b(e){for(var t=-1,n=e.length;++t<n&&v(e.charCodeAt(t)););return t}function w(e){for(var t=e.length;t--&&v(e.charCodeAt(t)););return t}function k(e){return Ye[e]}function x(e){function t(e){if(m(e)&&!Do(e)&&!(e instanceof ee)){if(e instanceof Q)return e;if(es.call(e,"__chain__")&&es.call(e,"__wrapped__"))return pi(e)}return new Q(e)}function v(){}function Q(e,t,n){this.__wrapped__=e,this.__actions__=n||[],this.__chain__=!!t}function ee(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Ts,this.__views__=[]}function ne(){var e=new ee(this.__wrapped__);return e.__actions__=et(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=et(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=et(this.__views__),e}function Be(){if(this.__filtered__){var e=new ee(this);e.__dir__=-1,e.__filtered__=!0}else e=this.clone(),e.__dir__*=-1;return e}function ze(){var e=this.__wrapped__.value(),t=this.__dir__,n=Do(e),i=0>t,r=n?e.length:0,a=Wn(0,r,this.__views__),s=a.start,o=a.end,l=o-s,c=i?o:s-1,u=this.__iteratees__,d=u.length,h=0,p=ks(l,this.__takeCount__);if(!n||F>r||r==l&&p==l)return nn(i&&n?e.reverse():e,this.__actions__);var f=[];e:for(;l--&&p>h;){c+=t;for(var g=-1,m=e[c];++g<d;){var v=u[g],_=v.iteratee,y=v.type,b=_(m);if(y==U)m=b;else if(!b){if(y==H)continue e;break e}}f[h++]=m}return f}function Ye(){this.__data__={}}function We(e){return this.has(e)&&delete this.__data__[e]}function qe(e){return"__proto__"==e?S:this.__data__[e]}function Je(e){return"__proto__"!=e&&es.call(this.__data__,e)}function Ge(e,t){return"__proto__"!=e&&(this.__data__[e]=t),this}function Qe(e){var t=e?e.length:0;for(this.data={hash:ms(null),set:new us};t--;)this.push(e[t])}function Ke(e,t){var n=e.data,i="string"==typeof t||Ar(t)?n.set.has(t):n.hash[t];return i?0:-1}function Xe(e){var t=this.data;"string"==typeof e||Ar(e)?t.set.add(e):t.hash[e]=!0}function Ze(e,t){for(var n=-1,i=e.length,r=-1,a=t.length,s=Ha(i+a);++n<i;)s[n]=e[n];for(;++r<a;)s[n++]=t[r];return s}function et(e,t){var n=-1,i=e.length;for(t||(t=Ha(i));++n<i;)t[n]=e[n];return t}function it(e,t){for(var n=-1,i=e.length;++n<i&&t(e[n],n,e)!==!1;);return e}function rt(e,t){for(var n=e.length;n--&&t(e[n],n,e)!==!1;);return e}function at(e,t){for(var n=-1,i=e.length;++n<i;)if(!t(e[n],n,e))return!1;return!0}function st(e,t,n,i){for(var r=-1,a=e.length,s=i,o=s;++r<a;){var l=e[r],c=+t(l);n(c,s)&&(s=c,o=l)}return o}function ot(e,t){for(var n=-1,i=e.length,r=-1,a=[];++n<i;){var s=e[n];t(s,n,e)&&(a[++r]=s)}return a}function lt(e,t){for(var n=-1,i=e.length,r=Ha(i);++n<i;)r[n]=t(e[n],n,e);return r}function ct(e,t){for(var n=-1,i=t.length,r=e.length;++n<i;)e[r+n]=t[n];return e}function ut(e,t,n,i){var r=-1,a=e.length;for(i&&a&&(n=e[++r]);++r<a;)n=t(n,e[r],r,e);return n}function dt(e,t,n,i){var r=e.length;for(i&&r&&(n=e[--r]);r--;)n=t(n,e[r],r,e);return n}function ht(e,t){for(var n=-1,i=e.length;++n<i;)if(t(e[n],n,e))return!0;return!1}function pt(e,t){for(var n=e.length,i=0;n--;)i+=+t(e[n])||0;return i}function ft(e,t){return e===S?t:e}function gt(e,t,n,i){return e!==S&&es.call(i,n)?e:t}function mt(e,t,n){for(var i=-1,r=Ho(t),a=r.length;++i<a;){var s=r[i],o=e[s],l=n(o,t[s],s,e,t);(l===l?l===o:o!==o)&&(o!==S||s in e)||(e[s]=l)}return e}function vt(e,t){return null==t?e:yt(t,Ho(t),e)}function _t(e,t){for(var n=-1,i=null==e,r=!i&&Kn(e),a=r?e.length:0,s=t.length,o=Ha(s);++n<s;){var l=t[n];r?o[n]=Xn(l,a)?e[l]:S:o[n]=i?S:e[l]}return o}function yt(e,t,n){n||(n={});for(var i=-1,r=t.length;++i<r;){var a=t[i];n[a]=e[a]}return n}function bt(e,t,n){var i=typeof e;return"function"==i?t===S?e:sn(e,t,n):null==e?Ta:"object"==i?Ft(e):t===S?Oa(e):Ht(e,t)}function wt(e,t,n,i,r,a,s){var o;if(n&&(o=r?n(e,i,r):n(e)),o!==S)return o;if(!Ar(e))return e;var l=Do(e);if(l){if(o=qn(e),!t)return et(e,o)}else{var c=ns.call(e),u=c==G;if(c!=X&&c!=z&&(!u||r))return Ve[c]?Gn(e,c,t):r?e:{};if(o=Jn(u?{}:e),!t)return vt(o,e)}a||(a=[]),s||(s=[]);for(var d=a.length;d--;)if(a[d]==e)return s[d];return a.push(e),s.push(o),(l?it:Et)(e,function(i,r){o[r]=wt(i,t,n,r,e,a,s)}),o}function kt(e,t,n){if("function"!=typeof e)throw new Ga(V);return ds(function(){e.apply(S,n)},t)}function xt(e,t){var n=e?e.length:0,i=[];if(!n)return i;var a=-1,s=Bn(),o=s==r,l=o&&t.length>=F?gn(t):null,c=t.length;l&&(s=Ke,o=!1,t=l);e:for(;++a<n;){var u=e[a];if(o&&u===u){for(var d=c;d--;)if(t[d]===u)continue e;i.push(u)}else s(t,u,0)<0&&i.push(u)}return i}function St(e,t){var n=!0;return Rs(e,function(e,i,r){return n=!!t(e,i,r)}),n}function Ct(e,t,n,i){var r=i,a=r;return Rs(e,function(e,s,o){var l=+t(e,s,o);(n(l,r)||l===i&&l===a)&&(r=l,a=e)}),a}function $t(e,t,n,i){var r=e.length;for(n=null==n?0:+n||0,0>n&&(n=-n>r?0:r+n),i=i===S||i>r?r:+i||0,0>i&&(i+=r),r=n>i?0:i>>>0,n>>>=0;r>n;)e[n++]=t;return e}function Tt(e,t){var n=[];return Rs(e,function(e,i,r){t(e,i,r)&&n.push(e)}),n}function Pt(e,t,n,i){var r;return n(e,function(e,n,a){return t(e,n,a)?(r=i?n:e,!1):void 0}),r}function Dt(e,t,n,i){i||(i=[]);for(var r=-1,a=e.length;++r<a;){var s=e[r];m(s)&&Kn(s)&&(n||Do(s)||Cr(s))?t?Dt(s,t,n,i):ct(i,s):n||(i[i.length]=s)}return i}function Mt(e,t){return js(e,t,ea)}function Et(e,t){return js(e,t,Ho)}function It(e,t){return Ls(e,t,Ho)}function Ot(e,t){for(var n=-1,i=t.length,r=-1,a=[];++n<i;){var s=t[n];Or(e[s])&&(a[++r]=s)}return a}function At(e,t,n){if(null!=e){n!==S&&n in di(e)&&(t=[n]);for(var i=0,r=t.length;null!=e&&r>i;)e=e[t[i++]];return i&&i==r?e:S}}function Rt(e,t,n,i,r,a){return e===t?!0:null==e||null==t||!Ar(e)&&!m(t)?e!==e&&t!==t:Nt(e,t,Rt,n,i,r,a)}function Nt(e,t,n,i,r,a,s){var o=Do(e),l=Do(t),c=Y,u=Y;o||(c=ns.call(e),c==z?c=X:c!=X&&(o=Br(e))),l||(u=ns.call(t),u==z?u=X:u!=X&&(l=Br(t)));var d=c==X,h=u==X,p=c==u;if(p&&!o&&!d)return Fn(e,t,c);if(!r){var f=d&&es.call(e,"__wrapped__"),g=h&&es.call(t,"__wrapped__");if(f||g)return n(f?e.value():e,g?t.value():t,i,r,a,s)}if(!p)return!1;a||(a=[]),s||(s=[]);for(var m=a.length;m--;)if(a[m]==e)return s[m]==t;a.push(e),s.push(t);var v=(o?Ln:Hn)(e,t,n,i,r,a,s);return a.pop(),s.pop(),v}function jt(e,t,n){var i=t.length,r=i,a=!n;if(null==e)return!r;for(e=di(e);i--;){var s=t[i];if(a&&s[2]?s[1]!==e[s[0]]:!(s[0]in e))return!1}for(;++i<r;){s=t[i];var o=s[0],l=e[o],c=s[1];if(a&&s[2]){if(l===S&&!(o in e))return!1}else{var u=n?n(l,c,o):S;if(!(u===S?Rt(c,l,n,!0):u))return!1}}return!0}function Lt(e,t){var n=-1,i=Kn(e)?Ha(e.length):[];
return Rs(e,function(e,r,a){i[++n]=t(e,r,a)}),i}function Ft(e){var t=zn(e);if(1==t.length&&t[0][2]){var n=t[0][0],i=t[0][1];return function(e){return null==e?!1:e[n]===i&&(i!==S||n in di(e))}}return function(e){return jt(e,t)}}function Ht(e,t){var n=Do(e),i=ei(e)&&ii(t),r=e+"";return e=hi(e),function(a){if(null==a)return!1;var s=r;if(a=di(a),(n||!i)&&!(s in a)){if(a=1==e.length?a:At(a,Jt(e,0,-1)),null==a)return!1;s=$i(e),a=di(a)}return a[s]===t?t!==S||s in a:Rt(t,a[s],S,!0)}}function Ut(e,t,n,i,r){if(!Ar(e))return e;var a=Kn(t)&&(Do(t)||Br(t)),s=a?S:Ho(t);return it(s||t,function(o,l){if(s&&(l=o,o=t[l]),m(o))i||(i=[]),r||(r=[]),Vt(e,t,l,Ut,n,i,r);else{var c=e[l],u=n?n(c,o,l,e,t):S,d=u===S;d&&(u=o),u===S&&(!a||l in e)||!d&&(u===u?u===c:c!==c)||(e[l]=u)}}),e}function Vt(e,t,n,i,r,a,s){for(var o=a.length,l=t[n];o--;)if(a[o]==l)return void(e[n]=s[o]);var c=e[n],u=r?r(c,l,n,e,t):S,d=u===S;d&&(u=l,Kn(l)&&(Do(l)||Br(l))?u=Do(c)?c:Kn(c)?et(c):[]:Hr(l)||Cr(l)?u=Cr(c)?Jr(c):Hr(c)?c:{}:d=!1),a.push(l),s.push(u),d?e[n]=i(u,l,r,a,s):(u===u?u!==c:c===c)&&(e[n]=u)}function Bt(e){return function(t){return null==t?S:t[e]}}function zt(e){var t=e+"";return e=hi(e),function(n){return At(n,e,t)}}function Yt(e,t){for(var n=e?t.length:0;n--;){var i=t[n];if(i!=r&&Xn(i)){var r=i;hs.call(e,i,1)}}return e}function Wt(e,t){return e+vs(Cs()*(t-e+1))}function qt(e,t,n,i,r){return r(e,function(e,r,a){n=i?(i=!1,e):t(n,e,r,a)}),n}function Jt(e,t,n){var i=-1,r=e.length;t=null==t?0:+t||0,0>t&&(t=-t>r?0:r+t),n=n===S||n>r?r:+n||0,0>n&&(n+=r),r=t>n?0:n-t>>>0,t>>>=0;for(var a=Ha(r);++i<r;)a[i]=e[i+t];return a}function Gt(e,t){var n;return Rs(e,function(e,i,r){return n=t(e,i,r),!n}),!!n}function Qt(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}function Kt(e,t,n){var i=Un(),r=-1;t=lt(t,function(e){return i(e)});var a=Lt(e,function(e){var n=lt(t,function(t){return t(e)});return{criteria:n,index:++r,value:e}});return Qt(a,function(e,t){return u(e,t,n)})}function Xt(e,t){var n=0;return Rs(e,function(e,i,r){n+=+t(e,i,r)||0}),n}function Zt(e,t){var n=-1,i=Bn(),a=e.length,s=i==r,o=s&&a>=F,l=o?gn():null,c=[];l?(i=Ke,s=!1):(o=!1,l=t?[]:c);e:for(;++n<a;){var u=e[n],d=t?t(u,n,e):u;if(s&&u===u){for(var h=l.length;h--;)if(l[h]===d)continue e;t&&l.push(d),c.push(u)}else i(l,d,0)<0&&((t||o)&&l.push(d),c.push(u))}return c}function en(e,t){for(var n=-1,i=t.length,r=Ha(i);++n<i;)r[n]=e[t[n]];return r}function tn(e,t,n,i){for(var r=e.length,a=i?r:-1;(i?a--:++a<r)&&t(e[a],a,e););return n?Jt(e,i?0:a,i?a+1:r):Jt(e,i?a+1:0,i?r:a)}function nn(e,t){var n=e;n instanceof ee&&(n=n.value());for(var i=-1,r=t.length;++i<r;){var a=t[i];n=a.func.apply(a.thisArg,ct([n],a.args))}return n}function rn(e,t,n){var i=0,r=e?e.length:i;if("number"==typeof t&&t===t&&Ms>=r){for(;r>i;){var a=i+r>>>1,s=e[a];(n?t>=s:t>s)&&null!==s?i=a+1:r=a}return r}return an(e,t,Ta,n)}function an(e,t,n,i){t=n(t);for(var r=0,a=e?e.length:0,s=t!==t,o=null===t,l=t===S;a>r;){var c=vs((r+a)/2),u=n(e[c]),d=u!==S,h=u===u;if(s)var p=h||i;else p=o?h&&d&&(i||null!=u):l?h&&(i||d):null==u?!1:i?t>=u:t>u;p?r=c+1:a=c}return ks(a,Ds)}function sn(e,t,n){if("function"!=typeof e)return Ta;if(t===S)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 3:return function(n,i,r){return e.call(t,n,i,r)};case 4:return function(n,i,r,a){return e.call(t,n,i,r,a)};case 5:return function(n,i,r,a,s){return e.call(t,n,i,r,a,s)}}return function(){return e.apply(t,arguments)}}function on(e){var t=new as(e.byteLength),n=new ps(t);return n.set(new ps(e)),t}function ln(e,t,n){for(var i=n.length,r=-1,a=ws(e.length-i,0),s=-1,o=t.length,l=Ha(o+a);++s<o;)l[s]=t[s];for(;++r<i;)l[n[r]]=e[r];for(;a--;)l[s++]=e[r++];return l}function cn(e,t,n){for(var i=-1,r=n.length,a=-1,s=ws(e.length-r,0),o=-1,l=t.length,c=Ha(s+l);++a<s;)c[a]=e[a];for(var u=a;++o<l;)c[u+o]=t[o];for(;++i<r;)c[u+n[i]]=e[a++];return c}function un(e,t){return function(n,i,r){var a=t?t():{};if(i=Un(i,r,3),Do(n))for(var s=-1,o=n.length;++s<o;){var l=n[s];e(a,l,i(l,s,n),n)}else Rs(n,function(t,n,r){e(a,t,i(t,n,r),r)});return a}}function dn(e){return vr(function(t,n){var i=-1,r=null==t?0:n.length,a=r>2?n[r-2]:S,s=r>2?n[2]:S,o=r>1?n[r-1]:S;for("function"==typeof a?(a=sn(a,o,5),r-=2):(a="function"==typeof o?o:S,r-=a?1:0),s&&Zn(n[0],n[1],s)&&(a=3>r?S:a,r=1);++i<r;){var l=n[i];l&&e(t,l,a)}return t})}function hn(e,t){return function(n,i){var r=n?Us(n):0;if(!ni(r))return e(n,i);for(var a=t?r:-1,s=di(n);(t?a--:++a<r)&&i(s[a],a,s)!==!1;);return n}}function pn(e){return function(t,n,i){for(var r=di(t),a=i(t),s=a.length,o=e?s:-1;e?o--:++o<s;){var l=a[o];if(n(r[l],l,r)===!1)break}return t}}function fn(e,t){function n(){var r=this&&this!==tt&&this instanceof n?i:e;return r.apply(t,arguments)}var i=vn(e);return n}function gn(e){return ms&&us?new Qe(e):null}function mn(e){return function(t){for(var n=-1,i=Sa(ua(t)),r=i.length,a="";++n<r;)a=e(a,i[n],n);return a}}function vn(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var n=As(e.prototype),i=e.apply(n,t);return Ar(i)?i:n}}function _n(e){function t(n,i,r){r&&Zn(n,i,r)&&(i=S);var a=jn(n,e,S,S,S,S,S,i);return a.placeholder=t.placeholder,a}return t}function yn(e,t){return vr(function(n){var i=n[0];return null==i?i:(n.push(t),e.apply(S,n))})}function bn(e,t){return function(n,i,r){if(r&&Zn(n,i,r)&&(i=S),i=Un(i,r,3),1==i.length){n=Do(n)?n:ui(n);var a=st(n,i,e,t);if(!n.length||a!==t)return a}return Ct(n,i,e,t)}}function wn(e,t){return function(n,r,a){if(r=Un(r,a,3),Do(n)){var s=i(n,r,t);return s>-1?n[s]:S}return Pt(n,r,e)}}function kn(e){return function(t,n,r){return t&&t.length?(n=Un(n,r,3),i(t,n,e)):-1}}function xn(e){return function(t,n,i){return n=Un(n,i,3),Pt(t,n,e,!0)}}function Sn(e){return function(){for(var t,n=arguments.length,i=e?n:-1,r=0,a=Ha(n);e?i--:++i<n;){var s=a[r++]=arguments[i];if("function"!=typeof s)throw new Ga(V);!t&&Q.prototype.thru&&"wrapper"==Vn(s)&&(t=new Q([],!0))}for(i=t?-1:n;++i<n;){s=a[i];var o=Vn(s),l="wrapper"==o?Hs(s):S;t=l&&ti(l[0])&&l[1]==(O|D|E|A)&&!l[4].length&&1==l[9]?t[Vn(l[0])].apply(t,l[3]):1==s.length&&ti(s)?t[o]():t.thru(s)}return function(){var e=arguments,i=e[0];if(t&&1==e.length&&Do(i)&&i.length>=F)return t.plant(i).value();for(var r=0,s=n?a[r].apply(this,e):i;++r<n;)s=a[r].call(this,s);return s}}}function Cn(e,t){return function(n,i,r){return"function"==typeof i&&r===S&&Do(n)?e(n,i):t(n,sn(i,r,3))}}function $n(e){return function(t,n,i){return"function"==typeof n&&i===S||(n=sn(n,i,3)),e(t,n,ea)}}function Tn(e){return function(t,n,i){return"function"==typeof n&&i===S||(n=sn(n,i,3)),e(t,n)}}function Pn(e){return function(t,n,i){var r={};return n=Un(n,i,3),Et(t,function(t,i,a){var s=n(t,i,a);i=e?s:i,t=e?t:s,r[i]=t}),r}}function Dn(e){return function(t,n,i){return t=s(t),(e?t:"")+On(t,n,i)+(e?"":t)}}function Mn(e){var t=vr(function(n,i){var r=_(i,t.placeholder);return jn(n,e,S,i,r)});return t}function En(e,t){return function(n,i,r,a){var s=arguments.length<3;return"function"==typeof i&&a===S&&Do(n)?e(n,i,r,s):qt(n,Un(i,a,4),r,s,t)}}function In(e,t,n,i,r,a,s,o,l,c){function u(){for(var y=arguments.length,b=y,w=Ha(y);b--;)w[b]=arguments[b];if(i&&(w=ln(w,i,r)),a&&(w=cn(w,a,s)),f||m){var k=u.placeholder,x=_(w,k);if(y-=x.length,c>y){var C=o?et(o):S,P=ws(c-y,0),D=f?x:S,M=f?S:x,O=f?w:S,A=f?S:w;t|=f?E:I,t&=~(f?I:E),g||(t&=~($|T));var R=[e,t,n,O,D,A,M,C,l,P],N=In.apply(S,R);return ti(e)&&Vs(N,R),N.placeholder=k,N}}var j=h?n:this,L=p?j[e]:e;return o&&(w=li(w,o)),d&&l<w.length&&(w.length=l),this&&this!==tt&&this instanceof u&&(L=v||vn(e)),L.apply(j,w)}var d=t&O,h=t&$,p=t&T,f=t&D,g=t&P,m=t&M,v=p?S:vn(e);return u}function On(e,t,n){var i=e.length;if(t=+t,i>=t||!ys(t))return"";var r=t-i;return n=null==n?" ":n+"",ma(n,gs(r/n.length)).slice(0,r)}function An(e,t,n,i){function r(){for(var t=-1,o=arguments.length,l=-1,c=i.length,u=Ha(c+o);++l<c;)u[l]=i[l];for(;o--;)u[l++]=arguments[++t];var d=this&&this!==tt&&this instanceof r?s:e;return d.apply(a?n:this,u)}var a=t&$,s=vn(e);return r}function Rn(e){var t=za[e];return function(e,n){return n=n===S?0:+n||0,n?(n=ls(10,n),t(e*n)/n):t(e)}}function Nn(e){return function(t,n,i,r){var a=Un(i);return null==i&&a===bt?rn(t,n,e):an(t,n,a(i,r,1),e)}}function jn(e,t,n,i,r,a,s,o){var l=t&T;if(!l&&"function"!=typeof e)throw new Ga(V);var c=i?i.length:0;if(c||(t&=~(E|I),i=r=S),c-=r?r.length:0,t&I){var u=i,d=r;i=r=S}var h=l?S:Hs(e),p=[e,t,n,i,r,u,d,a,s,o];if(h&&(ri(p,h),t=p[1],o=p[9]),p[9]=null==o?l?0:e.length:ws(o-c,0)||0,t==$)var f=fn(p[0],p[2]);else f=t!=E&&t!=($|E)||p[4].length?In.apply(S,p):An.apply(S,p);var g=h?Fs:Vs;return g(f,p)}function Ln(e,t,n,i,r,a,s){var o=-1,l=e.length,c=t.length;if(l!=c&&!(r&&c>l))return!1;for(;++o<l;){var u=e[o],d=t[o],h=i?i(r?d:u,r?u:d,o):S;if(h!==S){if(h)continue;return!1}if(r){if(!ht(t,function(e){return u===e||n(u,e,i,r,a,s)}))return!1}else if(u!==d&&!n(u,d,i,r,a,s))return!1}return!0}function Fn(e,t,n){switch(n){case W:case q:return+e==+t;case J:return e.name==t.name&&e.message==t.message;case K:return e!=+e?t!=+t:e==+t;case Z:case te:return e==t+""}return!1}function Hn(e,t,n,i,r,a,s){var o=Ho(e),l=o.length,c=Ho(t),u=c.length;if(l!=u&&!r)return!1;for(var d=l;d--;){var h=o[d];if(!(r?h in t:es.call(t,h)))return!1}for(var p=r;++d<l;){h=o[d];var f=e[h],g=t[h],m=i?i(r?g:f,r?f:g,h):S;if(!(m===S?n(f,g,i,r,a,s):m))return!1;p||(p="constructor"==h)}if(!p){var v=e.constructor,_=t.constructor;if(v!=_&&"constructor"in e&&"constructor"in t&&!("function"==typeof v&&v instanceof v&&"function"==typeof _&&_ instanceof _))return!1}return!0}function Un(e,n,i){var r=t.callback||Ca;return r=r===Ca?bt:r,i?r(e,n,i):r}function Vn(e){for(var t=e.name,n=Os[t],i=n?n.length:0;i--;){var r=n[i],a=r.func;if(null==a||a==e)return r.name}return t}function Bn(e,n,i){var a=t.indexOf||Si;return a=a===Si?r:a,e?a(e,n,i):a}function zn(e){for(var t=ta(e),n=t.length;n--;)t[n][2]=ii(t[n][1]);return t}function Yn(e,t){var n=null==e?S:e[t];return jr(n)?n:S}function Wn(e,t,n){for(var i=-1,r=n.length;++i<r;){var a=n[i],s=a.size;switch(a.type){case"drop":e+=s;break;case"dropRight":t-=s;break;case"take":t=ks(t,e+s);break;case"takeRight":e=ws(e,t-s)}}return{start:e,end:t}}function qn(e){var t=e.length,n=new e.constructor(t);return t&&"string"==typeof e[0]&&es.call(e,"index")&&(n.index=e.index,n.input=e.input),n}function Jn(e){var t=e.constructor;return"function"==typeof t&&t instanceof t||(t=Wa),new t}function Gn(e,t,n){var i=e.constructor;switch(t){case ie:return on(e);case W:case q:return new i(+e);case re:case ae:case se:case oe:case le:case ce:case ue:case de:case he:var r=e.buffer;return new i(n?on(r):r,e.byteOffset,e.length);case K:case te:return new i(e);case Z:var a=new i(e.source,Ee.exec(e));a.lastIndex=e.lastIndex}return a}function Qn(e,t,n){null==e||ei(t,e)||(t=hi(t),e=1==t.length?e:At(e,Jt(t,0,-1)),t=$i(t));var i=null==e?e:e[t];return null==i?S:i.apply(e,n)}function Kn(e){return null!=e&&ni(Us(e))}function Xn(e,t){return e="number"==typeof e||Ae.test(e)?+e:-1,t=null==t?Es:t,e>-1&&e%1==0&&t>e}function Zn(e,t,n){if(!Ar(n))return!1;var i=typeof t;if("number"==i?Kn(n)&&Xn(t,n.length):"string"==i&&t in n){var r=n[t];return e===e?e===r:r!==r}return!1}function ei(e,t){var n=typeof e;if("string"==n&&Se.test(e)||"number"==n)return!0;if(Do(e))return!1;var i=!xe.test(e);return i||null!=t&&e in di(t)}function ti(e){var n=Vn(e);if(!(n in ee.prototype))return!1;var i=t[n];if(e===i)return!0;var r=Hs(i);return!!r&&e===r[0]}function ni(e){return"number"==typeof e&&e>-1&&e%1==0&&Es>=e}function ii(e){return e===e&&!Ar(e)}function ri(e,t){var n=e[1],i=t[1],r=n|i,a=O>r,s=i==O&&n==D||i==O&&n==A&&e[7].length<=t[8]||i==(O|A)&&n==D;if(!a&&!s)return e;i&$&&(e[2]=t[2],r|=n&$?0:P);var o=t[3];if(o){var l=e[3];e[3]=l?ln(l,o,t[4]):et(o),e[4]=l?_(e[3],B):et(t[4])}return o=t[5],o&&(l=e[5],e[5]=l?cn(l,o,t[6]):et(o),e[6]=l?_(e[5],B):et(t[6])),o=t[7],o&&(e[7]=et(o)),i&O&&(e[8]=null==e[8]?t[8]:ks(e[8],t[8])),null==e[9]&&(e[9]=t[9]),e[0]=t[0],e[1]=r,e}function ai(e,t){return e===S?t:Mo(e,t,ai)}function si(e,t){e=di(e);for(var n=-1,i=t.length,r={};++n<i;){var a=t[n];a in e&&(r[a]=e[a])}return r}function oi(e,t){var n={};return Mt(e,function(e,i,r){t(e,i,r)&&(n[i]=e)}),n}function li(e,t){for(var n=e.length,i=ks(t.length,n),r=et(e);i--;){var a=t[i];e[i]=Xn(a,n)?r[a]:S}return e}function ci(e){for(var t=ea(e),n=t.length,i=n&&e.length,r=!!i&&ni(i)&&(Do(e)||Cr(e)),a=-1,s=[];++a<n;){var o=t[a];(r&&Xn(o,i)||es.call(e,o))&&s.push(o)}return s}function ui(e){return null==e?[]:Kn(e)?Ar(e)?e:Wa(e):aa(e)}function di(e){return Ar(e)?e:Wa(e)}function hi(e){if(Do(e))return e;var t=[];return s(e).replace(Ce,function(e,n,i,r){t.push(i?r.replace(De,"$1"):n||e)}),t}function pi(e){return e instanceof ee?e.clone():new Q(e.__wrapped__,e.__chain__,et(e.__actions__))}function fi(e,t,n){t=(n?Zn(e,t,n):null==t)?1:ws(vs(t)||1,1);for(var i=0,r=e?e.length:0,a=-1,s=Ha(gs(r/t));r>i;)s[++a]=Jt(e,i,i+=t);return s}function gi(e){for(var t=-1,n=e?e.length:0,i=-1,r=[];++t<n;){var a=e[t];a&&(r[++i]=a)}return r}function mi(e,t,n){var i=e?e.length:0;return i?((n?Zn(e,t,n):null==t)&&(t=1),Jt(e,0>t?0:t)):[]}function vi(e,t,n){var i=e?e.length:0;return i?((n?Zn(e,t,n):null==t)&&(t=1),t=i-(+t||0),Jt(e,0,0>t?0:t)):[]}function _i(e,t,n){return e&&e.length?tn(e,Un(t,n,3),!0,!0):[]}function yi(e,t,n){return e&&e.length?tn(e,Un(t,n,3),!0):[]}function bi(e,t,n,i){var r=e?e.length:0;return r?(n&&"number"!=typeof n&&Zn(e,t,n)&&(n=0,i=r),$t(e,t,n,i)):[]}function wi(e){return e?e[0]:S}function ki(e,t,n){var i=e?e.length:0;return n&&Zn(e,t,n)&&(t=!1),i?Dt(e,t):[]}function xi(e){var t=e?e.length:0;return t?Dt(e,!0):[]}function Si(e,t,n){var i=e?e.length:0;if(!i)return-1;if("number"==typeof n)n=0>n?ws(i+n,0):n;else if(n){var a=rn(e,t);return i>a&&(t===t?t===e[a]:e[a]!==e[a])?a:-1}return r(e,t,n||0)}function Ci(e){return vi(e,1)}function $i(e){var t=e?e.length:0;return t?e[t-1]:S}function Ti(e,t,n){var i=e?e.length:0;if(!i)return-1;var r=i;if("number"==typeof n)r=(0>n?ws(i+n,0):ks(n||0,i-1))+1;else if(n){r=rn(e,t,!0)-1;var a=e[r];return(t===t?t===a:a!==a)?r:-1}if(t!==t)return g(e,r,!0);for(;r--;)if(e[r]===t)return r;return-1}function Pi(){var e=arguments,t=e[0];if(!t||!t.length)return t;for(var n=0,i=Bn(),r=e.length;++n<r;)for(var a=0,s=e[n];(a=i(t,s,a))>-1;)hs.call(t,a,1);return t}function Di(e,t,n){var i=[];if(!e||!e.length)return i;var r=-1,a=[],s=e.length;for(t=Un(t,n,3);++r<s;){var o=e[r];t(o,r,e)&&(i.push(o),a.push(r))}return Yt(e,a),i}function Mi(e){return mi(e,1)}function Ei(e,t,n){var i=e?e.length:0;return i?(n&&"number"!=typeof n&&Zn(e,t,n)&&(t=0,n=i),Jt(e,t,n)):[]}function Ii(e,t,n){var i=e?e.length:0;return i?((n?Zn(e,t,n):null==t)&&(t=1),Jt(e,0,0>t?0:t)):[]}function Oi(e,t,n){var i=e?e.length:0;return i?((n?Zn(e,t,n):null==t)&&(t=1),t=i-(+t||0),Jt(e,0>t?0:t)):[]}function Ai(e,t,n){return e&&e.length?tn(e,Un(t,n,3),!1,!0):[]}function Ri(e,t,n){return e&&e.length?tn(e,Un(t,n,3)):[]}function Ni(e,t,n,i){var a=e?e.length:0;if(!a)return[];null!=t&&"boolean"!=typeof t&&(i=n,n=Zn(e,t,i)?S:t,t=!1);var s=Un();return null==n&&s===bt||(n=s(n,i,3)),t&&Bn()==r?y(e,n):Zt(e,n)}function ji(e){if(!e||!e.length)return[];var t=-1,n=0;e=ot(e,function(e){return Kn(e)?(n=ws(e.length,n),!0):void 0});for(var i=Ha(n);++t<n;)i[t]=lt(e,Bt(t));return i}function Li(e,t,n){var i=e?e.length:0;if(!i)return[];var r=ji(e);return null==t?r:(t=sn(t,n,4),lt(r,function(e){return ut(e,t,S,!0)}))}function Fi(){for(var e=-1,t=arguments.length;++e<t;){var n=arguments[e];if(Kn(n))var i=i?ct(xt(i,n),xt(n,i)):n}return i?Zt(i):[]}function Hi(e,t){var n=-1,i=e?e.length:0,r={};for(!i||t||Do(e[0])||(t=[]);++n<i;){var a=e[n];t?r[a]=t[n]:a&&(r[a[0]]=a[1])}return r}function Ui(e){var n=t(e);return n.__chain__=!0,n}function Vi(e,t,n){return t.call(n,e),e}function Bi(e,t,n){return t.call(n,e)}function zi(){return Ui(this)}function Yi(){return new Q(this.value(),this.__chain__)}function Wi(e){for(var t,n=this;n instanceof v;){var i=pi(n);t?r.__wrapped__=i:t=i;var r=i;n=n.__wrapped__}return r.__wrapped__=e,t}function qi(){var e=this.__wrapped__,t=function(e){return n&&n.__dir__<0?e:e.reverse()};if(e instanceof ee){var n=e;return this.__actions__.length&&(n=new ee(this)),n=n.reverse(),n.__actions__.push({func:Bi,args:[t],thisArg:S}),new Q(n,this.__chain__)}return this.thru(t)}function Ji(){return this.value()+""}function Gi(){return nn(this.__wrapped__,this.__actions__)}function Qi(e,t,n){var i=Do(e)?at:St;return n&&Zn(e,t,n)&&(t=S),"function"==typeof t&&n===S||(t=Un(t,n,3)),i(e,t)}function Ki(e,t,n){var i=Do(e)?ot:Tt;return t=Un(t,n,3),i(e,t)}function Xi(e,t){return io(e,Ft(t))}function Zi(e,t,n,i){var r=e?Us(e):0;return ni(r)||(e=aa(e),r=e.length),n="number"!=typeof n||i&&Zn(t,n,i)?0:0>n?ws(r+n,0):n||0,"string"==typeof e||!Do(e)&&Vr(e)?r>=n&&e.indexOf(t,n)>-1:!!r&&Bn(e,t,n)>-1}function er(e,t,n){var i=Do(e)?lt:Lt;return t=Un(t,n,3),i(e,t)}function tr(e,t){return er(e,Oa(t))}function nr(e,t,n){var i=Do(e)?ot:Tt;return t=Un(t,n,3),i(e,function(e,n,i){return!t(e,n,i)})}function ir(e,t,n){if(n?Zn(e,t,n):null==t){e=ui(e);var i=e.length;return i>0?e[Wt(0,i-1)]:S}var r=-1,a=qr(e),i=a.length,s=i-1;for(t=ks(0>t?0:+t||0,i);++r<t;){var o=Wt(r,s),l=a[o];a[o]=a[r],a[r]=l}return a.length=t,a}function rr(e){return ir(e,Ts)}function ar(e){var t=e?Us(e):0;return ni(t)?t:Ho(e).length}function sr(e,t,n){var i=Do(e)?ht:Gt;return n&&Zn(e,t,n)&&(t=S),"function"==typeof t&&n===S||(t=Un(t,n,3)),i(e,t)}function or(e,t,n){if(null==e)return[];n&&Zn(e,t,n)&&(t=S);var i=-1;t=Un(t,n,3);var r=Lt(e,function(e,n,r){return{criteria:t(e,n,r),index:++i,value:e}});return Qt(r,c)}function lr(e,t,n,i){return null==e?[]:(i&&Zn(t,n,i)&&(n=S),Do(t)||(t=null==t?[]:[t]),Do(n)||(n=null==n?[]:[n]),Kt(e,t,n))}function cr(e,t){return Ki(e,Ft(t))}function ur(e,t){if("function"!=typeof t){if("function"!=typeof e)throw new Ga(V);var n=e;e=t,t=n}return e=ys(e=+e)?e:0,function(){return--e<1?t.apply(this,arguments):void 0}}function dr(e,t,n){return n&&Zn(e,t,n)&&(t=S),t=e&&null==t?e.length:ws(+t||0,0),jn(e,O,S,S,S,S,t)}function hr(e,t){var n;if("function"!=typeof t){if("function"!=typeof e)throw new Ga(V);var i=e;e=t,t=i}return function(){return--e>0&&(n=t.apply(this,arguments)),1>=e&&(t=S),n}}function pr(e,t,n){function i(){p&&ss(p),c&&ss(c),g=0,c=p=f=S}function r(t,n){n&&ss(n),c=p=f=S,t&&(g=go(),u=e.apply(h,l),p||c||(l=h=S))}function a(){var e=t-(go()-d);0>=e||e>t?r(f,c):p=ds(a,e)}function s(){r(v,p)}function o(){if(l=arguments,d=go(),h=this,f=v&&(p||!_),m===!1)var n=_&&!p;else{c||_||(g=d);var i=m-(d-g),r=0>=i||i>m;r?(c&&(c=ss(c)),g=d,u=e.apply(h,l)):c||(c=ds(s,i))}return r&&p?p=ss(p):p||t===m||(p=ds(a,t)),n&&(r=!0,u=e.apply(h,l)),!r||p||c||(l=h=S),u}var l,c,u,d,h,p,f,g=0,m=!1,v=!0;if("function"!=typeof e)throw new Ga(V);if(t=0>t?0:+t||0,n===!0){var _=!0;v=!1}else Ar(n)&&(_=!!n.leading,m="maxWait"in n&&ws(+n.maxWait||0,t),v="trailing"in n?!!n.trailing:v);return o.cancel=i,o}function fr(e,t){if("function"!=typeof e||t&&"function"!=typeof t)throw new Ga(V);var n=function(){var i=arguments,r=t?t.apply(this,i):i[0],a=n.cache;if(a.has(r))return a.get(r);var s=e.apply(this,i);return n.cache=a.set(r,s),s};return n.cache=new fr.Cache,n}function gr(e){if("function"!=typeof e)throw new Ga(V);return function(){return!e.apply(this,arguments)}}function mr(e){return hr(2,e)}function vr(e,t){if("function"!=typeof e)throw new Ga(V);return t=ws(t===S?e.length-1:+t||0,0),function(){for(var n=arguments,i=-1,r=ws(n.length-t,0),a=Ha(r);++i<r;)a[i]=n[t+i];switch(t){case 0:return e.call(this,a);case 1:return e.call(this,n[0],a);case 2:return e.call(this,n[0],n[1],a)}var s=Ha(t+1);for(i=-1;++i<t;)s[i]=n[i];return s[t]=a,e.apply(this,s)}}function _r(e){if("function"!=typeof e)throw new Ga(V);return function(t){return e.apply(this,t)}}function yr(e,t,n){var i=!0,r=!0;if("function"!=typeof e)throw new Ga(V);return n===!1?i=!1:Ar(n)&&(i="leading"in n?!!n.leading:i,r="trailing"in n?!!n.trailing:r),pr(e,t,{leading:i,maxWait:+t,trailing:r})}function br(e,t){return t=null==t?Ta:t,jn(t,E,S,[e],[])}function wr(e,t,n,i){return t&&"boolean"!=typeof t&&Zn(e,t,n)?t=!1:"function"==typeof t&&(i=n,n=t,t=!1),"function"==typeof n?wt(e,t,sn(n,i,1)):wt(e,t)}function kr(e,t,n){return"function"==typeof t?wt(e,!0,sn(t,n,1)):wt(e,!0)}function xr(e,t){return e>t}function Sr(e,t){return e>=t}function Cr(e){return m(e)&&Kn(e)&&es.call(e,"callee")&&!cs.call(e,"callee")}function $r(e){return e===!0||e===!1||m(e)&&ns.call(e)==W}function Tr(e){return m(e)&&ns.call(e)==q}function Pr(e){return!!e&&1===e.nodeType&&m(e)&&!Hr(e)}function Dr(e){return null==e?!0:Kn(e)&&(Do(e)||Vr(e)||Cr(e)||m(e)&&Or(e.splice))?!e.length:!Ho(e).length}function Mr(e,t,n,i){n="function"==typeof n?sn(n,i,3):S;var r=n?n(e,t):S;return r===S?Rt(e,t,n):!!r}function Er(e){return m(e)&&"string"==typeof e.message&&ns.call(e)==J}function Ir(e){return"number"==typeof e&&ys(e)}function Or(e){return Ar(e)&&ns.call(e)==G}function Ar(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function Rr(e,t,n,i){return n="function"==typeof n?sn(n,i,3):S,jt(e,zn(t),n)}function Nr(e){return Fr(e)&&e!=+e}function jr(e){return null==e?!1:Or(e)?rs.test(Za.call(e)):m(e)&&Oe.test(e)}function Lr(e){return null===e}function Fr(e){return"number"==typeof e||m(e)&&ns.call(e)==K}function Hr(e){var t;if(!m(e)||ns.call(e)!=X||Cr(e)||!es.call(e,"constructor")&&(t=e.constructor,"function"==typeof t&&!(t instanceof t)))return!1;var n;return Mt(e,function(e,t){n=t}),n===S||es.call(e,n)}function Ur(e){return Ar(e)&&ns.call(e)==Z}function Vr(e){return"string"==typeof e||m(e)&&ns.call(e)==te}function Br(e){return m(e)&&ni(e.length)&&!!Ue[ns.call(e)]}function zr(e){return e===S}function Yr(e,t){return t>e}function Wr(e,t){return t>=e}function qr(e){var t=e?Us(e):0;return ni(t)?t?et(e):[]:aa(e)}function Jr(e){return yt(e,ea(e))}function Gr(e,t,n){var i=As(e);return n&&Zn(e,t,n)&&(t=S),t?vt(i,t):i}function Qr(e){return Ot(e,ea(e))}function Kr(e,t,n){var i=null==e?S:At(e,hi(t),t+"");return i===S?n:i}function Xr(e,t){if(null==e)return!1;var n=es.call(e,t);if(!n&&!ei(t)){if(t=hi(t),e=1==t.length?e:At(e,Jt(t,0,-1)),null==e)return!1;t=$i(t),n=es.call(e,t)}return n||ni(e.length)&&Xn(t,e.length)&&(Do(e)||Cr(e))}function Zr(e,t,n){n&&Zn(e,t,n)&&(t=S);for(var i=-1,r=Ho(e),a=r.length,s={};++i<a;){var o=r[i],l=e[o];t?es.call(s,l)?s[l].push(o):s[l]=[o]:s[l]=o}return s}function ea(e){if(null==e)return[];Ar(e)||(e=Wa(e));var t=e.length;t=t&&ni(t)&&(Do(e)||Cr(e))&&t||0;for(var n=e.constructor,i=-1,r="function"==typeof n&&n.prototype===e,a=Ha(t),s=t>0;++i<t;)a[i]=i+"";for(var o in e)s&&Xn(o,t)||"constructor"==o&&(r||!es.call(e,o))||a.push(o);return a}function ta(e){e=di(e);for(var t=-1,n=Ho(e),i=n.length,r=Ha(i);++t<i;){var a=n[t];r[t]=[a,e[a]]}return r}function na(e,t,n){var i=null==e?S:e[t];return i===S&&(null==e||ei(t,e)||(t=hi(t),e=1==t.length?e:At(e,Jt(t,0,-1)),i=null==e?S:e[$i(t)]),i=i===S?n:i),Or(i)?i.call(e):i}function ia(e,t,n){if(null==e)return e;var i=t+"";t=null!=e[i]||ei(t,e)?[i]:hi(t);for(var r=-1,a=t.length,s=a-1,o=e;null!=o&&++r<a;){var l=t[r];Ar(o)&&(r==s?o[l]=n:null==o[l]&&(o[l]=Xn(t[r+1])?[]:{})),o=o[l]}return e}function ra(e,t,n,i){var r=Do(e)||Br(e);if(t=Un(t,i,4),null==n)if(r||Ar(e)){var a=e.constructor;n=r?Do(e)?new a:[]:As(Or(a)?a.prototype:S)}else n={};return(r?it:Et)(e,function(e,i,r){return t(n,e,i,r)}),n}function aa(e){return en(e,Ho(e))}function sa(e){return en(e,ea(e))}function oa(e,t,n){return t=+t||0,n===S?(n=t,t=0):n=+n||0,e>=ks(t,n)&&e<ws(t,n)}function la(e,t,n){n&&Zn(e,t,n)&&(t=n=S);var i=null==e,r=null==t;if(null==n&&(r&&"boolean"==typeof e?(n=e,e=1):"boolean"==typeof t&&(n=t,r=!0)),i&&r&&(t=1,r=!1),e=+e||0,r?(t=e,e=0):t=+t||0,n||e%1||t%1){var a=Cs();return ks(e+a*(t-e+os("1e-"+((a+"").length-1))),t)}return Wt(e,t)}function ca(e){return e=s(e),e&&e.charAt(0).toUpperCase()+e.slice(1)}function ua(e){return e=s(e),e&&e.replace(Re,d).replace(Pe,"")}function da(e,t,n){e=s(e),t+="";var i=e.length;return n=n===S?i:ks(0>n?0:+n||0,i),n-=t.length,n>=0&&e.indexOf(t,n)==n}function ha(e){return e=s(e),e&&ye.test(e)?e.replace(ve,h):e}function pa(e){return e=s(e),e&&Te.test(e)?e.replace($e,p):e||"(?:)"}function fa(e,t,n){e=s(e),t=+t;var i=e.length;if(i>=t||!ys(t))return e;var r=(t-i)/2,a=vs(r),o=gs(r);return n=On("",o,n),n.slice(0,a)+e+n}function ga(e,t,n){return(n?Zn(e,t,n):null==t)?t=0:t&&(t=+t),e=ya(e),Ss(e,t||(Ie.test(e)?16:10))}function ma(e,t){var n="";if(e=s(e),t=+t,1>t||!e||!ys(t))return n;do t%2&&(n+=e),t=vs(t/2),e+=e;while(t);return n}function va(e,t,n){return e=s(e),n=null==n?0:ks(0>n?0:+n||0,e.length),e.lastIndexOf(t,n)==n}function _a(e,n,i){var r=t.templateSettings;i&&Zn(e,n,i)&&(n=i=S),e=s(e),n=mt(vt({},i||n),r,gt);var a,o,l=mt(vt({},n.imports),r.imports,gt),c=Ho(l),u=en(l,c),d=0,h=n.interpolate||Ne,p="__p += '",g=qa((n.escape||Ne).source+"|"+h.source+"|"+(h===ke?Me:Ne).source+"|"+(n.evaluate||Ne).source+"|$","g"),m="//# sourceURL="+("sourceURL"in n?n.sourceURL:"lodash.templateSources["+ ++He+"]")+"\n";e.replace(g,function(t,n,i,r,s,l){return i||(i=r),p+=e.slice(d,l).replace(je,f),n&&(a=!0,p+="' +\n__e("+n+") +\n'"),s&&(o=!0,p+="';\n"+s+";\n__p += '"),i&&(p+="' +\n((__t = ("+i+")) == null ? '' : __t) +\n'"),d=l+t.length,t}),p+="';\n";var v=n.variable;v||(p="with (obj) {\n"+p+"\n}\n"),p=(o?p.replace(pe,""):p).replace(fe,"$1").replace(ge,"$1;"),p="function("+(v||"obj")+") {\n"+(v?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(a?", __e = _.escape":"")+(o?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+p+"return __p\n}";var _=Ko(function(){return Ba(c,m+"return "+p).apply(S,u)});if(_.source=p,Er(_))throw _;return _}function ya(e,t,n){var i=e;return(e=s(e))?(n?Zn(i,t,n):null==t)?e.slice(b(e),w(e)+1):(t+="",e.slice(o(e,t),l(e,t)+1)):e}function ba(e,t,n){var i=e;return e=s(e),e?(n?Zn(i,t,n):null==t)?e.slice(b(e)):e.slice(o(e,t+"")):e}function wa(e,t,n){var i=e;return e=s(e),e?(n?Zn(i,t,n):null==t)?e.slice(0,w(e)+1):e.slice(0,l(e,t+"")+1):e}function ka(e,t,n){n&&Zn(e,t,n)&&(t=S);var i=R,r=N;if(null!=t)if(Ar(t)){var a="separator"in t?t.separator:a;i="length"in t?+t.length||0:i,r="omission"in t?s(t.omission):r}else i=+t||0;if(e=s(e),i>=e.length)return e;var o=i-r.length;if(1>o)return r;var l=e.slice(0,o);if(null==a)return l+r;if(Ur(a)){if(e.slice(o).search(a)){var c,u,d=e.slice(0,o);for(a.global||(a=qa(a.source,(Ee.exec(a)||"")+"g")),a.lastIndex=0;c=a.exec(d);)u=c.index;l=l.slice(0,null==u?o:u)}}else if(e.indexOf(a,o)!=o){var h=l.lastIndexOf(a);h>-1&&(l=l.slice(0,h))}return l+r}function xa(e){return e=s(e),e&&_e.test(e)?e.replace(me,k):e}function Sa(e,t,n){return n&&Zn(e,t,n)&&(t=S),e=s(e),e.match(t||Le)||[]}function Ca(e,t,n){return n&&Zn(e,t,n)&&(t=S),m(e)?Pa(e):bt(e,t)}function $a(e){return function(){return e}}function Ta(e){return e}function Pa(e){return Ft(wt(e,!0))}function Da(e,t){return Ht(e,wt(t,!0))}function Ma(e,t,n){if(null==n){var i=Ar(t),r=i?Ho(t):S,a=r&&r.length?Ot(t,r):S;(a?a.length:i)||(a=!1,n=t,t=e,e=this)}a||(a=Ot(t,Ho(t)));var s=!0,o=-1,l=Or(e),c=a.length;n===!1?s=!1:Ar(n)&&"chain"in n&&(s=n.chain);for(;++o<c;){var u=a[o],d=t[u];e[u]=d,l&&(e.prototype[u]=function(t){return function(){var n=this.__chain__;if(s||n){var i=e(this.__wrapped__),r=i.__actions__=et(this.__actions__);return r.push({func:t,args:arguments,thisArg:e}),i.__chain__=n,i}return t.apply(e,ct([this.value()],arguments))}}(d))}return e}function Ea(){return tt._=is,this}function Ia(){}function Oa(e){return ei(e)?Bt(e):zt(e)}function Aa(e){return function(t){return At(e,hi(t),t+"")}}function Ra(e,t,n){n&&Zn(e,t,n)&&(t=n=S),e=+e||0,n=null==n?1:+n||0,null==t?(t=e,e=0):t=+t||0;for(var i=-1,r=ws(gs((t-e)/(n||1)),0),a=Ha(r);++i<r;)a[i]=e,e+=n;return a}function Na(e,t,n){if(e=vs(e),1>e||!ys(e))return[];var i=-1,r=Ha(ks(e,Ps));for(t=sn(t,n,1);++i<e;)Ps>i?r[i]=t(i):t(i);return r}function ja(e){var t=++ts;return s(e)+t}function La(e,t){return(+e||0)+(+t||0)}function Fa(e,t,n){return n&&Zn(e,t,n)&&(t=S),t=Un(t,n,3),1==t.length?pt(Do(e)?e:ui(e),t):Xt(e,t)}e=e?nt.defaults(tt.Object(),e,nt.pick(tt,Fe)):tt;var Ha=e.Array,Ua=e.Date,Va=e.Error,Ba=e.Function,za=e.Math,Ya=e.Number,Wa=e.Object,qa=e.RegExp,Ja=e.String,Ga=e.TypeError,Qa=Ha.prototype,Ka=Wa.prototype,Xa=Ja.prototype,Za=Ba.prototype.toString,es=Ka.hasOwnProperty,ts=0,ns=Ka.toString,is=tt._,rs=qa("^"+Za.call(es).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),as=e.ArrayBuffer,ss=e.clearTimeout,os=e.parseFloat,ls=za.pow,cs=Ka.propertyIsEnumerable,us=Yn(e,"Set"),ds=e.setTimeout,hs=Qa.splice,ps=e.Uint8Array,fs=Yn(e,"WeakMap"),gs=za.ceil,ms=Yn(Wa,"create"),vs=za.floor,_s=Yn(Ha,"isArray"),ys=e.isFinite,bs=Yn(Wa,"keys"),ws=za.max,ks=za.min,xs=Yn(Ua,"now"),Ss=e.parseInt,Cs=za.random,$s=Ya.NEGATIVE_INFINITY,Ts=Ya.POSITIVE_INFINITY,Ps=4294967295,Ds=Ps-1,Ms=Ps>>>1,Es=9007199254740991,Is=fs&&new fs,Os={};t.support={};t.templateSettings={escape:be,evaluate:we,interpolate:ke,variable:"",imports:{_:t}};var As=function(){function e(){}return function(t){if(Ar(t)){e.prototype=t;var n=new e;e.prototype=S}return n||{}}}(),Rs=hn(Et),Ns=hn(It,!0),js=pn(),Ls=pn(!0),Fs=Is?function(e,t){return Is.set(e,t),e}:Ta,Hs=Is?function(e){return Is.get(e)}:Ia,Us=Bt("length"),Vs=function(){var e=0,t=0;return function(n,i){var r=go(),a=L-(r-t);if(t=r,a>0){if(++e>=j)return n}else e=0;return Fs(n,i)}}(),Bs=vr(function(e,t){return m(e)&&Kn(e)?xt(e,Dt(t,!1,!0)):[]}),zs=kn(),Ys=kn(!0),Ws=vr(function(e){for(var t=e.length,n=t,i=Ha(d),a=Bn(),s=a==r,o=[];n--;){var l=e[n]=Kn(l=e[n])?l:[];i[n]=s&&l.length>=120?gn(n&&l):null}var c=e[0],u=-1,d=c?c.length:0,h=i[0];e:for(;++u<d;)if(l=c[u],(h?Ke(h,l):a(o,l,0))<0){for(var n=t;--n;){var p=i[n];if((p?Ke(p,l):a(e[n],l,0))<0)continue e}h&&h.push(l),o.push(l)}return o}),qs=vr(function(e,t){t=Dt(t);var i=_t(e,t);return Yt(e,t.sort(n)),i}),Js=Nn(),Gs=Nn(!0),Qs=vr(function(e){return Zt(Dt(e,!1,!0))}),Ks=vr(function(e,t){return Kn(e)?xt(e,t):[]}),Xs=vr(ji),Zs=vr(function(e){var t=e.length,n=t>2?e[t-2]:S,i=t>1?e[t-1]:S;return t>2&&"function"==typeof n?t-=2:(n=t>1&&"function"==typeof i?(--t,i):S,i=S),e.length=t,Li(e,n,i)}),eo=vr(function(e){return e=Dt(e),this.thru(function(t){return Ze(Do(t)?t:[di(t)],e)})}),to=vr(function(e,t){return _t(e,Dt(t))}),no=un(function(e,t,n){es.call(e,n)?++e[n]:e[n]=1}),io=wn(Rs),ro=wn(Ns,!0),ao=Cn(it,Rs),so=Cn(rt,Ns),oo=un(function(e,t,n){es.call(e,n)?e[n].push(t):e[n]=[t]}),lo=un(function(e,t,n){e[n]=t}),co=vr(function(e,t,n){var i=-1,r="function"==typeof t,a=ei(t),s=Kn(e)?Ha(e.length):[];return Rs(e,function(e){var o=r?t:a&&null!=e?e[t]:S;s[++i]=o?o.apply(e,n):Qn(e,t,n)}),s}),uo=un(function(e,t,n){e[n?0:1].push(t)},function(){return[[],[]]}),ho=En(ut,Rs),po=En(dt,Ns),fo=vr(function(e,t){if(null==e)return[];var n=t[2];return n&&Zn(t[0],t[1],n)&&(t.length=1),Kt(e,Dt(t),[])}),go=xs||function(){return(new Ua).getTime()},mo=vr(function(e,t,n){var i=$;if(n.length){var r=_(n,mo.placeholder);i|=E}return jn(e,i,t,n,r)}),vo=vr(function(e,t){t=t.length?Dt(t):Qr(e);for(var n=-1,i=t.length;++n<i;){var r=t[n];e[r]=jn(e[r],$,e)}return e}),_o=vr(function(e,t,n){var i=$|T;if(n.length){var r=_(n,_o.placeholder);i|=E}return jn(t,i,e,n,r)}),yo=_n(D),bo=_n(M),wo=vr(function(e,t){return kt(e,1,t)}),ko=vr(function(e,t,n){return kt(e,t,n)}),xo=Sn(),So=Sn(!0),Co=vr(function(e,t){if(t=Dt(t),"function"!=typeof e||!at(t,a))throw new Ga(V);var n=t.length;return vr(function(i){for(var r=ks(i.length,n);r--;)i[r]=t[r](i[r]);return e.apply(this,i)})}),$o=Mn(E),To=Mn(I),Po=vr(function(e,t){return jn(e,A,S,S,S,Dt(t))}),Do=_s||function(e){return m(e)&&ni(e.length)&&ns.call(e)==Y},Mo=dn(Ut),Eo=dn(function(e,t,n){return n?mt(e,t,n):vt(e,t)}),Io=yn(Eo,ft),Oo=yn(Mo,ai),Ao=xn(Et),Ro=xn(It),No=$n(js),jo=$n(Ls),Lo=Tn(Et),Fo=Tn(It),Ho=bs?function(e){var t=null==e?S:e.constructor;return"function"==typeof t&&t.prototype===e||"function"!=typeof e&&Kn(e)?ci(e):Ar(e)?bs(e):[]}:ci,Uo=Pn(!0),Vo=Pn(),Bo=vr(function(e,t){if(null==e)return{};if("function"!=typeof t[0]){var t=lt(Dt(t),Ja);return si(e,xt(ea(e),t))}var n=sn(t[0],t[1],3);return oi(e,function(e,t,i){return!n(e,t,i)})}),zo=vr(function(e,t){return null==e?{}:"function"==typeof t[0]?oi(e,sn(t[0],t[1],3)):si(e,Dt(t))}),Yo=mn(function(e,t,n){return t=t.toLowerCase(),e+(n?t.charAt(0).toUpperCase()+t.slice(1):t)}),Wo=mn(function(e,t,n){return e+(n?"-":"")+t.toLowerCase()}),qo=Dn(),Jo=Dn(!0),Go=mn(function(e,t,n){return e+(n?"_":"")+t.toLowerCase()}),Qo=mn(function(e,t,n){return e+(n?" ":"")+(t.charAt(0).toUpperCase()+t.slice(1))}),Ko=vr(function(e,t){try{return e.apply(S,t)}catch(n){return Er(n)?n:new Va(n)}}),Xo=vr(function(e,t){
return function(n){return Qn(n,e,t)}}),Zo=vr(function(e,t){return function(n){return Qn(e,n,t)}}),el=Rn("ceil"),tl=Rn("floor"),nl=bn(xr,$s),il=bn(Yr,Ts),rl=Rn("round");return t.prototype=v.prototype,Q.prototype=As(v.prototype),Q.prototype.constructor=Q,ee.prototype=As(v.prototype),ee.prototype.constructor=ee,Ye.prototype["delete"]=We,Ye.prototype.get=qe,Ye.prototype.has=Je,Ye.prototype.set=Ge,Qe.prototype.push=Xe,fr.Cache=Ye,t.after=ur,t.ary=dr,t.assign=Eo,t.at=to,t.before=hr,t.bind=mo,t.bindAll=vo,t.bindKey=_o,t.callback=Ca,t.chain=Ui,t.chunk=fi,t.compact=gi,t.constant=$a,t.countBy=no,t.create=Gr,t.curry=yo,t.curryRight=bo,t.debounce=pr,t.defaults=Io,t.defaultsDeep=Oo,t.defer=wo,t.delay=ko,t.difference=Bs,t.drop=mi,t.dropRight=vi,t.dropRightWhile=_i,t.dropWhile=yi,t.fill=bi,t.filter=Ki,t.flatten=ki,t.flattenDeep=xi,t.flow=xo,t.flowRight=So,t.forEach=ao,t.forEachRight=so,t.forIn=No,t.forInRight=jo,t.forOwn=Lo,t.forOwnRight=Fo,t.functions=Qr,t.groupBy=oo,t.indexBy=lo,t.initial=Ci,t.intersection=Ws,t.invert=Zr,t.invoke=co,t.keys=Ho,t.keysIn=ea,t.map=er,t.mapKeys=Uo,t.mapValues=Vo,t.matches=Pa,t.matchesProperty=Da,t.memoize=fr,t.merge=Mo,t.method=Xo,t.methodOf=Zo,t.mixin=Ma,t.modArgs=Co,t.negate=gr,t.omit=Bo,t.once=mr,t.pairs=ta,t.partial=$o,t.partialRight=To,t.partition=uo,t.pick=zo,t.pluck=tr,t.property=Oa,t.propertyOf=Aa,t.pull=Pi,t.pullAt=qs,t.range=Ra,t.rearg=Po,t.reject=nr,t.remove=Di,t.rest=Mi,t.restParam=vr,t.set=ia,t.shuffle=rr,t.slice=Ei,t.sortBy=or,t.sortByAll=fo,t.sortByOrder=lr,t.spread=_r,t.take=Ii,t.takeRight=Oi,t.takeRightWhile=Ai,t.takeWhile=Ri,t.tap=Vi,t.throttle=yr,t.thru=Bi,t.times=Na,t.toArray=qr,t.toPlainObject=Jr,t.transform=ra,t.union=Qs,t.uniq=Ni,t.unzip=ji,t.unzipWith=Li,t.values=aa,t.valuesIn=sa,t.where=cr,t.without=Ks,t.wrap=br,t.xor=Fi,t.zip=Xs,t.zipObject=Hi,t.zipWith=Zs,t.backflow=So,t.collect=er,t.compose=So,t.each=ao,t.eachRight=so,t.extend=Eo,t.iteratee=Ca,t.methods=Qr,t.object=Hi,t.select=Ki,t.tail=Mi,t.unique=Ni,Ma(t,t),t.add=La,t.attempt=Ko,t.camelCase=Yo,t.capitalize=ca,t.ceil=el,t.clone=wr,t.cloneDeep=kr,t.deburr=ua,t.endsWith=da,t.escape=ha,t.escapeRegExp=pa,t.every=Qi,t.find=io,t.findIndex=zs,t.findKey=Ao,t.findLast=ro,t.findLastIndex=Ys,t.findLastKey=Ro,t.findWhere=Xi,t.first=wi,t.floor=tl,t.get=Kr,t.gt=xr,t.gte=Sr,t.has=Xr,t.identity=Ta,t.includes=Zi,t.indexOf=Si,t.inRange=oa,t.isArguments=Cr,t.isArray=Do,t.isBoolean=$r,t.isDate=Tr,t.isElement=Pr,t.isEmpty=Dr,t.isEqual=Mr,t.isError=Er,t.isFinite=Ir,t.isFunction=Or,t.isMatch=Rr,t.isNaN=Nr,t.isNative=jr,t.isNull=Lr,t.isNumber=Fr,t.isObject=Ar,t.isPlainObject=Hr,t.isRegExp=Ur,t.isString=Vr,t.isTypedArray=Br,t.isUndefined=zr,t.kebabCase=Wo,t.last=$i,t.lastIndexOf=Ti,t.lt=Yr,t.lte=Wr,t.max=nl,t.min=il,t.noConflict=Ea,t.noop=Ia,t.now=go,t.pad=fa,t.padLeft=qo,t.padRight=Jo,t.parseInt=ga,t.random=la,t.reduce=ho,t.reduceRight=po,t.repeat=ma,t.result=na,t.round=rl,t.runInContext=x,t.size=ar,t.snakeCase=Go,t.some=sr,t.sortedIndex=Js,t.sortedLastIndex=Gs,t.startCase=Qo,t.startsWith=va,t.sum=Fa,t.template=_a,t.trim=ya,t.trimLeft=ba,t.trimRight=wa,t.trunc=ka,t.unescape=xa,t.uniqueId=ja,t.words=Sa,t.all=Qi,t.any=sr,t.contains=Zi,t.eq=Mr,t.detect=io,t.foldl=ho,t.foldr=po,t.head=wi,t.include=Zi,t.inject=ho,Ma(t,function(){var e={};return Et(t,function(n,i){t.prototype[i]||(e[i]=n)}),e}(),!1),t.sample=ir,t.prototype.sample=function(e){return this.__chain__||null!=e?this.thru(function(t){return ir(t,e)}):ir(this.value())},t.VERSION=C,it(["bind","bindKey","curry","curryRight","partial","partialRight"],function(e){t[e].placeholder=t}),it(["drop","take"],function(e,t){ee.prototype[e]=function(n){var i=this.__filtered__;if(i&&!t)return new ee(this);n=null==n?1:ws(vs(n)||0,0);var r=this.clone();return i?r.__takeCount__=ks(r.__takeCount__,n):r.__views__.push({size:n,type:e+(r.__dir__<0?"Right":"")}),r},ee.prototype[e+"Right"]=function(t){return this.reverse()[e](t).reverse()}}),it(["filter","map","takeWhile"],function(e,t){var n=t+1,i=n!=U;ee.prototype[e]=function(e,t){var r=this.clone();return r.__iteratees__.push({iteratee:Un(e,t,1),type:n}),r.__filtered__=r.__filtered__||i,r}}),it(["first","last"],function(e,t){var n="take"+(t?"Right":"");ee.prototype[e]=function(){return this[n](1).value()[0]}}),it(["initial","rest"],function(e,t){var n="drop"+(t?"":"Right");ee.prototype[e]=function(){return this.__filtered__?new ee(this):this[n](1)}}),it(["pluck","where"],function(e,t){var n=t?"filter":"map",i=t?Ft:Oa;ee.prototype[e]=function(e){return this[n](i(e))}}),ee.prototype.compact=function(){return this.filter(Ta)},ee.prototype.reject=function(e,t){return e=Un(e,t,1),this.filter(function(t){return!e(t)})},ee.prototype.slice=function(e,t){e=null==e?0:+e||0;var n=this;return n.__filtered__&&(e>0||0>t)?new ee(n):(0>e?n=n.takeRight(-e):e&&(n=n.drop(e)),t!==S&&(t=+t||0,n=0>t?n.dropRight(-t):n.take(t-e)),n)},ee.prototype.takeRightWhile=function(e,t){return this.reverse().takeWhile(e,t).reverse()},ee.prototype.toArray=function(){return this.take(Ts)},Et(ee.prototype,function(e,n){var i=/^(?:filter|map|reject)|While$/.test(n),r=/^(?:first|last)$/.test(n),a=t[r?"take"+("last"==n?"Right":""):n];a&&(t.prototype[n]=function(){var t=r?[1]:arguments,n=this.__chain__,s=this.__wrapped__,o=!!this.__actions__.length,l=s instanceof ee,c=t[0],u=l||Do(s);u&&i&&"function"==typeof c&&1!=c.length&&(l=u=!1);var d=function(e){return r&&n?a(e,1)[0]:a.apply(S,ct([e],t))},h={func:Bi,args:[d],thisArg:S},p=l&&!o;if(r&&!n)return p?(s=s.clone(),s.__actions__.push(h),e.call(s)):a.call(S,this.value())[0];if(!r&&u){s=p?s:new ee(this);var f=e.apply(s,t);return f.__actions__.push(h),new Q(f,n)}return this.thru(d)})}),it(["join","pop","push","replace","shift","sort","splice","split","unshift"],function(e){var n=(/^(?:replace|split)$/.test(e)?Xa:Qa)[e],i=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",r=/^(?:join|pop|replace|shift)$/.test(e);t.prototype[e]=function(){var e=arguments;return r&&!this.__chain__?n.apply(this.value(),e):this[i](function(t){return n.apply(t,e)})}}),Et(ee.prototype,function(e,n){var i=t[n];if(i){var r=i.name,a=Os[r]||(Os[r]=[]);a.push({name:n,func:i})}}),Os[In(S,T).name]=[{name:"wrapper",func:S}],ee.prototype.clone=ne,ee.prototype.reverse=Be,ee.prototype.value=ze,t.prototype.chain=zi,t.prototype.commit=Yi,t.prototype.concat=eo,t.prototype.plant=Wi,t.prototype.reverse=qi,t.prototype.toString=Ji,t.prototype.run=t.prototype.toJSON=t.prototype.valueOf=t.prototype.value=Gi,t.prototype.collect=t.prototype.map,t.prototype.head=t.prototype.first,t.prototype.select=t.prototype.filter,t.prototype.tail=t.prototype.rest,t}var S,C="3.10.1",$=1,T=2,P=4,D=8,M=16,E=32,I=64,O=128,A=256,R=30,N="...",j=150,L=16,F=200,H=1,U=2,V="Expected a function",B="__lodash_placeholder__",z="[object Arguments]",Y="[object Array]",W="[object Boolean]",q="[object Date]",J="[object Error]",G="[object Function]",Q="[object Map]",K="[object Number]",X="[object Object]",Z="[object RegExp]",ee="[object Set]",te="[object String]",ne="[object WeakMap]",ie="[object ArrayBuffer]",re="[object Float32Array]",ae="[object Float64Array]",se="[object Int8Array]",oe="[object Int16Array]",le="[object Int32Array]",ce="[object Uint8Array]",ue="[object Uint8ClampedArray]",de="[object Uint16Array]",he="[object Uint32Array]",pe=/\b__p \+= '';/g,fe=/\b(__p \+=) '' \+/g,ge=/(__e\(.*?\)|\b__t\)) \+\n'';/g,me=/&(?:amp|lt|gt|quot|#39|#96);/g,ve=/[&<>"'`]/g,_e=RegExp(me.source),ye=RegExp(ve.source),be=/<%-([\s\S]+?)%>/g,we=/<%([\s\S]+?)%>/g,ke=/<%=([\s\S]+?)%>/g,xe=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\n\\]|\\.)*?\1)\]/,Se=/^\w*$/,Ce=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\n\\]|\\.)*?)\2)\]/g,$e=/^[:!,]|[\\^$.*+?()[\]{}|\/]|(^[0-9a-fA-Fnrtuvx])|([\n\r\u2028\u2029])/g,Te=RegExp($e.source),Pe=/[\u0300-\u036f\ufe20-\ufe23]/g,De=/\\(\\)?/g,Me=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Ee=/\w*$/,Ie=/^0[xX]/,Oe=/^\[object .+?Constructor\]$/,Ae=/^\d+$/,Re=/[\xc0-\xd6\xd8-\xde\xdf-\xf6\xf8-\xff]/g,Ne=/($^)/,je=/['\n\r\u2028\u2029\\]/g,Le=function(){var e="[A-Z\\xc0-\\xd6\\xd8-\\xde]",t="[a-z\\xdf-\\xf6\\xf8-\\xff]+";return RegExp(e+"+(?="+e+t+")|"+e+"?"+t+"|"+e+"+|[0-9]+","g")}(),Fe=["Array","ArrayBuffer","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Math","Number","Object","RegExp","Set","String","_","clearTimeout","isFinite","parseFloat","parseInt","setTimeout","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap"],He=-1,Ue={};Ue[re]=Ue[ae]=Ue[se]=Ue[oe]=Ue[le]=Ue[ce]=Ue[ue]=Ue[de]=Ue[he]=!0,Ue[z]=Ue[Y]=Ue[ie]=Ue[W]=Ue[q]=Ue[J]=Ue[G]=Ue[Q]=Ue[K]=Ue[X]=Ue[Z]=Ue[ee]=Ue[te]=Ue[ne]=!1;var Ve={};Ve[z]=Ve[Y]=Ve[ie]=Ve[W]=Ve[q]=Ve[re]=Ve[ae]=Ve[se]=Ve[oe]=Ve[le]=Ve[K]=Ve[X]=Ve[Z]=Ve[te]=Ve[ce]=Ve[ue]=Ve[de]=Ve[he]=!0,Ve[J]=Ve[G]=Ve[Q]=Ve[ee]=Ve[ne]=!1;var Be={"\xc0":"A","\xc1":"A","\xc2":"A","\xc3":"A","\xc4":"A","\xc5":"A","\xe0":"a","\xe1":"a","\xe2":"a","\xe3":"a","\xe4":"a","\xe5":"a","\xc7":"C","\xe7":"c","\xd0":"D","\xf0":"d","\xc8":"E","\xc9":"E","\xca":"E","\xcb":"E","\xe8":"e","\xe9":"e","\xea":"e","\xeb":"e","\xcc":"I","\xcd":"I","\xce":"I","\xcf":"I","\xec":"i","\xed":"i","\xee":"i","\xef":"i","\xd1":"N","\xf1":"n","\xd2":"O","\xd3":"O","\xd4":"O","\xd5":"O","\xd6":"O","\xd8":"O","\xf2":"o","\xf3":"o","\xf4":"o","\xf5":"o","\xf6":"o","\xf8":"o","\xd9":"U","\xda":"U","\xdb":"U","\xdc":"U","\xf9":"u","\xfa":"u","\xfb":"u","\xfc":"u","\xdd":"Y","\xfd":"y","\xff":"y","\xc6":"Ae","\xe6":"ae","\xde":"Th","\xfe":"th","\xdf":"ss"},ze={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","`":"&#96;"},Ye={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'","&#96;":"`"},We={"function":!0,object:!0},qe={0:"x30",1:"x31",2:"x32",3:"x33",4:"x34",5:"x35",6:"x36",7:"x37",8:"x38",9:"x39",A:"x41",B:"x42",C:"x43",D:"x44",E:"x45",F:"x46",a:"x61",b:"x62",c:"x63",d:"x64",e:"x65",f:"x66",n:"x6e",r:"x72",t:"x74",u:"x75",v:"x76",x:"x78"},Je={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Ge=We[typeof t]&&t&&!t.nodeType&&t,Qe=We[typeof e]&&e&&!e.nodeType&&e,Ke=Ge&&Qe&&"object"==typeof global&&global&&global.Object&&global,Xe=We[typeof self]&&self&&self.Object&&self,Ze=We[typeof window]&&window&&window.Object&&window,et=Qe&&Qe.exports===Ge&&Ge,tt=Ke||Ze!==(this&&this.window)&&Ze||Xe||this,nt=x();"function"==typeof define&&"object"==typeof define.amd&&define.amd?(tt._=nt,define(function(){return nt})):Ge&&Qe?et?(Qe.exports=nt)._=nt:Ge._=nt:tt._=nt}).call(this)},559:function(e,t,n){n(564),n(196),n(195),n(60),n(16),n(54),n(210),n(49),n(211),n(133),angular.module("ServerSummaryTableControllers",["ServerAlertPolicyServices","ServerAgentPropertiesServices","ServerAgentRollupFilters","HawthorneServices","rpmPagination","ServerAgentServices","RequestParamsService","rpmConstants","nrSwitchDirective","healthStatusDirective"]).controller("SummaryTableController",["$scope","$filter","$window","$q","$timeout","ServerAlertPolicy","LabelService","ServerBatchService","ViolationSummaryService","currentUser","account","requestParams","arrayUtils","features","feature_switches",function(e,t,n,i,r,a,s,o,l,c,u,d,h,p,f){e.servers=o.all(),e.labels=s.all(),e.applyFilterOnCompletion=!1,e.rollups=[],e.alertPolicies=[],e.selectedLabels=[],e.loading={serverTable:!0,policies:!0,violationSummaries:!0},e.percentLoaded=0,e.isInitialPageLoad=!0,e.dropdownOptionGroups=[],e.currentUser=c,e.features=p,e.feature_switches=f,e.labelServiceAvailable=n.serverMetadata.services.labels.available,e.$on("$locationChangeSuccess",function(){e.isInitialPageLoad||(e.labelServiceAvailable?(m(),g(),e.selectedCategory?b():(w(),y())):w()),window.RPM.permalink.update(window.location.toString())}),o.load(n.serverMetadata).then(function(){e.isInitialPageLoad=!1;for(var t=d.get("filterBy"),n=0;n<t.length;n++)e.addLabelToParams(t[n]);t.length>0&&(m(),y());for(var i=d.get("rollupBy"),n=0;n<i.length;n++)_(i[n]);i.length>0&&(g(),b()),e.applyFilterOnCompletion=!0},function(){},function(t){e.percentLoaded=isNaN(t)?0:Math.round(t),t>=100&&(e.loading.serverTable=!1),e.paginator.totalItems=o.totalCount(),e.paginator.loadedItems=o.loadedCount(),e.paginator.hiddenItems=o.hiddenCount(),e.paginator.showHidden=o.showHidden(),e.paginator.visibleItems=e.servers.length;var n=!1;e.paginator.totalItems>0&&e.servers.length>=e.paginator.totalItems&&0==e.applyFilterOnCompletion&&(p.aws_monitoring?o.ec2InstancesLoaded()&&(n=!0):n=!0)}),p.hawthorne_integration?(e.loading.policies=!1,e.loading.violationSummaries=!0,l.load(u.id,"SERVERS","servers",n.violationSummaryData).then(function(){},function(){},function(t){t>=100&&(e.loading.violationSummaries=!1)})):angular.element(window).bind("load",function(){a.query({},function(t){e.alertPolicies=t,e.loading.policies=!1})}),e.$watch(function(){var e=document.getElementById("server_summary_table");return null!=e?e.innerHTML:null},function(){p.aws_monitoring&&e.throttle(e.renderTooltips(),500)}),e.renderTooltips=function(){RPM.tooltips.create({tip_property:"data-tip",position_property:"data-tip-position"})},e.throttle=function(e,t){var n=!1;return function(){n||(e.call(),n=!0,setTimeout(function(){n=!1},t))}},e.$watch("filterInput",function(t,n){if(t&&t!==n){var i=JSON.parse(t);switch(e.searchTerm=void 0,i.objType){case"label":e.addLabelToParams(i.value),e.filterInput=void 0;break;case"server":k(i.value);break;case"category":_(i.value),e.filterInput=void 0;break;case"search":e.searchTerm=i.value,y()}}else n&&!t.length&&"search"===JSON.parse(n).objType&&(e.searchTerm=void 0,y())});var g=function(){if(e.labels.length>0){var t=d.get("rollupBy")[0];"undefined"==typeof t?e.selectedCategory=void 0:s.categories().includes(t)?e.selectedCategory=t:e.removeCategoryFromParams(t)}},m=function(){var t=d.get("filterBy");e.selectedLabels=s.setSelectedLabels(t),e.labels.length>0&&e.selectedLabels.length>0&&v(t)},v=function(t){setLabelKeys=e.selectedLabels.map(function(e){return e.key});for(var n=0;n<t.length;n++){var i=t[n];setLabelKeys.includes(i)||e.removeLabelFromParams(i)}};e.addLabelToParams=function(t){var n=d.get("filterBy"),i=d.get("rollupBy")[0],r={};n.includes(t)||n.push(t),r.filterBy=n,i&&(r.rollupBy=i),d.set(r),e.paginator.currentPage=1},e.removeLabelFromParams=function(t){var n=d.get("filterBy"),i=d.get("rollupBy")[0],r=n.indexOf(t),a={};n.splice(r,1),i&&(a.rollupBy=i),a.filterBy=n,d.set(a),e.paginator.currentPage=1};var _=function(e){var t=d.get("filterBy");d.set({rollupBy:e,filterBy:t})};e.removeCategoryFromParams=function(){var e=d.get("filterBy");d.set({filterBy:e})};var y=function(){o.filter(t("identifySortedCommonServers")(e.selectedLabels),e.searchTerm),s.applySelectedLabels(e.selectedLabels),e.paginator.visibleItems=e.servers.length},b=function(){var n=t("rollups")(s.all(),e.selectedLabels);e.rollups=t("categoryFilter")(n,e.selectedCategory),e.rollupsPaginator.currentPage=1,e.rollupsPaginator.totalItems=e.rollups.length,e.rollupsPaginator.loadedItems=e.rollups.length,e.rollupsPaginator.visibleItems=e.rollups.length},w=function(){e.selectedCategory=void 0,e.rollups=[]},k=function(e){e.is_ec2_instance?n.location="/accounts/"+u.id+"/servers/"+e.id+"/aws?instance_id="+e.name:n.location="/accounts/"+u.id+"/servers/"+e.id};e.paginator={totalItems:0,loadedItems:0,visibleItems:0,hiddenItems:0,itemsPerPage:20,numPages:0,currentPage:1,maxSize:5,showHidden:!1,itemType:"Servers"},e.rollupsPaginator={totalItems:0,loadedItems:0,visibleItems:0,hiddenItems:0,itemsPerPage:20,numPages:0,currentPage:1,maxSize:5,showHidden:!1,itemType:"Rollups"};var x=function(e,t){return JSON.stringify({objType:e,value:t})},S=function(e){for(var t={text:"<span class='category-name'>Roll up by</span>",cssClass:"category-group",children:[],showingCats:0,totalCats:0},n=0,i=0;i<s.categories().length&&!(n>4);i++){var r=s.categories()[i];!r.hidden&&r.toUpperCase().indexOf(e.toUpperCase())>=0&&(n++,t.children[t.children.length]={id:x("category",r),text:r,cssClass:"category"})}var a=1==t.totalCats?"category":"categories";return t.showingCats=n,t.totalCats=s.categories().length,t.text+=" <span class='display-info'>"+t.showingCats+" of "+t.totalCats+" "+a+"</span>",t},C=function(t){for(var n={text:"<span class='category-name'>Go to</span>",children:[],showingservers:0,totalservers:0},i=0,r=0;r<e.servers.length&&!(i>4);r++){var a=e.servers[r];!a.hidden&&a.name.toUpperCase().indexOf(t.toUpperCase())>=0&&(i++,n.children[n.children.length]={id:x("server",a),text:a.name,cssClass:"agent"})}var s=1==n.totalservers?"server":"servers";return n.showingservers=i,n.totalservers=e.servers.length,n.text+=" <span class='display-info'>"+n.showingservers+" of "+n.totalservers+" "+s+"</span>",n},$=function(t){for(var n={},i=0;i<e.labels.length;i++){var r=e.labels[i];if(!r.hidden&&r.name.toUpperCase().indexOf(t.toUpperCase())>=0){if(n[r.category]||(n[r.category]={text:"<span class='category-name'>"+r.category+"</span>",children:[],showingLabels:0,totalLabels:0}),n[r.category].showingLabels<5){var a=n[r.category].showingLabels;n[r.category].children[a]={id:x("label",r.key),text:r.name,cssClass:"label"},n[r.category].showingLabels++}n[r.category].totalLabels++}}for(var s in n){var o=1==n[s].totalLabels?"label":"labels";n[s].text+=" <span class='display-info'>"+n[s].showingLabels+" of "+n[s].totalLabels+" "+o+"</span>"}return n};e.select2options={placeholder:"Filter servers",allowClear:!0,width:"450px",dropdownCssClass:"filter-rollup-dropdown",containerCssClass:"filter-rollup-container",formatResult:function(e,t,i,r){if(e.cssClass&&t.addClass(e.cssClass),!e.id)return e.text;var a=[];return e.cssClass&&t.addClass(e.cssClass),n.Select2.util.markMatch(e.text,i.term,a,r),a.join("")},initSelection:function(){},query:function(t){var n,i,r,a={results:[]};if(!e.servers.length)return a;if(e.labelServiceAvailable){n=S(t.term),n.children.length>0&&(a.results[a.results.length]=n),r=$(t.term);for(group in r)a.results[a.results.length]=r[group]}i=C(t.term),i.children.length&&(a.results[a.results.length]=i),t.term.length>0&&0!==i.children.length&&!e.selectedCategory&&a.results.unshift({cssClass:"category-name",text:"Server name",children:[{id:x("search",t.term),text:t.term}]}),e.labelServiceAvailable||a.results.unshift({text:T,children:[]}),t.callback(a)}};var T='<span class="label-service-offline">Labels and Rollups temporarily unavailable</span>'}])},560:function(e,t,n){n(562),n(281),n(31),n(9),n(60),n(16),n(198);var i={agentSummaryTable:n(465),agentSummaryTableAWS:n(466),settingsDropdown:n(468),relatedAppList:n(467)};angular.module("ServerAgentSummaryDirectives",["ServerAgentServices","ServerAgentPropertiesServices","NumberFilters","ServerFilters","StringFormatFilters","PaginationFilters","rpmConstants","pasvaz.bindonce"]).directive("agentSummaryTable",["$filter","$http","account","LabelService","$window","$timeout","features","feature_switches",function(e,t,n,r,a,s,o,l){return{restrict:"E",template:l.aws_view?i.agentSummaryTableAWS:i.agentSummaryTable,replace:!0,scope:{servers:"=",alertPolicies:"=",showSettings:"=",paginator:"=",loading:"=",showInlineLabels:"="},link:function(e){var t={trafficLight:!1},i=r.all();e.accountId=n.id,e.visibleServers=[],e.sortColumn="trafficLight",e.sortOrder=t[e.sortColumn],e.addingInlineLabelFor={},e.editingServerNameFor={},e.features=o,e.feature_switches=l,e.paginatedAppsPool=Array(e.paginator.itemsPerPage),e.determineLabelType=function(e){return e.indexOf("AWS:")>-1?"label-aws":""},e.awsStateColor=function(e){return"running"==e?"healthy_value":"pending"==e||"stopping"==e||"shutting-down"==e||"rebooting"==e?"caution_value":"stopped"==e||"terminated"==e?"danger_value":""},e.awsStatusColor=function(e){return"ok"!=e&&"--"!=e&&""!=e?"danger_value":"healthy_value"},e.formatDate=function(e){return new Date(e)},e.sortByColumn=function(n){t[n]=!t[n],e.sortOrder=t[n],e.sortColumn=n,e.paginator.currentPage=1},e.sortClass=function(t){return e.sortColumn==t?e.sortOrder?"headerSortUp":"headerSortDown":""},e.toggleEditNameInput=function(){var t=this;e.editingServerNameFor!==t.server?(e.editingServerNameFor=t.server,t.server.newName=t.server.name):e.editingServerNameFor={}},e.updateServerName=function(){e.editingServerNameFor={};var t=this,n=t.server.name,i=t.server.newName;i!==n&&i&&0!==i.length&&i.length<=32&&(t.server.name=i,t.server.updateName(i).success(function(){}).error(function(){t.server.name=n,RPM.add_flash_message("error","update-name-error","Unable to update server name.",!0,!0)}))},e.showInlineLabelSelector=function(){var t=this;e.addingInlineLabelFor=t.server,s(function(){var n=t.server.id,i=$("#inlineLabelSelect"+n);s(function(){i.select2("open")}),i.on("select2-close",function(){s(function(){e.hideInlineLabelSelector()})})})},e.hideInlineLabelSelector=function(){e.addingInlineLabelFor={}},e.addLabel=function(e){var t=this;t.server.addLabel(e).success(function(t){t.label?r.addOrUpdateLabel(t.label):c(e,"add",t)}).error(function(t){c(e,"add",t)})},e.removeLabel=function(e){var t=this;return e.indexOf("AWS:")>-1?!1:confirm("Remove the label: "+e+" from "+t.server.name+"?")?void t.server.removeLabel(e).success(function(t){t.label?r.addOrUpdateLabel(t.label):c(e,"remove",t)}).error(function(t){c(e,"remove",t)}):!1};var c=function(e,t,n){var i=e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;"),r="Failed to "+t+' label "'+i+'"';n.indexOf("LabelEntitiesController::InvalidLabelKey")>=0&&(r+='. Required format for category and label creation is "Category:Value".  May only contain: letters, numbers, underscores, and hyphens'),RPM.add_flash_message("error","add-label-error",r,!0,!0)},u=function(e){return!!e.match(/^[^:]+:[^:]+$/)};e.select2options={allowClear:!0,width:"350px",dropdownCssClass:"inline-label-dropdown",containerCssClass:"inline-label-container",formatResult:function(e,t,n,i){var r=i(n.term);if(!e.id)return e.text;var s=[],o=JSON.parse(e.id);return"newLabel"===o.objType?s=u(o.value)?['<i class="icon add"></i><span>',r,"</span>"]:['<span class="invalid">',r,"</span>"]:a.Select2.util.markMatch(e.text,r,s,i),s.join("")},initSelection:function(t){var n,i=angular.element(t[0]),r=i.scope();r&&void 0!==r.addLabelInput&&(n=JSON.parse(r.addLabelInput),u(n.value)?r.addLabel(n.value):c(n.value,"add","LabelEntitiesController::InvalidLabelKey"),r.addLabelInput=void 0,e.addingInlineLabelFor={})},query:function(e){var t,n={results:[]},i=e.term.split(":"),r=i[0],a=i[1],s=angular.element(e.element),o=s.scope(),l=o.server.labels().map(function(e){return e.key.toUpperCase()});r&&(r=r.toUpperCase()),a&&(a=a.toUpperCase()),t=p(e.term,l);for(var c in t)n.results[n.results.length]=t[c];if(0===Object.keys(t).length){var f,g=d(r)+":"+d(a),m="newLabel";l.includes(e.term.toUpperCase())?(f="Aleady applied",m="appliedValue"):f=u(e.term)?"Create new label":"Category:Label",n.results.unshift({text:f,children:[{id:h(m,e.term),text:g}]})}e.callback(n)}};var d=function(e){return void 0===e||""===e?"":e[0].toUpperCase()+e.slice(1).toLowerCase()},h=function(e,t){return JSON.stringify({objType:e,value:t})},p=function(e,t){for(var n={},r=0,a=0;a<i.length&&!(r>4);a++){var s=i[a],o=s.key.toUpperCase();if(!t.includes(o)&&o.indexOf(e.toUpperCase())>=0){r++,n[s.category]||(n[s.category]={text:s.category,children:[]});var l=n[s.category].children.length;n[s.category].children[l]={id:h("label",s.key),text:s.name}}}return n}}}}]).directive("agentSettingsDropdown",["$window","ServerBatchService","currentUser","account","features","feature_switches",function(e,t,n,r,a,s){return{restrict:"E",template:i.settingsDropdown,replace:!0,scope:{server:"=",alertPolicies:"=",loading:"="},link:function(t,i){var o,l,c=$(i[0]).simpleDropdown({triggerSelector:".trigger",contentSelector:".dropdown_content"}).simpleDropdownHandler;l=t.$watch("alertPolicies.length",function(e){e>0&&(o(),l())}),t.accountId=r.id,t.currentUser=n,t.deleting=!1,t.status={deleting:!1,updatingAlertPolicy:!1},t.features=a,t.feature_switches=s,t.alerting_url=RPM.alerting_url,t.updateAlertPolicy=function(e){e.preventDefault(),e.stopPropagation(),t.status.updatingAlertPolicy=!0,t.server.updateAlertPolicy(t.selectedPolicy.id).success(function(){t.server.alert_policy=t.selectedPolicy.id,t.status.updatingAlertPolicy=!1}).error(function(){u("update-alert-policy","There was an error trying to change "+t.server.name+"'s alert policy. Please <a href='mailto:support@newrelic.com'>contact support</a> if this error persists."),o(),t.status.updatingAlertPolicy=!1})},t.selectPolicy=function(e){t.selectedPolicy=e},t["delete"]=function(n){n.preventDefault(),n.stopPropagation(),e.confirm("This will remove all data associated with this server. Are you sure you want to delete it?")&&(t.status.deleting=!0,t.server["delete"]().success(function(){t.server.deleted=!0,t.status.deleting=!1}).error(function(){u("delete-server","There was an error trying to delete "+t.server.name+". Please <a href='mailto:support@newrelic.com'>contact support</a> if this error persists."),t.status.deleting=!1}))};var u=function(t,n){RPM.add_flash_message("error",t,n,!0,!0),e.scrollTo("top","slow"),c.close(".trigger",".dropdown_content")};o=function(){var e=t.server.links.alert_policy;t.selectedPolicy=t.alertPolicies.filter(function(t){return t.id===e})[0]}}}}]).directive("relatedAppList",function(){return{restrict:"E",template:i.relatedAppList}}).directive("nrBlurOnEnter",function(){return{restrict:"A",link:function(e,t){t.bind("keydown",function(e){13===e.which&&(t.blur(),e.preventDefault())})}}})},561:function(e,t,n){n(281),n(60);var i={barChart:n(463),rollup:n(464)};angular.module("ServerRollupsDirectives",["ServerAgentServices","rpmPagination"]).directive("barChart",function(){return{restrict:"E",scope:{rollup:"=",servers:"="},template:i.barChart,link:function(e){e.calculate_width=function(t){return server_count=e.servers.length,t/server_count*100}}}}).directive("rollup",["ServerBatchService",function(e){return{restrict:"E",template:i.rollup,scope:{label:"=",chooseLabel:"&",getServersFor:"&",appliedLabels:"="},link:function(t){t.serversVisible=!1,t.servers=e.getForIds(t.label.filteredServers.all),t.paginator={totalItems:0,loadedItems:0,visibleItems:0,itemsPerPage:10,numPages:0,currentPage:1,maxSize:10,itemType:"Servers"},t.$on("$locationChangeSuccess",function(){n()}),t.formatBreadcrumbs=function(e){for(var t=[],n=0;n<e.length;n++)t.push(e[n].name);return t.join(" | ")},t.toggleServers=function(){n(),t.serversVisible=!t.serversVisible},t.updatePaginator=function(){var e=t.servers.length;t.paginator.visibleItems=e,t.paginator.loadedItems=e,t.paginator.totalItems=e};var n=function(){t.servers=e.getForIds(t.label.filteredServers.all),t.updatePaginator()}}}}])},562:function(){angular.module("ServerFilters",[]).filter("serverSorter",["$filter",function(e){return function(t,n,i){var r=function(t,n){var i=a(t),r=[];for(var s in i)i[s]=e("orderBy")(i[s],["summary.cpu","summary.memory","name"],!n),r=n?i[s].concat(r):r.concat(i[s]);return r},a=function(e){for(var t={red:[],orange:[],green:[],unknown:[],gray:[]},n=0;n<e.length;n++){var i=e[n];"undefined"==typeof i||(health_status=i.healthStatus(),i.health_status=health_status,null==health_status&&(health_status="unknown"),t[health_status].push(i))}return t},s={cpuUsage:"summary.cpuUsage",diskio:"summary.diskio",memoryUsage:"summary.memoryUsage",fullestDisk:"summary.fullestDisk"};return"trafficLight"==n||"default"==n?r(t,i):("name"!=n&&(n=["reporting",s[n],"name"]),e("orderBy")(t,n,i))}}])},563:function(e,t,n){n(127),n(559),n(560),n(561),n(200);var i=n(20);Array.prototype.includes=function(e){for(var t=0,n=this.length;n>t;t++)if(this[t]===e)return!0;return!1},Array.prototype.intersection=function(e,t){var n,i,r,a,s,o,l=this,c=0;for(e.length>l.length&&(l=e,e=this),t||(l=l.sort(function(e,t){return e-t}),e=e.sort(function(e,t){return e-t})),i=e.length,r=l.length,n=Array(i),o=0,a=0;i>a;a++)for(s=c;r>s;s++)if(e[a]==l[s]){n[o]=e[a],o++,c=s+1;break}return n.slice(0,o)},angular.module("rpmServerSummaryTableApp",["ngResource","ui.select2","ServerAgentSummaryDirectives","ServerRollupsDirectives","ServerSummaryTableControllers"]).config(["$locationProvider",function(e){e.html5Mode({enabled:!0,requireBase:!1})}]).run(["features",function(e){e.hawthorne_integration&&i.bootstrap($("#recent-events-container")[0],{target_type:"Server"})}])},564:function(e,t,n){n(66),n(16),angular.module("ServerAlertPolicyServices",["ngResource","rpmConstants"]).factory("ServerAlertPolicy",["$resource","account",function(e,t){var n=e("/accounts/:accountId/server_alert_policies.json",{accountId:t.id},{query:{method:"GET",isArray:!0,transformResponse:function(e){for(var t=angular.fromJson(e),i=t.alert_policies.length,r=0;i>r;r++){var a=t.alert_policies[r];t.alert_policies[r]=new n(a)}return t.alert_policies}}});return n}])}}),RPM.javascript_for_page("hosts get_started",function(e){var t=function(){var n=RPM.URL("/accounts/ACCOUNT_ID/servers/get_count.json"),i=function(n){if(0==n.count)setTimeout(function(){t()},15e3);else{e(".install_step.button img.spinner").remove();var i=e(".install_step.button input");i.removeAttr("disabled"),i.removeClass("disabled_button");var r=e("<div>Active server(s) detected, head to the dashboard</div>").html();i.val(r)}};e.get(n,function(e){i(e)}).error(function(){setTimeout(function(){t()},15e3)})},n=function(){e(".install_step.button form div").prepend(RPM.SPINNER_SQUARE),t()},i=!1,r="none",a=540;if(e("h1.learn_deploy_heading").length>0){var r=e("h1.learn_deploy_heading").attr("plat");e(".install_instructions.install").height()-130>a&&e("section.taste article").css("height",e(".install_instructions.install").height()-130+"px"),e("#platform_chooser").change(function(){0==i&&(i=!0,n());var t=e("#platform_chooser").val();e.ajaxState.change("platform",t,!0,!0),e("section.install_instructions .container:visible").slideUp("fast"),e(".container."+t).slideDown("normal",function(){e("section.taste article").css("height",e(".install_instructions.install").height()-100+"px"),e("section.taste article").height()<a&&e("section.taste article").css("height",a+"px")}),r=t}),e(".platforms_table_container table tr:not(.coming-soon)").click(function(){var t=e(this).attr("platform");e("#platform_chooser").val(t).trigger("change"),e(this).parent().find("tr").removeClass("active"),e(this).addClass("active")}),e.ajaxState.register("platform",function(t){e("#platform_chooser").val(t).trigger("change"),e(".platforms_table_container table tr[platform="+t+"]").addClass("active")})}}),RPM.javascript_for_page("hosts index",function(e){var t,n=new Array;e(window).unload(function(){e("#text_filter").val()}),handle_updated_hosts_row=function(t){t.find("p.errors").length>0?t.find(".dropdown_trigger").click():(store_orig_threshold_values(t),e(document).trigger("collapseOpenDropdowns")),e("#hosts_dashboard_table").trigger("update")},handle_one_thresh_row_restore=function(t){t.find("input[type=text]").each(function(){form_id=e(this).parent().parent().parent().parent().attr("id"),e(this).val(n[form_id][e(this).attr("id")]),0==e(this).val()&&(e(this).hasClass("yellow")?e(this).val(70):e(this).val(90))})},handle_thresh_form_cancel=function(t){t.find(".threshold_inputs input[type=text]").each(function(){var t=e(this),i=t.closest("form").attr("id");t.val(n[i][t.attr("id")])}),t.find("p.errors").remove(),t.find("li.error").removeClass("error"),t.find(".has_errors").removeClass("has_errors"),e(document).trigger("collapseOpenDropdowns"),t.find(".ignore_checkbox input").each(function(){var t=e(this);t.attr("checked",!1).parent(),input_row_yel=t.parent().parent().find("input.yellow"),input_row_red=t.parent().parent().find("input.red"),""==input_row_yel.attr("value")&&""==input_row_red.attr("value")&&t.attr("checked",!0)})},store_orig_threshold_values=function(t){t.find(".threshold_inputs input[type=text]").each(function(){var t=e(this).closest("form"),i=t.attr("id");"undefined"==typeof n[i]&&(n[i]=new Array),n[i][e(this).attr("id")]=e(this).val()})},ajaxify_bulk_thresholds_form=function(){e(".hosts_filter_tab form").submit(function(t){t.stopPropagation(),t.preventDefault();var n=e(this);n.closest(".actions");RPM.disableFormButtons(n),e.post(n.attr("action"),e.param(n.serializeArray()),function(t,i){RPM.reenableFormButtons(n),"success"==i&&(save_checkbox_states(),n.find(".trigger").trigger("click"),e(document).trigger("collapseOpenDropdowns"))})})},save_checkbox_states=function(){var n=e(".thresholds_dropdown_wrapper.bulk_hosts"),i=n.find("#server_agent_alertable_setting_alerts_enabled");i.is(":visible")&&(t[0]=i.attr("checked")),n.find("fieldset .ignore_checkbox_input").each(function(n){e(this).is(":visible")&&(t[n+1]=e(this).attr("checked"))})},hide_bulk_threshold_inputs=function(){var t=e(".thresholds_dropdown_wrapper.bulk_hosts");t.removeClass("enabled"),t.removeClass("thresholdsEnabled"),t.find("fieldset:not(.buttons):not(.has_errors)").prop("disabled",!0).find("input").prop("disabled",!0),
t.find("fieldset:not(.buttons):not([disabled])").length>0&&t.addClass("enabled"),t.find("fieldset.threshold_settings:not(.buttons):not([disabled])").length>0&&t.addClass("thresholdsEnabled")},populate_bulk_thresholds_form=function(){var t=e(".thresholds_dropdown_wrapper.bulk_hosts"),n=e("#hosts_dashboard_table tbody tr.host_row:visible");t.find(".visible_hosts_number").text(n.length),update_bulk_host_ids_array()},update_bulk_host_ids_array=function(){var t=e(".thresholds_dropdown_wrapper.bulk_hosts"),n=e("#hosts_dashboard_table tbody tr.host_row:visible"),i="";n.each(function(){i+=e(this).attr("host_id")+", "}),t.find("input#host_ids_array").attr("value",i)},majority_alerts_enabled=function(){var t=e("#hosts_dashboard_table tr.host_row:visible td.app_name[alerts_enabled=true]").length,n=e("#hosts_dashboard_table tr.host_row:visible td.app_name[alerts_enabled!=true]").length;return t>=n},handle_updated_bulk_thresholds=function(){RPM.reenableFormButtons("form"),e(document).trigger("collapseOpenDropdowns");var t=e("#hidden_servers_container");if(t.find(".bulk_thresh_title").length>0)e(".thresholds_dropdown_wrapper.bulk_hosts").html(t.html()),t.html(" "),e(".hosts_filter_tab .dropdown_trigger").click(),update_bulk_host_ids_array(),ajaxify_bulk_thresholds_form(),hide_bulk_threshold_inputs(),$bulk_dropdown.find(".has_errors").removeClass("has_errors");else{var n=e(".thresholds_dropdown_wrapper.bulk_hosts"),i=!1;n.find("p.errors").length>0&&(n.find("p.errors").remove(),n.find("li.error").removeClass("error"),n.find(".has_errors").removeClass("has_errors"),i=!0),e("#hosts_dashboard_table tbody tr.host_row:visible").remove(),e("#hosts_dashboard_table tbody").prepend(t.html()),t.html(" "),e("#hosts_dashboard_table tbody tr.host_row:visible").fadeOut("slow",function(){e(this).fadeIn("fast",function(){e(this).attr("style","")})}),store_orig_threshold_values(e("body")),hide_bulk_threshold_inputs(),e("#hosts_dashboard_table").trigger("update")}},e(window).load(function(){e("#hosts_dashboard_table").on("submit",".thresholds_dropdown_wrapper form",function(t){t.stopPropagation(),t.preventDefault();var n=e(this);n.closest("tr");RPM.disableFormButtons(n,!1),e.post(n.attr("action"),e.param(n.serializeArray()),function(t,i){RPM.reenableFormButtons(n),"success"==i&&e(document).trigger("collapseOpenDropdowns")})}),e("#hosts_dashboard_table").on("change"),ajaxify_bulk_thresholds_form(),e("#primary_content").simpleDropdown({triggerSelector:".settings.actions .trigger",contentSelector:".thresholds_dropdown_wrapper"}).on("simpleDropdownOpen",".settings.actions .trigger",function(){e(".settings.actions").hasClass("alert_policy")||(form_div=e(this).siblings(".thresholds_dropdown_wrapper"),""==form_div.html()&&(form_div.html(RPM.SPINNER),id=e(this).closest("tr").attr("id").match(/host_([0-9]+)/)[1],e.get(RPM.URL("/accounts/ACCOUNT_ID/servers/ID/single_thresholds_form",{id:id}),function(t){form_div.html(t),store_orig_threshold_values(jQuery("table#hosts_dashboard_table")),form_div.find(".ignore_checkbox input").each(function(){var t=e(this);input_row_yel=t.parent().parent().find("input.yellow"),input_row_red=t.parent().parent().find("input.red"),t.is(":checked")&&(input_row_yel.val(""),input_row_red.val(""))})})))}),e("#hosts-filter-container a.settings.trigger").attr("data-manual-tip","Change thresholds for all visible servers"),RPM.tooltips.create({tip_property:"data-manual-tip"}),e("#hosts_dashboard_table").on("simpleDropdownOpen",".actions .settings.trigger",function(){RPM.tooltips.showOn(e("#hosts-filter-container .actions .trigger"))}).on("simpleDropdownClose",".actions .settings.trigger",function(){RPM.tooltips.hideOn(e("#hosts-filter-container .actions .trigger"))}),populate_bulk_thresholds_form(),t=[majority_alerts_enabled(),!1,!1,!1,!1],store_orig_threshold_values(jQuery("table#hosts_dashboard_table")),store_orig_threshold_values(jQuery(".hosts_filter_tab")),e("#primary_content").on("change",".ignore_checkbox input",function(){e(this).is(":checked")?e(this).parent().parent().find("input.yellow, input.red").attr("value",""):handle_one_thresh_row_restore(e(this).parent().parent())}),e("#primary_content").on("click",".cancel_link a",function(){handle_thresh_form_cancel(e(this).closest("form"))});var n=e(".thresholds_dropdown_wrapper.bulk_hosts");n.prev(".trigger").on("simpleDropdownOpen",hide_bulk_threshold_inputs),n.on("click",".cancel_link a",hide_bulk_threshold_inputs),n.on("click","a.bulk_row_enable_link",function(){var i=e(this).closest(".bulk_row_placeholder"),r=i.prev("fieldset"),a=parseInt(r.data("index")),s=r.find("#server_agent_alertable_setting_alerts_enabled");if(n.addClass("enabled"),r.prop("disabled",!1).find("input").prop("disabled",!1),s.length>0)s.prop("checked",t[a]);else{n.addClass("thresholdsEnabled");var o=r.find(".ignore_checkbox_input");o.prop("checked",t[a]),t[a]&&(o.parent().parent().find("input.yellow").val(""),o.parent().parent().find("input.red").val(""))}}),e(".bulk_inputs li.threshold_input").hover(function(){e("td."+e(this).attr("col_class")).css("background-color","#EEFFFF")},function(){e("td."+e(this).attr("col_class")).css("background","none")})})}),RPM.javascript_for_page("hosts list",function(e){e("input#filter_Filter").focus().textFilter({tableSelector:"#names",rowSelector:".server",cellSelector:"a"})}),RPM.javascript_for_page("processes index",function(e){e("#bar_chart_list_column").bind("afterGraphLoad",function(){e("table td:nth-child(2)",this).append(RPM.SPINNER),e("table",this).tableSort({ajaxState:!0,defaultSortOrder:{4:"desc"},columns:{0:{preferredSortOrder:"asc"},1:{preferredSortOrder:"asc"},2:{preferredSortOrder:"desc",sorter:"numericWithUnits"},3:{preferredSortOrder:"desc",sorter:"numericWithUnits"},4:{preferredSortOrder:"desc",sorter:"memoryWithUnits"}}})})}),RPM.javascript_for_page("hosts show",function(e){new RPM.HideExcessTableRows("#process_table",null,5);e("#process_table").tableSort({ajaxState:!0,columns:{0:{preferredSortOrder:"asc"},1:{preferredSortOrder:"asc"},2:{preferredSortOrder:"desc"},3:{preferredSortOrder:"desc"},4:{preferredSortOrder:"desc"}},textExtraction:function(t){var n,i=e(t),r=i.find(".sort_by");return n=r.length>0?r.text():i.text(),n.trim()}}).find("h3 a").click(function(t){return window.location=e(this).attr("href"),t.stopPropagation(),t.preventDefault(),!1})}),function(){"use strict";window.RPM=window.RPM||{},RPM.Models=RPM.Models||{},RPM.Collections=RPM.Collections||{},RPM.Models.HostModel=Backbone.Model.extend({paramRoot:"host",defaults:{short_name:null,name:null,applications:[],tags:[]},initialize:function(){this.className="server"},url:function(){return"/accounts/"+this.get("account_id")+"/servers/"+this.id},trafficLightLevel:function(){switch(this.get("status")){case"green":return 1;case"yellow":return 2;case"red":return 3;default:return 0}}}),RPM.Collections.HostCollection=Backbone.Collection.extend({model:RPM.Models.HostModel,initialize:function(){this.className="servers"},url:function(){return"/accounts/"+this.models[0].get("account_id")+"/servers"}})}(),function(){"use strict";RPM=window.RPM||{},RPM.Views=RPM.Views||{},RPM.Views.HostFilterView=Backbone.View.extend({template:"infrastructure/hosts/jst/_filter.haml",tagName:"div",events:{"keyup #text_filter":"updateFilter","change #filter-by-rule":"updateFilter","keydown #text_filter":"swallowFormSubmit"},initialize:function(e){this.$el=$(e.el),this.tableView=e.tableView,this.collection=this.tableView.collection,this.filterCollection=new Backbone.QueryCollection(this.collection.models)},render:function(){return this.$el.html(JST[this.template]({})),this.renderBulkThresholdForm(),this.renderBulkTagView(),this.setupAjaxState(),this},setupAjaxState:function(){var e=this;$.ajaxState.register("filter",function(t){e.$el.find("#text_filter").val(t).trigger("keyup")})},updateFilter:function(){var e=$("#text_filter"),t="Filter servers",n=$("#filter-by-rule").val(),i=e.val().trim(),r=null,a=i.split(" "),s=new RegExp(i,"i"),o=this.collection.models;this.filterCollection.reset(o);var l={name:{$likeI:i},short_name:{$likeI:i},applications:{$elemMatch:{name:s}},tags:{$cb:function(e){return _.all(a,function(t){return _.any(e,function(e){return e.match(new RegExp(t,"i"))})})}}};switch(n){case"name":r={name:l.name,short_name:l.short_name},t+=" by name";break;case"applications":r={applications:l.applications},t+=" by app name";break;case"tags":r={tags:l.tags},t+=" by tags";break;case"all":r={$or:l}}e.attr("placeholder",t),r&&(o=this.filterCollection.query(r),this.filterCollection.reset(o)),this.tableView.updateShown(o),$.ajaxState.change("filter",i,!0,!0);var c=this.filterCollection.map(function(e){return e.id});this.$el.find("input#host_ids_array").val(c.join(", ")),this.$el.find("span.visible_hosts_number").text(c.length)},renderBulkThresholdForm:function(){this.$el.find("#bulk-threshold-container").html($("#bulk-threshold-form").html())},renderBulkTagView:function(){this.bulkTagView=this.bulkTagView||new RPM.Views.BulkTagView({collection:this.filterCollection,el:"#bulk-tagging-container > .tagging.actions",className:"servers",url:this.collection.url()+"/batch_tag.json"}),this.bulkTagView.render()},swallowFormSubmit:function(e){return 13===e.keyCode?(e.preventDefault(),e.stopPropagation(),!1):void 0}})}(),function(){"use strict";RPM=window.RPM||{},RPM.Views=RPM.Views||{},RPM.Views.HostGridItemView=Backbone.View.extend({template:"infrastructure/hosts/jst/_grid_item.haml",tagName:"div",events:{"click a.delete_link":"destroy"},initialize:function(){this.helper=new Backbone.ViewHelper(this.$el)},render:function(){var e=$.extend(this.model.toJSON(),{url:this.model.url(),application_ids:_.map(this.model.get("applications"),function(e){return e.id}),traffic_light_level:this.model.trafficLightLevel()}),t=this;return this.$el.html(JST[this.template](e)),this.$el.attr("class","host_row"),this.$el.attr("host_id",this.model.id),this.$el.attr("id","host_"+this.model.id),this.model.get("applications").length>0&&this.$el.find(".related_apps_links").html(this.helper.relatedAppLinks(this.model,2)),this.renderTagView(),this.$el.click(function(){t.expandItem(this)}),this},hide:function(){this.$el.addClass("hidden")},show:function(){this.$el.removeClass("hidden")},destroy:function(e){var t=this;e.preventDefault(),e.stopPropagation(),confirm("This will remove all data associated with this server. Are you sure you want to delete it?")&&($(e.target).replaceWith(RPM.SPINNER),$.post(this.model.url(),{_method:"delete",format:"json"}).done(function(){t.remove()}))},expandItem:function(e){var t=$(e).find(".grid_item_box"),n=t.find(".details");t.hasClass("expanded")?(t.removeClass("expanded"),n.addClass("hidden")):($(".grid_item_box").removeClass("expanded"),$(".details").addClass("hidden"),t.addClass("expanded"),n.removeClass("hidden"))},renderTagView:function(){this.tagView=new RPM.Views.TagView({el:this.$el.find(".tagging.actions"),collection:this.model.get("tags"),model:this.model,lazy:!0}),this.tagView.render()}})}(),function(){"use strict";RPM=window.RPM||{},RPM.Views=RPM.Views||{},RPM.Views.HostIndexView=Backbone.View.extend({tagName:"div",initialize:function(e){this.$el=$(e.el),this.with_grid_view=e.with_grid_view},render:function(){return this.renderTable(),this.renderFilter(),this},renderTable:function(){this.tableView=new RPM.Views.HostTableView({collection:this.collection,el:"#hosts-table-container",with_grid_view:this.with_grid_view}),this.tableView.render()},renderFilter:function(){this.filterView=new RPM.Views.HostFilterView({tableView:this.tableView,el:"#hosts-filter-container"}),this.filterView.render()}})}(),function(){"use strict";RPM=window.RPM||{},RPM.Views=RPM.Views||{},RPM.Views.HostRowView=Backbone.View.extend({template:"infrastructure/hosts/jst/_row.haml",tagName:"tr",events:{"click a.delete_link":"destroy"},initialize:function(){this.helper=new Backbone.ViewHelper(this.$el)},render:function(){var e=$.extend(this.model.toJSON(),{url:this.model.url(),application_ids:_.map(this.model.get("applications"),function(e){return e.id}),traffic_light_level:this.model.trafficLightLevel()});return this.$el.html(JST[this.template](e)),this.$el.attr("class","host_row"),this.$el.attr("host_id",this.model.id),this.$el.attr("id","host_"+this.model.id),this.model.get("applications").length>0&&this.$el.find(".related_apps_links").html(this.helper.relatedAppLinks(this.model,2)),this.renderTagView(),$("#hosts-table-container[data-use-alert-policies]").length>0&&this.bindLoadAlertPolicy(),this},bindLoadAlertPolicy:function(){var e=$(this.el).find(".actions");e.on("click",$.proxy(this,"alertPolicyForm"))},alertPolicyForm:function(){var e=this,t=$(this.el).find(".server_alert_policy"),n=RPM.URL("/accounts/ACCOUNT_ID/servers/ID/alert_policy_form",{id:this.model.id});t.hasClass("loaded")||$.get(n).done(function(e){$(e).find("form");t.html(e),t.addClass("loaded")}).always(function(){e.bindPolicyForm(t)})},bindPolicyForm:function(e){var t=e.find("form");t.on("submit",function(e){var n=$(e.target),i=n.attr("action");e.preventDefault(),e.stopPropagation(),RPM.disableFormButtons($(this),!1),$.ajax({url:i,type:"put",data:t.serialize(),global:!1}).done(function(){$(document).trigger("collapseOpenDropdowns"),RPM.add_flash_message("success","policy-change-success","The servers's alert policy has been changed.")}).fail(function(){RPM.add_flash_message("error","policy-change-error","There was an error trying to change the servers's alert policy. Please <a href='mailto:support@newrelic.com'>contact support</a> if this error persists.")}).always(function(){RPM.reenableFormButtons(t)})})},hide:function(){this.$el.addClass("hidden")},show:function(){this.$el.removeClass("hidden")},destroy:function(e){var t=this;e.preventDefault(),e.stopPropagation(),confirm("This will remove all data associated with this server. Are you sure you want to delete it?")&&($(e.target).replaceWith(RPM.SPINNER),$.post(this.model.url(),{_method:"delete",format:"json"}).done(function(){t.remove()}))},renderTagView:function(){this.tagView=new RPM.Views.TagView({el:this.$el.find(".tagging.actions"),collection:this.model.get("tags"),model:this.model,lazy:!0}),this.tagView.render()}})}(),function(){"use strict";RPM=window.RPM||{},RPM.Views=RPM.Views||{},RPM.Views.HostTableView=Backbone.View.extend({template:"infrastructure/hosts/jst/_table.haml",tagName:"div",targetTag:"tbody",events:{"click .tags.trigger":"lazySetupTaggingInput"},initialize:function(e){this.collection=e.collection,this.rowViews=[],this.$el=$(e.el),"undefined"!=typeof e.with_grid_view&&e.with_grid_view===!0?(this.with_grid_view=!0,this.template="infrastructure/hosts/jst/_grid.haml",this.targetTag="div.servers_grid"):this.with_grid_view=!1},render:function(){return this.$el.html(JST[this.template]()),this.addAll(),this.setupTaggingDropdowns(),this.setupEditInPlace(),this.enableSorting(),this},addAll:function(){this.$(this.targetTag).empty();var e=this;this.collection.each(function(t){e.addOne(t)})},addOne:function(e){var t;t=this.with_grid_view?new RPM.Views.HostGridItemView({model:e}):new RPM.Views.HostRowView({model:e}),this.rowViews.push(t),this.$el.find(this.targetTag).append(t.render().el)},updateShown:function(e){var t=_.groupBy(this.rowViews,function(t){return _.contains(e,t.model)});$.each(t,function(e){_.each(t[e],function(t){"true"===e?t.show():t.hide()})})},enableSorting:function(){this.$el.find("table").tableSort({textExtraction:this.useTextFromLink,ajaxState:!0,columns:{0:{preferredSortOrder:"desc",sorter:"trafficLightLevel"},1:{preferredSortOrder:"asc"},2:{preferredSortOrder:"desc",sorter:"numericWithUnits"},3:{preferredSortOrder:"desc",sorter:"numericWithUnits"},4:{preferredSortOrder:"desc",sorter:"numericWithUnits"},5:{preferredSortOrder:"desc",sorter:"numericWithUnits"}}}).find("th a").click(function(e){return window.location=$(this).attr("href"),e.stopPropagation(),e.preventDefault(),!1})},useTextFromLink:function(e){var t=$(e),n=t.find("a").eq(0);return t.is(":first-child")?t.html():$(e).is(":last-child")?"":n.length>0?n.text():t.text()},setupTaggingDropdowns:function(){this.$el.simpleDropdown({triggerSelector:".tags.trigger",contentSelector:"div.tags-dropdown-wrapper"})},setupEditInPlace:function(){$(".host_row .edit_in_place").rpm_edit_in_place({success:function(){RPM.remove_flash_message("edit-in-place-error")},error:function(e){var t="";$.each(e,function(e,n){var i=String(e).replace(/(?:^|\s)\S/g,function(e){return e.toUpperCase()});$.each(n,function(e,n){t+=i+" "+n})}),RPM.add_flash_message("error","edit-in-place-error",t)}})},lazySetupTaggingInput:function(e){var t=$(e.target).closest(".tagging.actions").find("ul.tag-input"),n=_.find(this.rowViews,function(e){return $.contains(e.$el[0],t[0])});void 0===t.data("tagit")&&n.tagView.setupTagInput(),n.tagView.focusInput()}})}(),function(){window.JST=window.JST||{},window.JST["applications/jst/_filter.haml"]=Haml(".hosts_filter_tab.hosts_filter_bar.filterer\n  %form#filter-form.small.horizontal.formtastic.single_field.search\n    %select#filter-by-rule\n      %option{ value: 'all' } by all\n      %option{ value: 'name' } by name\n      %option{ value: 'tags' } by tags\n    %input#text_filter{ placeholder: 'Filter applications', type: 'search' }\n\n  #bulk-tagging-container\n    .tagging.actions\n"),window.JST["applications/jst/_row.haml"]=Haml("%td.app_traffic_light\n  %a.traffic_light{ href: url, alt: status_text, data-tip-position: 'right', data-tip: status_tooltip, class: status + (has_availability_data ? ' with_availability' : '') }\n%td.app_name\n  %a{ href: url, data-tip-position: 'right', data-tip: summary_label }= Haml.html_escape(name)\n  .tagging.actions\n\n  :if is_down\n    %p.availability\n      %a{ href: url + '/downtime/' + last_downtime_event_id, title: downtime_event_summary_text } Application down!\n:if no_data\n  %td.no_data{ colspan: (client_data ? 5 : 3) }\n    %p\n      No data reporting for this application &mdash;\n      :if RPM.has_admin_on_account\n        %a.delete_link.to_spinner{ href: '#' } delete\n        = ' or '\n      %a{ href: \"http://docs.newrelic.com/docs/general/i-am-not-seeing-any-data\", title: \"I am not seeing any data / Troubleshooting / FAQs - New Relic Support\" } troubleshoot\n:else\n  :if client_data\n    %td.end_user.numeric\n      :if has_clientside_data\n        %a{ href: browser_url, class: metrics['end_user']['status'] }\n          = metrics['end_user']['value']\n          %span.unit= metrics['end_user']['unit']\n    %td.page_views.numeric\n      :if has_clientside_data\n          %a{ href: browser_url }\n            = metrics['page_views']['value']\n            %span.unit= metrics['page_views']['unit']\n  %td.app_server.numeric\n    :if metrics['app_server']['value'] == 0\n      %a{ href: url, class: metrics['other_response']['status'] }\n        = metrics['other_response']['value']\n        %span.unit= metrics['other_response']['unit']\n    :else\n      %a{ href: url, class: metrics['app_server']['status'] }\n        = metrics['app_server']['value']\n        %span.unit= metrics['app_server']['unit']\n  %td.throughput.numeric\n    %a{ href: url }\n      = metrics['throughput']['value']\n      %span.unit= metrics['throughput']['unit']\n  %td.error_rate.numeric\n    %a{ href: url + '/traced_errors', class: metrics['error_rate']['status'] }\n      = metrics['error_rate']['value']\n      %span.unit= metrics['error_rate']['unit']\n\n%td.actions{class: (use_alert_policies ? 'alert_policy' : '')}\n  .dropdown_wrapper\n    %a.trigger.dropdown_trigger.icon.settings{ href: 'javascript:void(0)' }\n    %ul.dropdown_content{ style: 'display: none' }\n      :if RPM.is_not_restricted_user\n        :if use_alert_policies\n          = // \"Don't remove edit class from this li. 'Change table' mode uses it\"\n          %li.application_alert_policy.edit\n            .icon.busy.center\n        %li.edit\n          %a.icon.pencil{ href: url + '/edit' } Change settings\n        :if !use_alert_policies\n          %li.edit\n            %a.icon.pencil{ href: url + '/edit_alerts' } Change alerting thresholds\n      :if RPM.registered_user\n        :if RPM.user_has_account_view\n          :if is_hidden\n            %li\n              %a.icon.unhide.toggle_hide_link{ href: '#' } Unhide app\n          :else\n            %li\n              %a.icon.hide.toggle_hide_link{ href: '#' } Hide app\n        :else\n          %li\n            %span.icon.hide.disabled{ data-tip: 'Even though you have access to this account, you must be listed as a user in order to hide apps. Please <a href=\"' + RPM.URL('/accounts/ACCOUNT_ID') + '\">contact the account owner</a> to be added as a user.', data-tooltip-position: 'right' } Hide app\n      :if no_data && RPM.has_admin_on_account\n        %li\n          %a.icon.delete.delete_link{ href: '#' } Delete app\n"),window.JST["applications/jst/_table.haml"]=Haml("%table#apptable.span-8.disrespect_visited.tr_hover_links.with_filterer.tablesorter{ cellspacing: '0' }\n  %thead\n    %tr.column_names\n      %th\n      %th Name\n\n      :if client_data\n        %th.numeric.end_user\n          Browser\n          %span.unit (s)\n        %th.numeric.page_views.justify_left\n          Page views\n          %span.unit (ppm)\n      %th.numeric.app_server\n        App server\n        %span.unit (ms)\n      %th.numeric.throughput\n        Throughput\n        %span.unit (rpm)\n        %span.help.icon.standalone{ data-tip: \"Requests per minute (rpm)\" }\n      %th.numeric.error_rate Error %\n      %th.actions\n\n  %tbody\n    :if applications.length === 0\n      %tr\n        %td{ colspan: (client_data ? 8 : 6) }\n          No apps found\n  %tfoot{ style: (hidden_applications_count > 0 ? '' : 'display: none;') }\n    %tr\n      %td{ colspan: (client_data ? 8 : 6) }\n        %ul.action_bar.clearfix\n          %li\n            %a.icon.pencil.toggle-edit-mode{ href: '#', data-tip: 'Enter edit mode, where you can easily hide/unhide many applications at once' } Change table\n          :if !client_data && applications.length > 0\n            %li\n              %a{ href: enduser_overview_url } Configure real user monitoring\n          :if RPM.registered_user\n            %li.right\n              %a.toggle-hidden{ href: '#' }\n                Show #{hidden_applications_count} hidden application#{hidden_applications_count === 1 ? '' : 's'}\n\n\n"),window.JST["infrastructure/hosts/jst/_filter.haml"]=Haml(".hosts_filter_tab.hosts_filter_bar.filterer\n  %form#filter-form.small.horizontal.formtastic.single_field.search\n    %select#filter-by-rule\n      %option{ value: 'all' } by all\n      %option{ value: 'name' } by name\n      %option{ value: 'applications' } by app name\n      %option{ value: 'tags' } by tags\n    %input#text_filter{ placeholder: 'Filter servers', type: 'search' }\n  #bulk-threshold-container\n\n  #bulk-tagging-container\n    .tagging.actions\n"),window.JST["infrastructure/hosts/jst/_grid.haml"]=Haml(":javascript\n  if (typeof($.ajaxState.states.mini) == \"undefined\") {\n    $.ajaxState.register('mini',function(){},'false');\n  } else {\n    $.ajaxState.register('mini',function(){}, $.ajaxState.states.mini.info);\n  }\n%div#hosts_dashboard_table\n  %a.mini_toggle{onClick: \"if ($('.grid_item_box').hasClass('mini')){$('.grid_item_box').removeClass('mini'); $.ajaxState.change('mini', 'false', true, true);} else {$('.grid_item_box').addClass('mini'); $.ajaxState.change('mini', 'true', true, true);}\"}\n    Mini toggle\n  %div.servers_grid\n\n"),window.JST["infrastructure/hosts/jst/_grid_item.haml"]=Haml("- var data_tip = \"\";\n- var mini_class = \"\";\n- if ((typeof($.ajaxState.states.mini) != \"undefined\") && ($.ajaxState.states.mini.info == \"true\")) {\n- mini_class = \"mini\"\n- }\n- if (reporting) {\n- data_tip = \"<strong>\" +short_name + \"</strong><br /><br />\" + metrics['cpu']['value'] + \"% CPU Utilization<br />\" + metrics['memory']['value'] + \"% Memory Utilization. \" + metrics['memory']['used'] + \"/\" + metrics['memory']['total'] + \"<br />\" + metrics['disk_io']['value'] + \"% Disk I/O Utilization<br />\" + metrics['fullest_disk']['value'] + \"% used fullest Disk, \" + metrics['fullest_disk']['free'] + \" free\"\n- }\n%div.grid_item_box.clearfix{class: \"#{status} #{mini_class}\", app-ids: application_ids, data-tip: data_tip}\n  :if reporting\n    %div.details.hidden\n      %a.server{ href: url, class: \"#{status}\", app-ids: application_ids, title: html_escape(name)}\n        .edit_in_place.subdued{data-allow_blank:\"true\", data-activator:\"#activate_\"+id, data-attribute:\"name\", data-formcontent:\"No data\", data-type:\"input\", data-url: RPM.URL('/accounts/ACCOUNT_ID/servers/SERVER_ID/update_name.json', {SERVER_ID: id}), data-sanitize:\"false\", data-html-attrs:'{\"maxlength\":32}'}\n          &= short_name\n          &nbsp;&raquo;\n    \n    %div.metrics_bar_chart\n      \n      %div.metric_bar.cpu{class:  metrics['cpu']['status'], style: \"width: #{metrics['cpu']['value']}%\"}\n      %span.bar_text\n        = \"#{metrics['cpu']['value']}% CPU\"\n      \n      %div.metric_bar{class: metrics['memory']['status'], style: \"width: #{metrics['memory']['value']}%\"}\n      %span.bar_text\n        = \"#{metrics['memory']['value']}% Memory\"\n      \n      %div.metric_bar{class: metrics['disk_io']['status'], style: \"width: #{metrics['disk_io']['value']}%\"}\n      %span.bar_text\n        = \"#{metrics['disk_io']['value']}% Disk I/O\"\n      \n      %div.metric_bar{class: metrics['fullest_disk']['status'], style: \"width: #{metrics['fullest_disk']['value']}%\"}\n      %span.bar_text\n        = \"#{metrics['fullest_disk']['value']}% Fullest Disk\"\n            \n  :else\n    %div.details N/A"),window.JST["infrastructure/hosts/jst/_row.haml"]=Haml("%td.host_status{ data-traffic_light_level: traffic_light_level }\n  %a{ href: url, class: \"traffic_light #{status}\", data-tip-position: 'right'}\n%td.app_name{ alerts_enabled: alertable_settings }\n  :if reporting && out_of_date\n    %a{ href: 'https://docs.newrelic.com/docs/server-monitoring/upgrading-the-server-monitor', target: '_new', data-tip-position: 'right', data-tip: \"This server's agent (version: #{agent_version}) is out of date. Click this icon to continue to upgrade instructions.\" }\n      %img{ src: '/images/v4/icon-alert-caution-small.png' }\n\n  %a.server{ href: url, app-ids: application_ids, title: html_escape(name)}\n    .edit_in_place.subdued{data-allow_blank:\"true\", data-activator:\"#activate_\"+id, data-attribute:\"name\", data-formcontent:\"No data\", data-type:\"input\", data-url: RPM.URL('/accounts/ACCOUNT_ID/servers/SERVER_ID/update_name.json', {SERVER_ID: id}), data-sanitize:\"false\", data-html-attrs:'{\"maxlength\":32}'}\n      &= short_name\n  .renaming.actions\n    .container\n      .icon.rename.trigger{ id: \"activate_\"+id}\n  .tagging.actions\n  :if (applications.length > 0)\n    %span.related_apps_links.small.deemphasize_value\n:if reporting\n  %td.cpu_col.numeric\n    %a{ href: url + \"/processes#sort_by%3Dcpu\", class: metrics['cpu']['status'] }\n      = metrics['cpu']['value']\n      %span.unit= metrics['cpu']['unit']\n    :if metrics['cpu']['stolen'] > 0\n      %span.small.deemphasize_value\n        #{metrics['cpu']['stolen']}% stolen\n  %td.io_col.numeric\n    %a{ href: url + \"/disks\", class: metrics['disk_io']['status'] }\n      = metrics['disk_io']['value']\n      %span.unit= metrics['disk_io']['unit']\n  %td.mem_col.numeric\n    %a{ href: url + \"/processes#sort_by%3Dmemory\", class: metrics['memory']['status'] }\n      :if metrics['memory']['value']\n        = metrics['memory']['value']\n        %span.unit= metrics['memory']['unit']\n      :else\n        %span.deemphasize_value ???\n    %span.small.deemphasize_value\n      #{metrics['memory']['used']} / #{metrics['memory']['total']}\n  %td.full_disk_col.numeric\n    %a{ href: url + \"/disks?drill_to=fullest\", class: metrics['fullest_disk']['status'] }\n      :if metrics['fullest_disk']['value']\n        = metrics['fullest_disk']['value']\n        %span.unit= metrics['fullest_disk']['unit']\n      :else\n        %span.deemphasize_value ???\n    %span.small.deemphasize_value\n      #{metrics['fullest_disk']['free']} free\n  %td.settings.actions{class: (use_alert_policies ? 'alert_policy' : '')}\n    .container.dropdown_wrapper\n      %a.icon.settings.trigger.dropdown_trigger{ href: '#' }\n      .thresholds_dropdown_wrapper.dropdown_content\n        :if use_alert_policies\n          .server_alert_policy\n            .icon.busy.center\n:else\n  :if fresh_agent\n    %td.no_data{ colspan: 4 }\n      %p\n        %nobr Waiting for initial data\n  :else\n    %td.no_data{ colspan: 4}\n      %p\n        %nobr No data reporting for this server\n        :if RPM.has_admin_on_account\n          &nbsp;&mdash;&nbsp;\n          %nobr\n            %a.delete_link.to_spinner{ href: '#' } delete\n  :if use_alert_policies\n    %td.settings.actions{class: (use_alert_policies ? 'alert_policy' : '')}\n      .container.dropdown_wrapper\n        %a.icon.settings.trigger.dropdown_trigger{ href: '#' }\n        .thresholds_dropdown_wrapper.dropdown_content\n          :if use_alert_policies\n            .server_alert_policy\n              .icon.busy.center\n"),window.JST["infrastructure/hosts/jst/_table.haml"]=Haml("%table#hosts_dashboard_table.span-8.disrespect_visited.with_filterer.tablesorter.full_height_cells\n  %thead\n    %tr.column_names\n      %th.header.traffic_light\n      %th.textual.header Name\n      %th.numeric.header.cpu CPU\n      %th.numeric.header.dio Disk IO\n      %th.numeric.header.memory Memory\n      %th.numeric.header.disk_full Fullest&nbsp;disk\n      %th\n\n  %tbody\n"),window.JST["jst/example.haml"]=Haml("\n\n.example\n  this is an example haml.jst file, any file with the .jst extension will be loaded by Jammit\n  it will also be processed as haml, and be availible as JST['jst/example.haml']() in javascript\n\n"),window.JST["metrics/jst/_breakdowns.haml"]=Haml(":each breakdown in breakdowns\n  %tr\n    %td.countCell\n      %span.count\n        = breakdown.count\n    %td\n      %span.unmatched_segment\n        = breakdown.segment\n"),window.JST["metrics/jst/_metrics.haml"]=Haml(":each metric in metrics\n  %tr\n    %td\n      %span.matched\n        &= metric.matched\n      %span.unmatched_segment\n        &= metric.segment\n      %span.unmatched\n        &= metric.remainder\n    %td\n      %span\n        &= metric.replacement\n"),window.JST["named_transactions/jst/_edit.haml"]=Haml(':if !use_alert_policies || RPM.features.alerts_integration\n  %h3.alert_form_title Transaction settings\n:if use_alert_policies && !RPM.features.alerts_integration\n  .key_transaction_alert_policy\n    .icon.busy.center\n\n%form.formtastic.kt_form.kt_edit{action:"", method:"post"}\n  %input#named_transaction_id{name:"id", type:"hidden", value:id}\n\n  %fieldset.inputs\n    %ol\n      %li.field\n        %label{for:"named_transaction_name"} Name\n        %input.name{maxlength:"255", name:"name", size:"40", type:"text", value:name}\n\n  :if (supports_alerting)\n    %h3 Apdex T\n    .threshold-settings\n\n  :if userCapabilities.canManageKeyTransactions\n    %hr\n    %button.update_nt{type:"submit"} Save\n  :if userCapabilities.canDeleteKeyTransactions\n    %span.or{style: \'padding-left:5px;\'} or\n    %a.hide.icon.delete-kt{href:\'#key_transaction/\' + id + \'/delete\', style:\'line-height:35px;\'} Stop Tracking\n'),window.JST["named_transactions/jst/_filter.haml"]=Haml(".hosts_filter_tab.hosts_filter_bar.filterer\n  %form#filter-form.small.horizontal.formtastic.single_field.search\n    %select#filter-by-rule\n      %option{ value: 'all' } by all\n      %option{ value: 'name' } by name\n      %option{ value: 'app name' } by app name\n      %option{ value: 'tags' } by tags\n    %input#text_filter{ placeholder: 'Filter key transactions', type: 'search' }\n\n  #bulk-tagging-container\n    .tagging.actions\n"),window.JST["named_transactions/jst/_index.haml"]=Haml("  .span-9.key_transactions\n    %header.section.no_bottom_border.no_bottom_margin\n      :if userCapabilities.canManageKeyTransactions || RPM.features.apm_ui_rbac && RPM.is_not_restricted_user\n        .actions\n          %a.button.create{ href: \"#key_transactions/new\" } Add more\n      #nt-filter-container\n      %h1 Key Transactions\n\n    .section#trans-table\n      %table.disrespect_visited.tablesorter.tr_hover_links.with_filterer#named_transactions_dashboard_table\n        %thead\n          %tr.column_names\n            %th.status\n            %th.name Name\n\n            %th.numeric.col-end-user End user\n            %th.numeric App server\n            %th.numeric\n              Call count\n            %th.numeric Error %\n            :if userCapabilities.canManageKeyTransactions\n              %th{colstyle:'width:40px;'}\n        %tbody.row-container\n          %tr\n            %td.loading-indicator{colspan:9}\n              Loading Key Transactions...\n\n      :if RPM.features.alerts_integration\n        %script\n          $(function() {\n            var $doc = $(document);\n            var tooltipClass = '.interactive-tooltip';\n\n            function hideTooltips () {\n              $doc.find(tooltipClass).hide();\n            }\n\n            $doc.on ('mouseleave.kt_tooltips', tooltipClass, hideTooltips);\n            $doc.on ('click.kt_tooltips', hideTooltips);\n            $doc.on ('mouseenter.kt_tooltips', 'a.traffic_light',\n              function () {\n                hideTooltips();\n                $(this).siblings(tooltipClass).show();\n              }\n            );\n          });\n"),
window.JST["named_transactions/jst/_new.haml"]=Haml('\n.span-12.create_named_transaction_container\n  .new\n    .span-8\n      #named_transactions_create.dashboard\n        %h1 Track a Key Transaction\n\n        %form.formtastic.kt_form.kt_create{action:\'\', method:"post"}\n          %input#dashboard{name:"dashboard", type:"hidden", value:"true"}\n\n          %fieldset.inputs\n            %ol\n              :if !prepopulated\n                %li#named_transaction_application_name_input.string.field\n                  %label Select an application\n                  %input#named_transaction_application_name.busy{name:\'application_name\', placeholder:"Loading Applications...", size:"40", style:"z-index:20000", disabled:\'disabled\', value:application_name, type:"text"}\n\n                :if application_id\n                  %li#named_transaction_transaction_name_input.string.field\n                    %label Select a transaction\n                    %input#named_transaction_transaction_name.busy.web_transaction_id{data-validation_label:"Transaction", name:\'transaction_name\', placeholder:"Loading Transactions...", size:"40", style:"z-index:20000", disabled:\'disabled\', type:"text", value:transaction_name}\n\n              :if transaction_id && application_id\n                %li#named_transaction_name_input.string.field\n                  %label Create a custom name for this transaction\n                  %input#named_transaction_name{name:"name", value:transaction_name, size:"40", type:"text"}\n\n          :if !use_alert_policies\n            %fieldset.inputs#suggested_settings\n              :if transaction_id && application_id && suggestion === null\n                %span#loading_settings\n                  Loading Settings...\n\n              :if suggestion !== null\n                :if !suggestion.supports_alerting\n                  #not_supported\n                    .help_panel\n                      %h3\n                        Your\n                        = " " + suggestion.language + " "\n                        Agent does not support alerting\n\n                      %p\n                        Your current\n                        = " " + suggestion.language + " "\n                        agent does not support custom alerting settings for Key Transactions. You can still create and use the transaction, but it will not have custom alerting thresholds.\n\n                        :if suggestion.could_support_alerting\n                          = " If you upgrade to the newest version of the " + suggestion.language + " agent, you can set custom alerting settings for this key transaction. Please consider updating!"\n\n                        :if !suggestion.could_support_alerting\n                          = " We\'re hard at work on adding support for " + suggestion.language + "."\n\n                :if suggestion.supports_alerting\n                  #supported\n                    / .help_panel\n                    %h3 Suggested Apdex T Thresholds\n                    %p We have determined default values based on historical performance. Raising these thresholds will cause a lower Apdex Score which may result in more Apdex alerts.\n                    #suggested_settings_form\n\n          %fieldset.buttons\n            %ol\n              %li.commit\n                - if (suggestion == null) {\n                %button#create_button.submit{disabled:"disabled", type:"submit"} Track Key Transaction\n                - } else {\n                %button#create_button.submit{type:"submit"} Track Key Transaction\n                - }\n\n    .span-4.last\n      .side-promo\n        %h3\n          %span What are Key Transactions?\n        %p In web applications, some web transactions are more important to the business than others, and should be monitored with precision. They include key business events in your application (such as sign ups or purchase confirmation) and/or transactions that are particularly important from a performance perspective (such as search or login).\n        %p Key Transactions let you closely monitor these important key business transactions and receive alerts when they are performing poorly.\n\n  .saved.start_hidden\n    %h1 Your key transaction has been created\n    %a.button.kt_link{href: \'\'}\n      View new key transaction\n    %a.button.policy_link{href: RPM.URL(\'/accounts/ACCOUNT_ID/key_transaction_alert_policies?policy_id=default\')}\n      Edit key transaction alert policy\n\n\n'),window.JST["named_transactions/jst/_row.haml"]=Haml("- url = RPM.URL('/accounts/ACCOUNT_ID/key_transactions/NAMED_TRANSACTION_ID', {NAMED_TRANSACTION_ID: id})\n%td.status{data-traffic_light_level:presenter.traffic_light_level}\n  :if RPM.features.alerts_integration\n    %a{href: url, class: \"traffic_light #{presenter.traffic_light_color}\"} &nbsp;\n      :if presenter.traffic_light_color == 'unknown' || presenter.traffic_light_color == 'unavailable'\n        .unknown-indicator ?\n    .health-status-tooltip.interactive-tooltip\n      .tooltip-container{class: presenter.traffic_light_color}\n        :if presenter.traffic_light_color == 'unavailable'\n          .content\n            .body\n              .alerting-service-outage\n                %h3 (\u256f\xb0\u25a1\xb0\uff09\u256f\ufe35 \u253b\u2501\u2501\u253b)\n                %span Status temporarily unavailable. If the problem persists, please&nbsp;\n                %a{ href: 'https://support.newrelic.com/', target: '_blank' } contact support.\n        :else\n          .content\n            .header\n              .title\n                %h3= Haml.html_escape(name)\n              :if presenter.targeted && presenter.reporting\n                .right.violation-counts\n                  :if presenter.critical_violations_count > 0\n                    .column.critical\n                      %i.icon-nr-critical\n                      %span.number= presenter.critical_violations_count\n                      .light.small.uppercase Critical\n                  :else\n                    .column\n                        %i.icon-nr-critical\n                        %span.number 0\n                        .light.small.uppercase Critical\n                  :if presenter.warning_violations_count > 0\n                    .column.warning\n                      %i.icon-nr-warning\n                      %span.number= presenter.warning_violations_count\n                      .light.small.uppercase Warning\n                  :else\n                    .column\n                      %i.icon-nr-warning\n                      %span.number 0\n                      .light.small.uppercase Warning\n            .body\n              :if !presenter.reporting\n                .not-reporting\n                  %span No data being reported.\n              :if !presenter.targeted\n                .no-hawthorne-policy\n                  %span Not being targeted by any alert conditions.\n              :if presenter.reporting && presenter.targeted && presenter.any_violations\n                .problems\n                  %span.uppercase.light.small Most Recent\n                  .container\n                    %span= presenter.recent_violation['label']\n                    .details.small\n                      .column{class: presenter.recent_violation['severity']}\n                        %i{class: \"icon-nr-#{presenter.recent_violation['severity']}\"}\n                        %span.light= \" #{ (presenter.recent_violation['severity'] || 'unknown').charAt(0).toUpperCase() + (presenter.recent_violation['severity'] || 'unknown').slice(1) } violation\"\n                      .column.right\n                        %span= presenter.recent_violation['formatted_opened_at']\n          .footer\n            .content\n              :if presenter.targeted\n                .column.right\n                  %a.view-link{href: presenter.violations_link} View all violations\n\n  :else\n    %a{href: url, alt: presenter.traffic_light_text, data-tip: presenter.traffic_light_tooltip, data-tip-position: 'right', class: \"traffic_light #{presenter.traffic_light_color} #{presenter.traffic_light_class}\"}= presenter.traffic_light_tooltip\n\n:if has_web_transaction\n  %td.app_name\n    %a{href:url, data-tip:Haml.html_escape(presenter.transaction_name), data-tip-position:\"right\"}= Haml.html_escape(name).wordWrap(50)\n    .tagging.actions\n\n    %span.related_apps_links.small.deemphasize_value\n      %a{href:RPM.URL('/accounts/ACCOUNT_ID/applications/APPLICATION_ID', {APPLICATION_ID:application_id})}=presenter.application_name.wordWrap(110)\n\n  %td.numeric.col-end-user\n    %a{href:url}=presenter.end_user_response_time\n\n  %td.numeric\n    %a{href:url}=presenter.app_response_time\n  %td.numeric\n    %span.sort_by=presenter.unformatted_call_count\n    %a{href:url}\n      =presenter.call_count\n      %span.unit\n        = \" calls\"\n    %span.small.deemphasize_value{href:url, style:'cursor:pointer;'}\n      =presenter.app_throughput\n\n  %td.numeric\n    %a{href:RPM.URL('/accounts/ACCOUNT_ID/applications/APPLICATION_ID/traced_errors?search%5Bname%5D=' + encodeURI(presenter.transaction_name) + '&amp;search%5Btype%5D=all', {APPLICATION_ID:application_id})}\n      = presenter.error_rate\n  :if userCapabilities.canManageKeyTransactions\n    %td.actions{id:'edit-for-' + id, class: (use_alert_policies ? 'alert_policy key_transaction' : '')}\n      .dropdown_wrapper\n        %a.icon.settings.trigger.dropdown_trigger{ href: 'javascript:void(0)' }\n        .dropdown_content\n          .settings_form_container\n\n:else\n  %td.app_name\n    .disabled{style:\"font-size: 16px; padding: 4px 0;\"}\n      = Haml.html_escape(name).wordWrap(50)\n    %span.related_apps_links.small.deemphasize_value\n      %a{href:RPM.URL('/accounts/ACCOUNT_ID/applications/APPLICATION_ID', {APPLICATION_ID:application_id})}\n      =presenter.application_name.truncate(110)\n  %td.no_data{colspan:5}\n    %p\n      No activity on this key transaction.\n      %a{href:'#key_transaction/' + id + '/delete'} Stop tracking\n"),window.JST["named_transactions/jst/_settings.haml"]=Haml('\n%fieldset\n  :if supports_alerting\n    %ol.named_transaction_settings\n      %li.field.setting\n\n        %label.with-help\n          App\n          %span.icon-help{data-tip:"Your transaction\'s Apdex T-value is set to " + apdex_t + " seconds. That means end user requests responding in less than " + apdex_t + " seconds to the end user are satisfying (s), responding between " + apdex_t + " seconds and " + (apdex_t*4).toPrecision(2) + " seconds are tolerating (t), and responding in more than " + (apdex_t*4).toPrecision(2) + " seconds are frustrating (f)."}\n\n        %input.apdex_t.numeric{data-validation_label:"App Apdex T", name:"apdex_t", type:"text", value:apdex_t}\n        %span.specifier seconds\n\n      :if has_web_transaction\n        %li.field.setting\n          %label.with-help\n            Browser\n            %span.icon-help{data-tip:"Your transaction\'s Browser Apdex T-value is set to " + browser_apdex_t + " seconds. That means end user requests responding in less than " + browser_apdex_t + " seconds to the end user are satisfying (s), responding between " + browser_apdex_t + " seconds and " + (browser_apdex_t*4).toPrecision(2) + " seconds are tolerating (t), and responding in more than " + (browser_apdex_t*4).toPrecision(2) + " seconds are frustrating (f)."}\n\n          %input.browser_apdex_t.numeric{data-validation_label:"Browser Apdex T", name:"browser_apdex_t", type:"text", value:browser_apdex_t}\n          %span.specifier seconds\n      :else\n        %input{type:\'hidden\', value:browser_apdex_t, name:\'browser_apdex_t\'}\n      :if !use_alert_policies\n        %h3 Alert Thresholds\n        :each threshold_setting in threshold_settings\n          %li.numeric.threshold_input.field{data-type:threshold_setting.type}\n            %input.type{name:"threshold_settings[][type]", type:"hidden", value:threshold_setting.type}\n            %input{name:"threshold_settings[][label]", type:"hidden", value:threshold_setting.label}\n\n            %input.id{label:"", name:"threshold_settings[][id]", type:"hidden", value:threshold_setting.id}\n\n            %label.with-help=threshold_setting.label\n              :if threshold_setting.type === \'ErrorRate\'\n                %span.icon-help{data-tip:"Error rate thresholds define when an abnormal percentage of requests to your application result in errors."}\n              :if threshold_setting.type === \'Apdex\'\n                %span.icon-help{data-tip:"Apdex thresholds define degraded levels of page response time as measured from both the browser and inside the application"}\n\n            %select.yellow.lower.numeric{data-validation_label:threshold_setting.label, class:threshold_setting.type.toLowerCase(), name:"threshold_settings[][lower_value]"}\n              :if threshold_setting.type === \'Apdex\'\n                %option{value:\'\'} Disabled\n                %option{value:0.94}0.94 Good\n                %option{value:0.9}0.9\n                %option{value:0.85, selected:\'selected\'}0.85 Fair\n                %option{value:0.8}0.8\n                %option{value:0.7}0.7 Poor\n                %option{value:0.5}0.5 Unacceptable\n              :if threshold_setting.type === \'ErrorRate\'\n                %option{value:\'\'} Disabled\n                %option{value:0.01}> 0.01 %\n                %option{value:0.1}> 0.1 %\n                %option{value:1, selected:\'selected\'}> 1 %\n                %option{value:2}> 2 %\n                %option{value:3}> 3 %\n                %option{value:4}> 4 %\n                %option{value:5}> 5 %\n                %option{value:6}> 6 %\n                %option{value:7}> 7 %\n                %option{value:8}> 8 %\n                %option{value:9}> 9 %\n                %option{value:10}> 10 %\n            %span.specifier.range Caution\n\n            %select.red.upper.numeric{data-validation_label:threshold_setting.label, class:threshold_setting.type.toLowerCase(), name:"threshold_settings[][upper_value]"}\n              :if threshold_setting.type === \'Apdex\'\n                %option{value:\'\'} Disabled\n                %option{value:0.94}0.94 Good\n                %option{value:0.9}0.9\n                %option{value:0.85}0.85 Fair\n                %option{value:0.8}0.8\n                %option{value:0.7, selected:\'selected\'}0.7 Poor\n                %option{value:0.5}0.5 Unacceptable\n              :if threshold_setting.type === \'ErrorRate\'\n                %option{value:\'\'} Disabled\n                %option{value:0.01}> 0.01 %\n                %option{value:0.1}> 0.1 %\n                %option{value:1}> 1 %\n                %option{value:2}> 2 %\n                %option{value:3}> 3 %\n                %option{value:4}> 4 %\n                %option{value:5, selected:\'selected\'}> 5 %\n                %option{value:6}> 6 %\n                %option{value:7}> 7 %\n                %option{value:8}> 8 %\n                %option{value:9}> 9 %\n                %option{value:10}> 10 %\n\n            %span.specifier.range Critical\n'),window.JST["shared/_validation_errors.haml"]=Haml("%strong\n  Please fix the following errors.\n%ol\n  :each error in errors\n    %li\n      =error\n"),window.JST["tags/jst/_form.haml"]=Haml(".container\n  %a.icon.tags.trigger{ href: '#', class: tagged }\n  .tags-dropdown-wrapper\n    %fieldset.tag-input-container\n      %ul.tag-input\n        :each tag in tags\n          %li= RPM.sanitize(tag)\n"),window.JST["x_rays/jst/_about_xrays.haml"]=Haml("%h3 \n  What are X-Ray Sessions?\n  .graphic\n%p{style:'font-size:12px;'} \n  X-Ray Sessions provide extra detail into your Key Transactions. Start an X-Ray Session and New Relic will collect up to 100 transaction traces and a thread profile for your transaction. Drilling down into both Transaction Traces and Thread Profiles will provide an extra level of insight into what's happening in your Key Transactions.\n%p{style:'font-size:12px;'} \n  If your key transaction is run on more than 100 hosts or processes, the X-Ray session will sample 100 of those hosts or processes. "),window.JST["x_rays/jst/_already_running.haml"]=Haml(".flash.warning\n  .content\n    %h2 It looks like you already have an xray session running\n\n    %p\n      You can only have one X-Ray session running at a time on a Key Transaction. Please wait until the current one is finished to issue another.\n"),window.JST["x_rays/jst/_create.haml"]=Haml('\n.span-12\n  .span-6\n    #create-x-ray-session\n      %h1 Start an X-Ray Session\n\n      %form.formtastic{action:\'\', method:"post"}\n\n        %fieldset.inputs\n          %ol\n            %li\n              %label.large Name Your X-Ray Session\n              %input.large{name:\'name\', size:"40", value:name, type:"text", data-validation_label:"Name"}\n              %li\n                %label Requested trace count\n                %br\n                %select{name:\'requested_trace_count\'}\n                  %option{value:"10"} 10\n                  %option{value:"25"} 25\n                  %option{value:"50", selected:true} 50\n                  %option{value:"75"} 75\n                  %option{value: "100"} 100\n\n              %li\n                %label Maximum duration\n                %br\n                %select{name:\'duration\'}\n                  %option{value:"600"}  10 minutes\n                  %option{value:"1200"} 20 minutes\n                  %option{value:"1800"} 30 minutes\n                  %option{value:"2700"} 45 minutes\n                  %option{value:"3600", selected:true} 1 hour\n                  %option{value:"7200"} 2 hours\n\n        %br\n        %button#create_button.submit{type:"submit"} Start X-Ray Session\n\n\n  .span-6.last\n    .optional-class.side-promo\n      = JST["x_rays/jst/_about_xrays.haml"]()\n'),window.JST["x_rays/jst/_edit.haml"]=Haml('\n.span-12\n  .span-6\n    #update-x-ray-session\n      %h1 \n        %span.normal\n          Edit \n        = _.escape(name)\n\n      %form.formtastic{action:\'\', method:"post"}\n\n        %fieldset.inputs\n          %ol\n            %li\n              %label.large Rename\n              %input.large{name:\'name\', size:"40", value:name, type:"text", data-validation_label:"Name"}\n\n        %br\n        %button#edit_button.submit{type:"submit"} Update\n\n\n  .span-6.last\n    .optional-class.side-promo\n      = JST["x_rays/jst/_about_xrays.haml"]()\n'),window.JST["x_rays/jst/_empty.haml"]=Haml(".span-4#empty-msg\n  %h2 Welcome to X-Ray Sessions\n  %p\n    There aren\u2019t any X-Ray sessions for this application yet.\n    When a session is started, you may view them here. If you\u2019re wondering \n    why you can\u2019t start a session, please contact your account administrator.\n  :if userCanManageXRays\n    %p\n      %a.button{href:'#x_rays/new'} Start X-Ray Session\n"),window.JST["x_rays/jst/_index.haml"]=Haml("%thead#x-ray-headers\n  %th\n    %h2\n      X-Ray Sessions\n  %th.normal Progress\n  %th.normal Traces\n  / %th Thread Profiles Captured\n  %th.normal Author\n  %th.normal Started\n  %th.normal Status\n  %th &nbsp;\n\n%tbody#x-ray-rows\n  / rows go here...\n  \n"),window.JST["x_rays/jst/_row.haml"]=Haml('%td.name\n  %a{href:"/accounts/"+account_id+"/key_transactions/"+named_transaction_id+"/x_rays/" + id} = _.escape(name)\n%td.progress_container\n  .progress\n    .bar{style:"width:" + (trace_count / requested_trace_count)*100 + "%;"}\n      &nbsp;\n%td\n  = trace_count\n%td\n  :if creator\n    %a{href:"mailto:" + creator.email}= creator.email\n  :else\n    N/A\n%td\n  = started_ago + \' ago\'\n%td.status\n  = status\n%td.actions\n  :if userCanManageXRays\n    %a.edit{href:"#x_rays/edit/" + id, title:"edit"}\n      .icon.pencil.standalone\n  :if running && userCanManageXRays\n    %a.cancel{href:"#", title:"cancel"}\n      .icon.hide\n  :if !running && userCanDeleteXRays\n    %a.delete{href:"#", title:"delete"}\n      .icon.delete\n')}();