!function(t){var e="buttons";t.widget("ui."+e,{_create:function(){this.options.textViews=t(this.options.textViews),this.options.click=this.options.click||function(){},this.options.deselectable=this.options.deselectable||!1,this._prepare(),this._selectCurrentSelection()},_prepare:function(){var t=this;this.element.find("li").click(function(e){t._doClick(e,t)})},_button:function(t){var t=t||this.options.currentSelection,e="";return t&&(t=t.replace(/ /g,"."),e=this.element.find("li."+t)),0==e.length&&null!=t&&console.error("jQuery.buttons:","Couldn't find button with name '"+t+"'"),e},_selectCurrentSelection:function(){var t=this.options.currentSelection;t&&(this.element.find("li.selected").removeClass("selected"),this._button(t).addClass("selected"),this._updateViews())},_doClick:function(e,i){e.preventDefault(),i._selectButton(t(e.currentTarget),e)},_selectButton:function(e,i){this.options.deselectable&&e.hasClass("selected")?(e.parent().find(".selected").removeClass("selected"),this.options.currentSelection=null):(e.parent().find(".selected").removeClass("selected"),e.addClass("selected"),this.options.currentSelection=t.trim(e.attr("class").replace("selected",""))),this.options.click.call(e[0],i||null),this._selectCurrentSelection()},_updateViews:function(){this.options.textViews.text(this.stringValue())},stringValue:function(){var t=this.options.currentSelection;return this._button(t).text()},value:function(t){return void 0===t?this.options.currentSelection:(this.options.currentSelection=t,this._selectButton(this._button(t)),this)}}),t.ui[e].getter=" value",t.extend(t.ui[e],{defaults:{currentSelection:null,textViews:[]}})}(jQuery),function(t){RPM.event_list={initialize:function(){var e=new RegExp(["all","downtime","incident","criticalalert","caution","alert","note","deployment","profile","settings"].join("|"),"ig");t(".event_list").each(function(){var i=t(this),n=i.find("ul.buttons"),s=t("#drawer_of_requirement");return n.length<1?!0:(n.find("a").each(function(){t(this).attr("data-tip",t(this).text()),t(this).attr("data-tip-width","short")}),RPM.tooltips.create({scope:i}),n.buttons({currentSelection:"all",deselectable:!0,click:function(n){var s=t(this),l=s.attr("class");if(i.find("ol > li").show(),l.match(/selected/i)&&!l.match(/all/i)){var l=l.match(e);l=t.isArray(l)?t.trim(l[0]):"",i.find(".by_day_list").hide(),i.find(".by_type_list").hide(),i.find("."+l+"_list").show(),t.ajaxState.change("$event_list",l)}else l.match(/selected/i)&&l.match(/all/i)?t.ajaxState.change("event_list","all"):t.ajaxState.perform("event_list","all"),i.find(".by_day_list").show(),i.find(".by_type_list").hide();n&&(s.attr("data-rendered")?n.stopPropagation():s.attr("data-rendered","true"))}}),t.ajaxState.register("event_list",function(t){""!==t&&null!=t||(t="all"),n.buttons("value",t)},"all"),void s.css("min-height",i.outerHeight(!0)+40+"px"))})}}}(jQuery),RPM.recentEvents={loading:!1,autoReload:!1,usePushState:!1,onToggle:function(t){this.toggleCallbacks.push(t)},toggleCallbacks:[],isVisible:function(){return $("#drawer_of_requirement:visible").length>0},toggle:function(t){RPM.recent_events_settings.hideable&&this.isVisible()?($("#drawer_of_requirement").hide(),this.autoReload=!1,$.post(RPM.URL("/users/ui_states/USER_ID"),{vars:{show_recent_events:!1}})):RPM.recent_events_settings.hideable&&($("#drawer_of_requirement").show(),this.load(!0),$.post(RPM.URL("/users/ui_states/USER_ID"),{vars:{show_recent_events:!0}})),$(window).trigger("resize");for(var e=0;e<this.toggleCallbacks.length;e++)this.toggleCallbacks[e](t,this.isVisible())},load:function(t){var e=RPM.recentEvents;if(t&&(e.autoReload=t),!e.loading){var i=(new Date).getTime(),n=$("#event_list_container").attr("url");e.loading=!0,$("#event_list_container").load(n,function(){if(e.loading=!1,RPM.event_list.initialize(),e.autoReload){var t=3e5-((new Date).getTime()-i);setTimeout(e.load,t)}})}}},RPM.onLoadEvent(function(){$("a#drawer_toggle").click(function(t){t.preventDefault(),RPM.recentEvents.toggle(t)})});